import{j as r,R as m,L as b,Q as g,k as x,r as t}from"./index-BY9egYhW.js";import{B as N,a as _,H as V}from"./Helmet-ClrgHUyv.js";import{d as D,P as E}from"./react-icons.esm-DO47ONlk.js";import{D as T}from"./data-table-_fX450cL.js";import{u as P,a as v,b as U}from"./use-get-user-options.query-ZlupAocu.js";import{u as k}from"./use-get-vn-banks.query-CrBVwwEA.js";import{B as y}from"./badge-CW5hcgnt.js";import{C as a}from"./cell-currency-wBBlRJqz.js";import{C as j}from"./cell-percent-DTkBxGIM.js";import{C as s}from"./cell-text-DbXrKnYw.js";import{C as d}from"./cell-link-gcG7sjdM.js";import{u as C}from"./useQuery-Bst-_8Y-.js";import"./index-CGDEZ85P.js";import"./index-D85UzQdK.js";import"./dropdown-menu-s5hM6OTG.js";import"./select--WQDjXNr.js";import"./index-DsVbqe2n.js";import"./format-currency-DwwnROlR.js";import"./format-percent-Ca7gawAv.js";const K={id:!0,card_type:!0,date_coming_due:!0,date_due:!1,date_withdrawn:!0,days_coming_due:!0,days_remaining_due:!0,fee:!0,id_customer_creditcard:!1,id_customer_info:!1,id_pos_info:!1,id_users:!1,id_vietnamese_bank:!1,images_creditcard_due_withdrawn:!1,images_transfer_money_to_customer:!1,is_bank_payment_complete:!0,last_update:!1,money_applied_percent:!0,money_total:!0,note:!1,percent_to_charge:!0,rate_option:!0,status:!0,time_insert:!1,user_option:!0,uuid_id:!1,tid_pos:!1},S=({userOptions:i,rateOptions:c,statuses:l,vnBanks:n})=>[{id:"id",accessorKey:"id",header:"ID",enableHiding:!1,enablePinning:!0,cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:69,columnNumber:14},void 0)},{accessorKey:"uuid_id",header:"UUID",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:76,columnNumber:14},void 0)},{accessorKey:"id_users",header:"User ID",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:83,columnNumber:14},void 0)},{accessorKey:"rate_option",header:"Rate option",cell:e=>{var u;return r.jsxDEV(s,{children:(u=c==null?void 0:c[e.getValue()])==null?void 0:u.name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:91,columnNumber:9},void 0)}},{accessorKey:"user_option",header:"User option",cell:e=>{var u;return r.jsxDEV(s,{children:(u=i==null?void 0:i[e.getValue()])==null?void 0:u.name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:100,columnNumber:9},void 0)}},{accessorKey:"status",header:"Status",cell:e=>{var u,o;return r.jsxDEV(y,{variant:(u=l==null?void 0:l[e.getValue()])==null?void 0:u.status,children:(o=l==null?void 0:l[e.getValue()])==null?void 0:o.status},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:109,columnNumber:9},void 0)}},{accessorKey:"id_customer_creditcard",header:"Customer CCID",cell:e=>r.jsxDEV(d,{to:m.CUSTOMER_CC_DETAIL.replace(":id",e.getValue()),children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:122,columnNumber:9},void 0)},{accessorKey:"id_customer_info",header:"Customer Info ID",cell:e=>r.jsxDEV(d,{to:m.CUSTOMER_DETAIL.replace(":id",e.getValue()),children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:138,columnNumber:9},void 0)},{accessorKey:"tid_pos",header:"POS TID",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:150,columnNumber:14},void 0)},{accessorKey:"id_pos_info",header:"POS ID",cell:e=>r.jsxDEV(d,{to:m.STATISTICS_POS_USED.replace(":id",e.getValue()),children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:158,columnNumber:9},void 0)},{accessorKey:"id_vietnamese_bank",header:"Bank Name",cell:e=>{var u;return r.jsxDEV(s,{children:(u=n==null?void 0:n[e.getValue()])==null?void 0:u.short_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:174,columnNumber:9},void 0)}},{accessorKey:"is_bank_payment_complete",header:"Is bank payment complete?",cell:e=>r.jsxDEV(y,{variant:e.getValue()?"success":"destructive",children:e.getValue()?"Đã chuyển":"Chưa chuyển"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:183,columnNumber:9},void 0)},{accessorKey:"date_due",header:"Date due",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:193,columnNumber:14},void 0)},{accessorKey:"date_coming_due",header:"Date coming due",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:200,columnNumber:14},void 0)},{accessorKey:"days_coming_due",header:"Days coming due",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:207,columnNumber:14},void 0)},{accessorKey:"days_remaining_due",header:"Date remaining due",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:214,columnNumber:14},void 0)},{accessorKey:"date_withdrawn",header:"Date withdrawn",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:221,columnNumber:14},void 0)},{accessorKey:"card_type",header:"Card type",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:228,columnNumber:14},void 0)},{accessorKey:"money_total",header:"Revenue",cell:e=>r.jsxDEV(a,{value:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:235,columnNumber:14},void 0)},{accessorKey:"percent_to_charge",header:"Percent to charge",cell:e=>r.jsxDEV(j,{value:e.getValue()/100},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:242,columnNumber:14},void 0)},{accessorKey:"fee",header:"Fee",cell:e=>r.jsxDEV(a,{value:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:249,columnNumber:14},void 0)},{accessorKey:"money_applied_percent",header:"Net profit",cell:e=>r.jsxDEV(a,{value:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:256,columnNumber:14},void 0)},{accessorKey:"note",header:"Note",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:263,columnNumber:14},void 0)},{accessorKey:"last_update",header:"Last update",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:270,columnNumber:14},void 0)},{accessorKey:"time_insert",header:"Created time",cell:e=>r.jsxDEV(s,{children:e.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:277,columnNumber:14},void 0)},{id:"actions",enableHiding:!1,cell:({row:e})=>r.jsxDEV("div",{className:"space-x-2 truncate",children:r.jsxDEV(b,{to:m.CUSTOMER_HISTORIES_UPDATE.replace(":id",String(e.original.id)),className:"text-primary",children:r.jsxDEV(N,{variant:"outline",size:"icon",children:r.jsxDEV(D,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:294,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:293,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:286,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-history.column.tsx",lineNumber:285,columnNumber:9},void 0)}];function I(i){return _({url:"/customer_history/get_all_order_history",params:i})}function R(i){const c=[i.order_by,i.page,i.page_limit].join("_"),{data:l}=C({queryKey:[...g.CUSTOMER_HISTORY,c],queryFn:()=>I(i),placeholderData:x,gcTime:1e3*10});return{customerHistories:l}}function H(){const[i,c]=t.useState({pageIndex:0,pageSize:10}),[l,n]=t.useState(K),{customerHistories:e}=R({page:i.pageIndex+1,page_limit:i.pageSize,order_by:"DESC"}),{userOptionsByKey:u}=P(),{rateOptionsByKey:o}=v(),{statusesByKey:p}=U(),{vnBanksByKey:f}=k(),h=t.useMemo(()=>S({userOptions:u,rateOptions:o,statuses:p,vnBanks:f}),[u,o,p,f]);return r.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[r.jsxDEV("div",{className:"flex items-center justify-between space-y-2",children:[r.jsxDEV("h2",{className:"text-3xl font-bold tracking-tight",children:"Customer Histories"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-histories.container.tsx",lineNumber:53,columnNumber:9},this),r.jsxDEV(b,{to:m.CUSTOMER_HISTORIES_CREATE,children:r.jsxDEV(N,{className:"gap-2",children:[r.jsxDEV(E,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-histories.container.tsx",lineNumber:58,columnNumber:13},this)," Create new order"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-histories.container.tsx",lineNumber:57,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-histories.container.tsx",lineNumber:56,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-histories.container.tsx",lineNumber:52,columnNumber:7},this),r.jsxDEV(T,{data:e==null?void 0:e.result,columns:h,columnVisibility:l,rowCount:e==null?void 0:e.total_data,pagination:i,onColumnVisibilityChange:n,onPaginationChange:c},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-histories.container.tsx",lineNumber:62,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-histories.container.tsx",lineNumber:51,columnNumber:5},this)}function se(){return r.jsxDEV(r.Fragment,{children:[r.jsxDEV(V,{children:r.jsxDEV("title",{children:"POS System - Customer Histories"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/customer-histories.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/customer-histories.page.tsx",lineNumber:7,columnNumber:7},this),r.jsxDEV(H,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/customer-histories.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/customer-histories.page.tsx",lineNumber:6,columnNumber:5},this)}export{se as default};

import{a as G,Q as K,e as pe,r as y,j as e,R as se,b as $e}from"./index-XwE6gQmn.js";import{a as $,H as We}from"./Helmet-DUuvCvTm.js";import{z as i,u as ge,t as he,F as c}from"./index-MxbznExh.js";import{B as ie}from"./button-C4HOWXLM.js";import{C as Xe,c as Ze}from"./card-BA5oHXKG.js";import{I as d}from"./input-BFqvYdSA.js";import{L as s}from"./label-DhoCOihp.js";import{T as xe}from"./textarea-pe7qWxdy.js";import{u as je,a as ye,F as ve,b as fe,c as Ne,d as Ce,e as be}from"./use-calculate-manual.mutation-wFIPF1cQ.js";import{u as Je}from"./use-get-customers.query-CnOE94fL.js";import{F as Se}from"./vn-bank.field-fT9-E9lv.js";import{M as H,A as Q,a as Ve}from"./upload.constant-D3d5R5uO.js";import{u as W}from"./useMutation-Czv1wBp1.js";import{c as Oe}from"./convert-data-to-form-data.util-CYcIkezp.js";import{S as Fe,a as Re,b as we,c as qe,d as Me}from"./select-BLsJIQQv.js";import{A as er,a as rr,b as tr,c as ar,d as nr,e as sr,f as ir,g as or,h as cr}from"./alert-dialog-BeURQn3I.js";import{G as z}from"./grid-images-D-VjJXus.js";import{u as dr}from"./use-cancel-order.mutation-CIf40CLb.js";import{u as Te}from"./use-get-customer-by-id.query-lOxLSuWh.js";import{u as mr,F as lr}from"./create-customer-cc.feature-m4XxLmEW.js";import{u as me}from"./index-Dwx9NaXw.js";import{f as T}from"./format-currency-DwwnROlR.js";import{f as L}from"./format-percent-Ca7gawAv.js";import{u as _r}from"./use-get-customer-history-by-id.query-s0olUiPR.js";import{u as ur}from"./use-auth.cache-CFuprbIQ.js";import"./useQuery-BXJOiSOe.js";import"./index-CwCgg0f3.js";import"./use-get-user-options.query-B2W5Dekj.js";import"./use-get-vn-banks.query-F2BXTXzV.js";import"./popover-Bx3-hur5.js";import"./Combination-WE48jzIv.js";import"./index-DWR91OCR.js";import"./index-CROUqNK7.js";import"./react-icons.esm-5SUvy-NO.js";import"./index-DrW2nO8L.js";import"./dialog-Cq2VxrqT.js";import"./dialog-button.component-msJRMg9P.js";import"./customer-cc.form-BKGJk0nI.js";const le=i.object({id:i.coerce.number(),card_type:i.string({required_error:"Required."}),user_option:i.coerce.number({required_error:"Required."}).gt(0,"Required."),rate_option:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_info:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_creditcard:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:i.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:i.coerce.number({required_error:"Required."}),notification_coming_due:i.coerce.number(),percent_to_charge:i.coerce.number({required_error:"Required."}).gt(0,"Required."),money_total:i.coerce.number({required_error:"Required."}).gt(0,"Required."),money_applied_percent:i.coerce.number({required_error:"Required."}).gt(0,"Required."),note:i.string(),images_creditcard_due_withdrawn:i.any().refine(r=>{var a;return!(r!=null&&r.length)||!((a=Array.from(r))!=null&&a.some(o=>o.size>H))},"Max file size is 5MB.").refine(r=>{var a;return!(r!=null&&r.length)||!((a=Array.from(r))!=null&&a.some(o=>!Q.includes(o.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:i.any().refine(r=>{var a;return!(r!=null&&r.length)||!((a=Array.from(r))!=null&&a.some(o=>o.size>H))},"Max file size is 5MB.").refine(r=>{var a;return!(r!=null&&r.length)||!((a=Array.from(r))!=null&&a.some(o=>!Q.includes(o.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function pr(r){const a=Oe(r);return $({method:"patch",url:"/customer_history/order_update_admin",data:a,headers:{"Content-Type":"multipart/form-data"}})}function gr(){const{mutateAsync:r}=W({mutationFn:pr,onSuccess:()=>{G.invalidateQueries({queryKey:K.CUSTOMER_HISTORY})}});return{mutationUpdateOrderAdmin:r}}function Y(r){return`https://pos.crawl.vn${r}`}function _e(r){return r==null?void 0:r.replace(`https://pos.crawl.vn${Ve}`,"")}function hr(r){return $({method:"delete",url:"/customer_history/DeleteImage/images_creditcard_due_withdrawn",data:r})}function xr(){const{mutateAsync:r}=W({mutationFn:hr,onSuccess:a=>{(a.status||a.success)&&G.invalidateQueries({queryKey:K.CUSTOMER_HISTORY})}});return{mutationDeleteOrderCcImage:r}}function jr(r){return $({method:"delete",url:"/customer_history/DeleteImage/images_transfer_money_to_customer",data:r})}function yr(){const{mutateAsync:r}=W({mutationFn:jr,onSuccess:a=>{(a.status||a.success)&&G.invalidateQueries({queryKey:K.CUSTOMER_HISTORY})}});return{mutationDeleteOrderTransferImage:r}}function vr({defaultValues:r,defaultCustomer:a,defaultCreditCard:o}){var ce,de;const S=pe(),[g,q]=y.useState(),[m,O]=y.useState({...a,list_credit_card:a.list_customer_creditcard}),[l,A]=y.useState(o),[F,M]=y.useState({id:r.id_pos_info}),[U,X]=y.useState(Number(r.fee)),[D,I]=y.useState(r.percent_to_charge),[_,Z]=y.useState(String(r.rate_option)),[p,x]=y.useState("customer"),[J,V]=y.useState(),[E,ee]=y.useState(),{register:n,handleSubmit:re,getValues:f,formState:{errors:j}}=ge({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:he(le)}),{mutationCalculateManual:te}=je(),{mutationCalculateByLevelRate:ae}=ye(),{mutationUpdateOrderAdmin:B}=gr(),P=async t=>{const h=le.parse(t);(await B(h)).status&&S(se.CUSTOMER_HISTORIES)},{customers:u,refetchCustomers:N}=Je(g),{customer:C}=Te(J),{customerCcs:R,refetchCustomerCcs:b}=mr(g),Ae=t=>{q(t.target.value)},Ue=async t=>{q(""),O(void 0),M(void 0),A(void 0),n("id_customer_info").onChange({target:{name:"id_customer_info",value:t.id}}),n("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:0}}),n("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),n("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),O(t)},ke=t=>{q(""),O(void 0),M(void 0),n("id_customer_info").onChange({target:{name:"id_customer_info",value:t.id_customer_info}}),n("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:t.id}}),n("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),n("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),A(t),V(t.id_customer_info)};async function ne(t){const h=f("money_total"),w=f("rate_option"),k=f("percent_to_charge");let v={status:!1,fee:0,rate:Number(k),result:0};t&&t==="2"||!t&&w===2?v=await ae({money_total:h}):Number(k)>0&&(v=await te({money_total:h,percent_to_charge:String(k)})),v!=null&&v.status&&(X(v==null?void 0:v.fee),I(String(v==null?void 0:v.rate)),n("percent_to_charge").onChange({target:{name:"percent_to_charge",value:String(v==null?void 0:v.rate)}}),n("money_applied_percent").onChange({target:{name:"money_applied_percent",value:String(v.result)}}))}const oe=async t=>{var w;const h=(w=m==null?void 0:m.list_credit_card)==null?void 0:w.find(k=>k.id===Number(t));A(h),n("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:h==null?void 0:h.id_vietnamese_bank}}),M(void 0),n("id_pos_info").onChange({target:{name:"id_pos_info",value:0}})},De=(t,h)=>{M(t),h&&ee(h)},Ie=t=>{Z(t),ne(t)},Ee=t=>{n("money_total").onChange(t),ne()},Be=t=>{n("percent_to_charge").onChange(t),I(t.target.value)},Pe=()=>ne(),{mutationDeleteOrderCcImage:He}=xr(),{mutationDeleteOrderTransferImage:Qe}=yr(),ze=t=>{He({id:String(r.id),name_image_creditcard_due_withdrawn:t})},Le=t=>{Qe({id:String(r.id),name_image_transfer_money_to_customer:t})},{mutationCancelOrder:Ye}=dr(),Ge=async()=>{(await Ye({uuid_id:r.uuid_id})).status&&S(se.CUSTOMER_HISTORIES)};me(()=>{p==="customer"?N():b()},[g,p]),me(()=>{var t;if(C&&p==="credit_card"){C.list_credit_card=C==null?void 0:C.list_customer_creditcard,O(C);const h=(t=m==null?void 0:m.list_credit_card)==null?void 0:t.find(w=>w.id===Number(l==null?void 0:l.id));n("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:h==null?void 0:h.id_vietnamese_bank}})}},[C==null?void 0:C.id,l==null?void 0:l.id,p,oe]);const Ke=p==="customer"?"Name or Phone":"Credit card number";return e.jsxs("form",{onSubmit:re(P),className:"grid grid-cols-1 lg:grid-cols-2 gap-4 max-w-2xl mx-auto",autoComplete:"off",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:col-span-2",children:[e.jsx("div",{children:e.jsxs(s,{className:"items-center flex gap-1",children:[e.jsx("input",{name:"searchBy",type:"radio",value:"customer",checked:p==="customer",onChange:()=>x("customer")})," ","Search by Customer"]})}),e.jsx("div",{children:e.jsxs(s,{className:"items-center flex gap-1",children:[e.jsx("input",{name:"searchBy",type:"radio",value:"credit_card",checked:p==="credit_card",onChange:()=>x("credit_card")})," ","Search by Credit card"]})})]}),e.jsxs("div",{className:"lg:col-span-2 relative",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{placeholder:Ke,value:g,onChange:Ae,className:"flex-1"}),p==="credit_card"&&e.jsx(lr,{})]}),g&&e.jsx(Xe,{className:"absolute top-full mt-2 left-0 w-full z-50",children:e.jsxs(Ze,{className:"max-h-80 p-2 overflow-auto",children:[p==="credit_card"&&(R==null?void 0:R.map(t=>e.jsxs("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>ke(t),children:[e.jsx("strong",{children:t.name_on_creditcard})," (",t.creditcard_number,")"]},t.id))),p==="customer"&&(u==null?void 0:u.map(t=>e.jsxs("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>Ue(t),children:[e.jsx("strong",{children:t.full_name})," (",t.phonenumber,")"]},t.id)))]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"customer",children:"Customer full name"}),e.jsx(d,{readOnly:!0,value:m==null?void 0:m.full_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"id_customer_creditcard",children:"Credit Card"}),e.jsxs("div",{children:[m?e.jsx(ve,{...n("id_customer_creditcard"),value:l!=null&&l.id?String(l==null?void 0:l.id):"",listCustomerCreditcards:m==null?void 0:m.list_credit_card,onSelectCard:oe}):e.jsx(d,{readOnly:!0}),E&&e.jsxs("p",{className:"italic mt-1 text-xs",children:["Last percent charge:"," ",e.jsx("strong",{children:L(E/100)})]})]}),e.jsx(c,{error:j.id_customer_creditcard})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"id_pos_info",children:"POS"}),l?e.jsx(fe,{...n("id_pos_info"),idCustomerCreditcard:l.id,onSelectPos:De,defaultValue:F==null?void 0:F.id}):e.jsx(d,{readOnly:!0}),e.jsx(c,{error:j.id_pos_info})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"id_vietnamese_bank",children:"Bank"}),l?e.jsx(Se,{name:n("id_vietnamese_bank").name,onChange:n("id_vietnamese_bank").onChange,onBlur:n("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:l!=null&&l.id_vietnamese_bank?String(l.id_vietnamese_bank):void 0}):e.jsx(d,{readOnly:!0}),e.jsx(c,{error:j.id_vietnamese_bank})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"money_total",children:"Total Money"}),e.jsxs("div",{children:[e.jsx(d,{...n("money_total"),onChange:Ee}),e.jsx("p",{className:"p-2 text-sm italic",children:isNaN(Number(f("money_total")))?" ":T(Number(f("money_total")))})]}),e.jsx(c,{error:j.money_total})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"customer",children:"Max Usage Money"}),e.jsx(d,{readOnly:!0,defaultValue:F==null?void 0:F.max_per_charge})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"user_option",children:"User Option"}),m?e.jsx(Ne,{...n("user_option"),defaultValue:String(r.user_option)}):e.jsx(d,{readOnly:!0}),e.jsx(c,{error:j.user_option})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"rate_option",children:"Rate Option"}),m?e.jsx(Ce,{...n("rate_option"),defaultValue:String(r.rate_option),onSelectRate:Ie}):e.jsx(d,{readOnly:!0}),e.jsx(c,{error:j.rate_option})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"percent_to_charge",children:"Percent to Charge"}),e.jsxs("div",{children:[e.jsx(d,{...n("percent_to_charge"),value:D,onChange:Be,onBlur:Pe,readOnly:_==="2"}),e.jsx("p",{className:"p-2 text-sm italic",children:isNaN(Number(f("percent_to_charge")))?" ":L(Number(f("percent_to_charge"))/100)})]}),e.jsx(c,{error:j.percent_to_charge})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"fee",children:"Fee"}),e.jsxs("div",{children:[e.jsx(d,{readOnly:!0,value:U}),e.jsx("p",{className:"p-2 text-sm italic",children:isNaN(Number(U))?" ":T(Number(U))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"}),e.jsxs("div",{children:[e.jsx(d,{...n("money_applied_percent"),value:f("money_applied_percent"),readOnly:!0}),e.jsx("p",{className:"p-2 text-sm italic",children:isNaN(Number(f("money_applied_percent")))?" ":T(Number(f("money_applied_percent")))})]}),e.jsx(c,{error:j.money_applied_percent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"days_coming_due",children:"Days Coming Due"}),e.jsx(d,{...n("days_coming_due")}),e.jsx(c,{error:j.days_coming_due})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"notification_coming_due",children:"Notification Coming Due"}),e.jsxs(Fe,{...n("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:t=>n("notification_coming_due").onChange({target:{name:"notification_coming_due",value:t}}),children:[e.jsx(Re,{className:"h-8 w-20",children:e.jsx(we,{placeholder:"Set notification"})}),e.jsx(qe,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:t,value:h})=>e.jsx(Me,{value:h,children:t},h))})]}),e.jsx(c,{error:j.notification_coming_due})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"card_type",children:"Card Type"}),e.jsx(be,{...n("card_type"),defaultValue:r.card_type}),e.jsx(c,{error:j.card_type})]}),e.jsxs("div",{className:"space-y-2 lg:col-span-2",children:[e.jsx(s,{htmlFor:"note",children:"Note"}),e.jsx(xe,{...n("note")}),e.jsx(c,{error:j.note})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(s,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"}),e.jsx(z,{images:(ce=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:ce.map(Y),onDelete:ze,getName:_e}),e.jsx(d,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...n("images_creditcard_due_withdrawn")}),e.jsx(c,{error:j.images_creditcard_due_withdrawn})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(s,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"}),e.jsx(z,{images:(de=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:de.map(Y),onDelete:Le,getName:_e}),e.jsx(d,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...n("images_transfer_money_to_customer")}),e.jsx(c,{error:j.images_transfer_money_to_customer})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 lg:col-span-2",children:[r.status!==3&&e.jsxs(er,{children:[e.jsx(rr,{asChild:!0,children:e.jsx(ie,{type:"button",variant:"destructive",children:"Cancel Order"})}),e.jsxs(tr,{children:[e.jsxs(ar,{children:[e.jsx(nr,{children:"Are you absolutely sure?"}),e.jsx(sr,{children:"This action cannot be undone. This will permanently cancel this order and can not revert."})]}),e.jsxs(ir,{children:[e.jsx(or,{children:"Cancel"}),e.jsx(cr,{onClick:Ge,children:"Confirm"})]})]})]}),e.jsx(ie,{type:"submit",className:"w-full",children:"Submit"})]})]})}const ue=i.object({id:i.coerce.number(),card_type:i.string({required_error:"Required."}),user_option:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:i.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:i.coerce.number({required_error:"Required."}),notification_coming_due:i.coerce.number(),note:i.string(),images_creditcard_due_withdrawn:i.any().refine(r=>{var a;return!(r!=null&&r.length)||!((a=Array.from(r))!=null&&a.some(o=>o.size>H))},"Max file size is 5MB.").refine(r=>{var a;return!(r!=null&&r.length)||!((a=Array.from(r))!=null&&a.some(o=>!Q.includes(o.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:i.any().refine(r=>{var a;return!(r!=null&&r.length)||!((a=Array.from(r))!=null&&a.some(o=>o.size>H))},"Max file size is 5MB.").refine(r=>{var a;return!(r!=null&&r.length)||!((a=Array.from(r))!=null&&a.some(o=>!Q.includes(o.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function fr(r){const a=Oe(r);return $({method:"patch",url:"/customer_history/order_update_user",data:a,headers:{"Content-Type":"multipart/form-data"}})}function Nr(){const{mutateAsync:r}=W({mutationFn:fr,onSuccess:()=>{G.invalidateQueries({queryKey:K.CUSTOMER_HISTORY})}});return{mutationUpdateOrderUser:r}}function Cr({defaultValues:r,defaultCustomer:a,defaultCreditCard:o}){var B,P;const S=pe(),[g,q]=y.useState(o),[m,O]=y.useState({id:r.id_pos_info}),[l,A]=y.useState(Number(r.fee)),[F,M]=y.useState(r.percent_to_charge),[U,X]=y.useState(String(r.rate_option)),[D,I]=y.useState(),{register:_,handleSubmit:Z,getValues:p,formState:{errors:x}}=ge({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:he(ue)}),{mutationCalculateManual:J}=je(),{mutationCalculateByLevelRate:V}=ye(),{mutationUpdateOrderUser:E}=Nr(),ee=async u=>{const N=ue.parse(u);(await E(N)).status&&S(se.CUSTOMER_HISTORIES)};async function n(u){const N=p("money_total"),C=p("rate_option"),R=p("percent_to_charge");let b={status:!1,fee:0,rate:Number(R),result:0};u&&u==="2"||!u&&C===2?b=await V({money_total:N}):Number(R)>0&&(b=await J({money_total:N,percent_to_charge:String(R)})),b.status&&(A(b==null?void 0:b.fee),_("percent_to_charge").onChange({target:{name:"percent_to_charge",value:b==null?void 0:b.rate}}),_("money_applied_percent").onChange({target:{name:"money_applied_percent",value:b.result}}))}const re=(u,N)=>{O(u),N&&I(N)},f=u=>{X(u),n(u)},j=u=>{_("money_total").onChange(u),n()},te=u=>{_("percent_to_charge").onChange(u),M(u.target.value)},ae=()=>n();return e.jsxs("form",{onSubmit:Z(ee),className:"grid grid-cols-1 lg:grid-cols-2 gap-4 max-w-2xl mx-auto",autoComplete:"off",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"customer",children:"Customer full name"}),e.jsx(d,{readOnly:!0,defaultValue:a==null?void 0:a.full_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"id_customer_creditcard",children:"Credit Card"}),e.jsxs("div",{children:[e.jsx(ve,{..._("id_customer_creditcard"),defaultValue:g!=null&&g.id?String(g.id):"",listCustomerCreditcards:a==null?void 0:a.list_customer_creditcard,readOnly:!0}),D&&e.jsxs("p",{className:"italic mt-1 text-xs",children:["Last percent charge:"," ",e.jsx("strong",{children:L(D/100)})]})]}),e.jsx(c,{error:x.id_customer_creditcard})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"id_pos_info",children:"POS"}),g?e.jsx(fe,{..._("id_pos_info"),idCustomerCreditcard:g.id,onSelectPos:re,defaultValue:m==null?void 0:m.id,readOnly:!0}):e.jsx(d,{readOnly:!0}),e.jsx(c,{error:x.id_pos_info})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"id_vietnamese_bank",children:"Bank"}),g?e.jsx(Se,{name:_("id_vietnamese_bank").name,onChange:_("id_vietnamese_bank").onChange,onBlur:_("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:g!=null&&g.id_vietnamese_bank?String(g.id_vietnamese_bank):void 0}):e.jsx(d,{readOnly:!0}),e.jsx(c,{error:x.id_vietnamese_bank})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"money_total",children:"Total Money"}),e.jsxs("div",{children:[e.jsx(d,{..._("money_total"),onChange:j,readOnly:!0}),e.jsx("p",{className:"p-2 text-sm italic",children:isNaN(Number(p("money_total")))?" ":T(Number(p("money_total")))})]}),e.jsx(c,{error:x.money_total})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"customer",children:"Max Usage Money"}),e.jsx(d,{readOnly:!0,defaultValue:m==null?void 0:m.max_per_charge})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"user_option",children:"User Option"}),e.jsx(Ne,{..._("user_option"),defaultValue:String(r.user_option)}),e.jsx(c,{error:x.user_option})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"rate_option",children:"Rate Option"}),e.jsx(Ce,{..._("rate_option"),defaultValue:String(r.rate_option),onSelectRate:f,readOnly:!0}),e.jsx(c,{error:x.rate_option})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"percent_to_charge",children:"Percent to Charge"}),e.jsxs("div",{children:[e.jsx(d,{..._("percent_to_charge"),value:F,onChange:te,onBlur:ae,readOnly:U==="2"}),e.jsx("p",{className:"p-2 text-sm italic",children:isNaN(Number(p("percent_to_charge")))?" ":L(Number(p("percent_to_charge"))/100)})]}),e.jsx(c,{error:x.percent_to_charge})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"fee",children:"Fee"}),e.jsxs("div",{children:[e.jsx(d,{readOnly:!0,value:l}),e.jsx("p",{className:"p-2 text-sm italic",children:isNaN(Number(l))?" ":T(Number(l))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"}),e.jsxs("div",{children:[e.jsx(d,{..._("money_applied_percent"),value:p("money_applied_percent"),readOnly:!0}),e.jsx("p",{className:"p-2 text-sm italic",children:isNaN(Number(p("money_applied_percent")))?" ":T(Number(p("money_applied_percent")))})]}),e.jsx(c,{error:x.money_applied_percent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"days_coming_due",children:"Days Coming Due"}),e.jsx(d,{..._("days_coming_due")}),e.jsx(c,{error:x.days_coming_due})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"notification_coming_due",children:"Notification Coming Due"}),e.jsxs(Fe,{..._("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:u=>_("notification_coming_due").onChange({target:{name:"notification_coming_due",value:u}}),children:[e.jsx(Re,{className:"h-8 w-20",children:e.jsx(we,{placeholder:"Set notification"})}),e.jsx(qe,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:u,value:N})=>e.jsx(Me,{value:N,children:u},N))})]}),e.jsx(c,{error:x.notification_coming_due})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"card_type",children:"Card Type"}),e.jsx(be,{..._("card_type"),defaultValue:r.card_type}),e.jsx(c,{error:x.card_type})]}),e.jsxs("div",{className:"space-y-2 lg:col-span-2",children:[e.jsx(s,{htmlFor:"note",children:"Note"}),e.jsx(xe,{..._("note")}),e.jsx(c,{error:x.note})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(s,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"}),e.jsx(z,{images:(B=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:B.map(Y)}),e.jsx(d,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",..._("images_creditcard_due_withdrawn")}),e.jsx(c,{error:x.images_creditcard_due_withdrawn})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(s,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"}),e.jsx(z,{images:(P=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:P.map(Y)}),e.jsx(d,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",..._("images_transfer_money_to_customer")}),e.jsx(c,{error:x.images_transfer_money_to_customer})]})]}),e.jsx("div",{className:"lg:col-span-2 mt-4",children:e.jsx(ie,{className:"w-full",children:"Submit"})})]})}function br(){var m;const r=$e(),{isAdmin:a}=ur(),{customerHistory:o}=_r(Number(r.id)),{customer:S}=Te((o==null?void 0:o.id_customer_info)||0),g=(m=S==null?void 0:S.list_customer_creditcard)==null?void 0:m.find(O=>O.id===(o==null?void 0:o.id_customer_creditcard)),q=a()?vr:Cr;return e.jsxs("div",{className:"space-y-6 px-4 py-4",children:[e.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight max-w-2xl mx-auto",children:["Update Order: ",r.id]}),o&&g&&S&&e.jsx(q,{defaultValues:o,defaultCreditCard:g,defaultCustomer:S})]})}function dt(){return e.jsxs(e.Fragment,{children:[e.jsx(We,{children:e.jsx("title",{children:"POS System - Order Update"})}),e.jsx(br,{})]})}export{dt as default};

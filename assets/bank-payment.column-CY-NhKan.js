import{a as m,Q as p,j as e,R as h,r as g}from"./index-XwE6gQmn.js";import{U as x,E as y}from"./react-icons.esm-5SUvy-NO.js";import{B as c}from"./badge-DmV7fwsG.js";import{B as o}from"./button-C4HOWXLM.js";import{D as _}from"./dialog-Cq2VxrqT.js";import{C as l}from"./cell-currency-D6tOSgAE.js";import{C as u}from"./cell-percent-DV96QzFN.js";import{C as i}from"./cell-text-H3JibL2T.js";import{D as j}from"./dialog-button.component-msJRMg9P.js";import{L as C}from"./label-DhoCOihp.js";import{C as f}from"./cell-bank-ajtKXmsI.js";import{T as b,a as k,b as D,c as V}from"./index-BsOMOp0z.js";import{u as v}from"./useMutation-Czv1wBp1.js";import{a as A}from"./Helmet-DUuvCvTm.js";import{A as B,a as T,b as P,c as I,d as E,e as K,f as S,g as U,h as F}from"./alert-dialog-BeURQn3I.js";import{C as N}from"./cell-link-Dxt7hr8a.js";import{F as M}from"./customer-cc-info.feature-mi_TeN3z.js";function R(r){return A({method:"patch",url:"/customer_history/bankPayments/update_bank_payment_complete",data:r})}function L(){const{mutateAsync:r}=v({mutationFn:R,onSettled:()=>{m.invalidateQueries({queryKey:p.BANK_PAYMENT})}});return{mutationUpdateBankPaymentStatusById:r}}function d({status:r,id:n}){const{mutationUpdateBankPaymentStatusById:t}=L(),a=()=>{t({id:n,is_bank_payment_complete:!r})};return e.jsx(b,{children:e.jsxs(k,{children:[e.jsx(D,{children:e.jsxs(B,{children:[e.jsx(T,{asChild:!0,children:e.jsx(o,{variant:"outline",size:"icon",children:e.jsx(x,{})})}),e.jsxs(P,{children:[e.jsxs(I,{children:[e.jsx(E,{children:"Changing status"}),e.jsxs(K,{children:["Confirm to update bank payment status to"," ",r?"uncomplete":"complete","."]})]}),e.jsxs(S,{children:[e.jsx(U,{children:"Cancel"}),e.jsx(F,{onClick:a,children:"Confirm"})]})]})]})}),e.jsx(V,{children:e.jsxs("p",{children:["Update bank payment status to ",r?"uncomplete":"complete","."]})})]})})}function O({row:r,vnBanks:n,showUpdateStatus:t}){return e.jsx("div",{className:"grid sm:grid-cols-[200px_1fr] items-center gap-4 max-h-96 px-4 overflow-auto",children:r.getAllCells().map(a=>{let s=e.jsx(i,{children:a.getValue()});if(a.column.id!=="actions"){switch(a.column.id){case"id_customer_creditcard":s=e.jsx(N,{to:h.CUSTOMER_CC_DETAIL.replace(":id",a.getValue()),children:a.getValue()});break;case"id_vietnamese_bank":s=e.jsx(f,{value:a.getValue(),vnBanks:n});break;case"is_bank_payment_complete":s=e.jsxs("div",{className:"space-x-2",children:[e.jsx(c,{variant:a.getValue()?"success":"destructive",children:a.getValue()?"Đã chuyển":"Chưa chuyển"}),t&&e.jsx(d,{id:a.row.original.id,status:a.getValue()})]});break;case"percent_to_charge":s=e.jsx(u,{value:a.getValue()/100});break;case"money_total":case"money_applied_percent":s=e.jsx(l,{value:a.getValue()});break}return e.jsxs(g.Fragment,{children:[e.jsx(C,{className:"text-muted-foreground",children:a.column.columnDef.header}),e.jsx("div",{children:s})]},a.id)}})})}const se={id:!0,id_customer_creditcard:!0,id_vietnamese_bank:!0,is_bank_payment_complete:!0,money_applied_percent:!0,money_total:!0,percent_to_charge:!0,tid_pos:!0},ie=({vnBanks:r,showUpdateStatus:n})=>[{accessorKey:"id",header:"ID",enableHiding:!1,cell:t=>e.jsx(i,{children:t.getValue()})},{accessorKey:"id_customer_creditcard",header:"Customer CCID",cell:t=>e.jsx(M,{id:t.getValue()})},{accessorKey:"tid_pos",header:"POS TID",cell:t=>e.jsx(i,{children:t.getValue()})},{accessorKey:"id_vietnamese_bank",header:"Bank Name",cell:t=>{var a;return e.jsx(i,{children:(a=r==null?void 0:r[t.getValue()])==null?void 0:a.short_name})}},{accessorKey:"is_bank_payment_complete",header:"Is bank payment complete?",cell:t=>e.jsxs("div",{className:"space-x-2 truncate",children:[e.jsx(c,{variant:t.getValue()?"success":"destructive",children:t.getValue()?"Đã chuyển":"Chưa chuyển"}),n&&e.jsx(d,{id:t.row.original.id,status:t.getValue()})]})},{accessorKey:"money_total",header:"Total Money",cell:t=>e.jsx(l,{value:t.getValue()})},{accessorKey:"percent_to_charge",header:"Percent to charge",cell:t=>e.jsx(u,{value:t.getValue()/100})},{accessorKey:"money_applied_percent",header:"Total Money (- Fee)",cell:t=>e.jsx(l,{value:t.getValue()})},{id:"actions",enableHiding:!1,cell:({row:t})=>e.jsx(j,{title:"Detail Info",description:"Detail info's bank payment.",trigger:e.jsx(o,{variant:"outline",size:"icon",children:e.jsx(y,{})}),actionButtons:e.jsx(_,{asChild:!0,children:e.jsx(o,{type:"button",variant:"secondary",children:"Close"})}),children:e.jsx(O,{row:t,vnBanks:r,showUpdateStatus:n})})}];export{se as b,ie as g};

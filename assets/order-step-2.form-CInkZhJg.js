import{a as S,Q as R,r as t,j as r,e as z,R as _}from"./index-BBOSr7wM.js";import{z as k,u as K,t as Q,F as $}from"./index-CLhdQBHv.js";import{$ as Y,a as A,_ as D,d as P,B as j}from"./button-DqtCoJ9q.js";import{u as M}from"./useMutation-Cup4ynIy.js";import{a as I}from"./Helmet-B_Qq3Yxz.js";import{c as X}from"./convert-data-to-form-data.util-CYcIkezp.js";import{$ as G,a as W,d as U,e as Z}from"./Combination-hPdF80R-.js";import{$ as J,a as ee}from"./index-Dp3eeLKn.js";import{g as re}from"./react-icons.esm-EA0c0Jq7.js";import{L as m}from"./label-Dlj4BwLN.js";import{u as se}from"./use-cancel-order.mutation-D-XYBj6v.js";import{I as V}from"./input-BNsxhIvX.js";import{M as w,A as O}from"./upload.constant-D3d5R5uO.js";import{f as T}from"./format-currency-DwwnROlR.js";import{f as oe}from"./format-percent-Ca7gawAv.js";import{A as te,a as ie,b as me,c as ce,d as ae,e as ne,f as le,g as ue,h as de}from"./alert-dialog-Dgqz29oO.js";function fe(e){const s=X(e);return I({method:"post",url:"/customer_history/order_step2",data:s,headers:{"Content-Type":"multipart/form-data"}})}function pe(){const{mutateAsync:e}=M({mutationFn:fe,onSuccess:s=>{s.status&&S.invalidateQueries({queryKey:R.CUSTOMER_HISTORY})}});return{mutationCreateOrderStep2:e}}const F="Checkbox",[be,qe]=G(F),[he,Ne]=be(F),xe=t.forwardRef((e,s)=>{const{__scopeCheckbox:o,name:n,checked:l,defaultChecked:c,required:u,disabled:d,value:f="on",onCheckedChange:x,...g}=e,[i,p]=t.useState(null),h=Y(s,a=>p(a)),v=t.useRef(!1),C=i?!!i.closest("form"):!0,[N=!1,E]=W({prop:l,defaultProp:c,onChange:x}),L=t.useRef(N);return t.useEffect(()=>{const a=i==null?void 0:i.form;if(a){const y=()=>E(L.current);return a.addEventListener("reset",y),()=>a.removeEventListener("reset",y)}},[i,E]),t.createElement(he,{scope:o,state:N,disabled:d},t.createElement(A.button,D({type:"button",role:"checkbox","aria-checked":b(N)?"mixed":N,"aria-required":u,"data-state":H(N),"data-disabled":d?"":void 0,disabled:d,value:f},g,{ref:h,onKeyDown:U(e.onKeyDown,a=>{a.key==="Enter"&&a.preventDefault()}),onClick:U(e.onClick,a=>{E(y=>b(y)?!0:!y),C&&(v.current=a.isPropagationStopped(),v.current||a.stopPropagation())})})),C&&t.createElement(ke,{control:i,bubbles:!v.current,name:n,value:f,checked:N,required:u,disabled:d,style:{transform:"translateX(-100%)"}}))}),ye="CheckboxIndicator",ge=t.forwardRef((e,s)=>{const{__scopeCheckbox:o,forceMount:n,...l}=e,c=Ne(ye,o);return t.createElement(Z,{present:n||b(c.state)||c.state===!0},t.createElement(A.span,D({"data-state":H(c.state),"data-disabled":c.disabled?"":void 0},l,{ref:s,style:{pointerEvents:"none",...e.style}})))}),ke=e=>{const{control:s,checked:o,bubbles:n=!0,...l}=e,c=t.useRef(null),u=J(o),d=ee(s);return t.useEffect(()=>{const f=c.current,x=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(x,"checked").set;if(u!==o&&i){const p=new Event("click",{bubbles:n});f.indeterminate=b(o),i.call(f,b(o)?!1:o),f.dispatchEvent(p)}},[u,o,n]),t.createElement("input",D({type:"checkbox","aria-hidden":!0,defaultChecked:b(o)?!1:o},l,{tabIndex:-1,ref:c,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function b(e){return e==="indeterminate"}function H(e){return b(e)?"indeterminate":e?"checked":"unchecked"}const q=xe,ve=ge,B=t.forwardRef(({className:e,...s},o)=>r.jsxDEV(q,{ref:o,className:P("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:r.jsxDEV(ve,{className:P("flex items-center justify-center text-current"),children:r.jsxDEV(re,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/ui/checkbox.tsx",lineNumber:22,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/ui/checkbox.tsx",lineNumber:19,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/ui/checkbox.tsx",lineNumber:11,columnNumber:3},void 0));B.displayName=q.displayName;function Ee(e){return I({method:"post",url:"/customer_history/order_step2_1",data:e})}function _e(){const{mutateAsync:e}=M({mutationFn:Ee,onSuccess:s=>{s.status&&S.invalidateQueries({queryKey:R.CUSTOMER_HISTORY})}});return{mutationCreateOrderStep2_1:e}}const Te=k.object({uuid_id:k.string({required_error:"Required."}),images_creditcard_due_withdrawn:k.any().refine(e=>{var s;return!(e!=null&&e.length)||!((s=Array.from(e))!=null&&s.some(o=>o.size>w))},"Max file size is 5MB.").refine(e=>{var s;return!(e!=null&&e.length)||!((s=Array.from(e))!=null&&s.some(o=>!O.includes(o.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:k.any().refine(e=>{var s;return!(e!=null&&e.length)||!((s=Array.from(e))!=null&&s.some(o=>o.size>w))},"Max file size is 5MB.").refine(e=>{var s;return!(e!=null&&e.length)||!((s=Array.from(e))!=null&&s.some(o=>!O.includes(o.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function Be({resultStep1:e}){const s=z(),[o,n]=t.useState(!1),{register:l,handleSubmit:c,formState:{errors:u}}=K({defaultValues:{uuid_id:e.uuid_id},resolver:Q(Te)}),{mutationCreateOrderStep2:d}=pe();_e();const{mutationCancelOrder:f}=se(),x=async p=>{let h=null;o?s(_.CUSTOMER_HISTORIES):h=await d(p),h!=null&&h.status&&s(_.CUSTOMER_HISTORIES)},g=async()=>{(await f({uuid_id:e.uuid_id})).status&&s(_.CUSTOMER_HISTORIES)},i=p=>{n(p)};return r.jsxDEV("form",{onSubmit:c(x),className:"grid grid-cols-2 gap-4 max-w-2xl mx-auto",autoComplete:"off",children:[r.jsxDEV("div",{className:"grid border border-b-0 md:grid-cols-[200px_1fr] col-span-2",children:[r.jsxDEV(m,{className:"text-muted-foreground border-b flex items-center p-2",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:85,columnNumber:9},this),r.jsxDEV("p",{className:"border-b border-l p-2",children:e.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:88,columnNumber:9},this),r.jsxDEV(m,{className:"text-muted-foreground border-b flex items-center p-2",children:"Card Number"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:90,columnNumber:9},this),r.jsxDEV("p",{className:"border-b border-l p-2",children:e.customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:93,columnNumber:9},this),r.jsxDEV(m,{className:"text-muted-foreground border-b flex items-center p-2",children:"Customer Name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:97,columnNumber:9},this),r.jsxDEV("p",{className:"border-b border-l p-2",children:e.customer_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:100,columnNumber:9},this),r.jsxDEV(m,{className:"text-muted-foreground border-b flex items-center p-2",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:102,columnNumber:9},this),r.jsxDEV("p",{className:"border-b border-l p-2",children:T(e.fee)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:105,columnNumber:9},this),r.jsxDEV(m,{className:"text-muted-foreground border-b flex items-center p-2",children:"Total Money (- Fee)"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:109,columnNumber:9},this),r.jsxDEV("p",{className:"border-b border-l p-2",children:T(e.money_applied_percent)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:112,columnNumber:9},this),r.jsxDEV(m,{className:"text-muted-foreground border-b flex items-center p-2",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:116,columnNumber:9},this),r.jsxDEV("p",{className:"border-b border-l p-2",children:T(e.money_total)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:119,columnNumber:9},this),r.jsxDEV(m,{className:"text-muted-foreground border-b flex items-center p-2",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:123,columnNumber:9},this),r.jsxDEV("p",{className:"border-b border-l p-2",children:e.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:126,columnNumber:9},this),r.jsxDEV(m,{className:"text-muted-foreground border-b flex items-center p-2",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:128,columnNumber:9},this),r.jsxDEV("p",{className:"border-b border-l p-2",children:oe(e.percent_to_charge/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:131,columnNumber:9},this),r.jsxDEV(m,{className:"text-muted-foreground border-b flex items-center p-2",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:135,columnNumber:9},this),r.jsxDEV("p",{className:"border-b border-l p-2",children:e.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:138,columnNumber:9},this),r.jsxDEV(m,{className:"text-muted-foreground border-b flex items-center p-2",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:140,columnNumber:9},this),r.jsxDEV("p",{className:"border-b border-l p-2",children:e.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:143,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:84,columnNumber:7},this),r.jsxDEV("div",{className:"flex items-center space-x-2",children:[r.jsxDEV(B,{checked:o,onCheckedChange:i,id:"upload-later"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:147,columnNumber:9},this),r.jsxDEV("label",{htmlFor:"upload-later",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Upload later"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:152,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:146,columnNumber:7},this),!o&&r.jsxDEV("div",{className:"grid col-span-2 md:grid-cols-2 gap-4",children:[r.jsxDEV("div",{className:"space-y-4",children:[r.jsxDEV(m,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:163,columnNumber:13},this),r.jsxDEV(V,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...l("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:166,columnNumber:13},this),r.jsxDEV($,{error:u.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:172,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:162,columnNumber:11},this),r.jsxDEV("div",{className:"space-y-4",children:[r.jsxDEV(m,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:178,columnNumber:13},this),r.jsxDEV(V,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...l("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:181,columnNumber:13},this),r.jsxDEV($,{error:u.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:187,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:177,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:161,columnNumber:9},this),r.jsxDEV("div",{className:"mt-4 grid grid-cols-2 gap-4 col-span-2",children:[r.jsxDEV(te,{children:[r.jsxDEV(ie,{asChild:!0,children:r.jsxDEV(j,{type:"button",variant:"destructive",children:"Cancel Order"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:197,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:196,columnNumber:11},this),r.jsxDEV(me,{children:[r.jsxDEV(ce,{children:[r.jsxDEV(ae,{children:"Are you absolutely sure?"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:203,columnNumber:15},this),r.jsxDEV(ne,{children:"This action cannot be undone. This will permanently cancel this order and can not revert."},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:204,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:202,columnNumber:13},this),r.jsxDEV(le,{children:[r.jsxDEV(ue,{children:"Cancel"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:210,columnNumber:15},this),r.jsxDEV(de,{variant:"default",onClick:g,children:"Confirm"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:211,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:209,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:201,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:195,columnNumber:9},this),r.jsxDEV(j,{type:"submit",className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:217,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:194,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:79,columnNumber:5},this)}export{Be as F};

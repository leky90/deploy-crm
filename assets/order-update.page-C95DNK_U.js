import{a as Y,Q as G,e as fe,r as g,j as e,R as ie,b as Ke}from"./index-D1JUiLua.js";import{a as K,H as $e}from"./Helmet-BSeNyQbR.js";import{z as t,u as Ne,t as be,F as a}from"./index-ChGI5FC_.js";import{B as te}from"./button-H_a97MWm.js";import{C as We,c as Xe}from"./card-DKsoEjrF.js";import{I as c}from"./input-0LYyBTNL.js";import{L as i}from"./label-BoYFazvv.js";import{T as he}from"./textarea-BnpLgaoN.js";import{u as ye,a as ge,F as _e,b as xe,c as ve,d as Te,e as De}from"./use-calculate-manual.mutation-DcdBkh3R.js";import{u as Ze}from"./use-get-customers.query-C8ZaI7Ox.js";import{F as Ue}from"./vn-bank.field-Bh0uakeg.js";import{M as B,A as H,a as Je}from"./upload.constant-D3d5R5uO.js";import{u as $}from"./useMutation-olpSmLLZ.js";import{c as ke}from"./convert-data-to-form-data.util-CYcIkezp.js";import{S as Ee,a as Pe,b as je,c as Ve,d as Ce}from"./select-tO56GHtX.js";import{A as er,a as rr,b as sr,c as mr,d as or,e as ir,f as tr,g as ur,h as ar}from"./alert-dialog-DEwhyiLY.js";import{G as Q}from"./grid-images-aR4UB9dY.js";import{u as cr}from"./use-cancel-order.mutation-C4ya6dkA.js";import{u as Se}from"./use-get-customer-by-id.query-oWBRo67l.js";import{u as nr}from"./use-get-customer-ccs.query-D_xgXeEj.js";import{u as ne}from"./index-Dode7Q_i.js";import{f as S}from"./format-currency-DwwnROlR.js";import{f as z}from"./format-percent-Ca7gawAv.js";import{u as lr}from"./use-get-customer-history-by-id.query-08OuvGd7.js";import{u as dr}from"./use-auth.cache-uzeZHvRr.js";import"./useQuery-DYc45dXL.js";import"./index-Bac5iG0s.js";import"./use-get-user-options.query-NQCzHklB.js";import"./use-get-vn-banks.query-C6Zo-kDp.js";import"./popover-jG4-KSDj.js";import"./Combination-C6uUyjw_.js";import"./index-C8pBNbkL.js";import"./index-DvdIoCaF.js";import"./react-icons.esm-s9XaPAzI.js";import"./index-B_R1Z8jJ.js";import"./dialog-Tlj49w8P.js";const le=t.object({id:t.coerce.number(),card_type:t.string({required_error:"Required."}),user_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),rate_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_creditcard:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:t.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:t.coerce.number({required_error:"Required."}),notification_coming_due:t.coerce.number(),percent_to_charge:t.coerce.number({required_error:"Required."}).gt(0,"Required."),money_total:t.coerce.number({required_error:"Required."}).gt(0,"Required."),money_applied_percent:t.coerce.number({required_error:"Required."}).gt(0,"Required."),note:t.string(),images_creditcard_due_withdrawn:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function pr(r){const m=ke(r);return K({method:"patch",url:"/customer_history/order_update_admin",data:m,headers:{"Content-Type":"multipart/form-data"}})}function fr(){const{mutateAsync:r}=$({mutationFn:pr,onSuccess:()=>{Y.invalidateQueries({queryKey:G.CUSTOMER_HISTORY})}});return{mutationUpdateOrderAdmin:r}}function L(r){return`https://pos.crawl.vn${r}`}function de(r){return r==null?void 0:r.replace(`https://pos.crawl.vn${Je}`,"")}function Nr(r){return K({method:"delete",url:"/customer_history/DeleteImage/images_creditcard_due_withdrawn",data:r})}function br(){const{mutateAsync:r}=$({mutationFn:Nr,onSuccess:m=>{(m.status||m.success)&&Y.invalidateQueries({queryKey:G.CUSTOMER_HISTORY})}});return{mutationDeleteOrderCcImage:r}}function hr(r){return K({method:"delete",url:"/customer_history/DeleteImage/images_transfer_money_to_customer",data:r})}function yr(){const{mutateAsync:r}=$({mutationFn:hr,onSuccess:m=>{(m.status||m.success)&&Y.invalidateQueries({queryKey:G.CUSTOMER_HISTORY})}});return{mutationDeleteOrderTransferImage:r}}function gr({defaultValues:r,defaultCustomer:m,defaultCreditCard:u}){var ae,ce;const U=fe(),[f,V]=g.useState(),[n,k]=g.useState({...m,list_credit_card:m.list_customer_creditcard}),[l,O]=g.useState(u),[E,C]=g.useState({id:r.id_pos_info}),[R,W]=g.useState(Number(r.fee)),[w,q]=g.useState(r.percent_to_charge),[d,X]=g.useState(String(r.rate_option)),[N,h]=g.useState("customer"),[Z,J]=g.useState(),[M,ee]=g.useState(),{register:o,handleSubmit:re,getValues:x,formState:{errors:y}}=Ne({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:be(le)}),{mutationCalculateManual:se}=ye(),{mutationCalculateByLevelRate:me}=ge(),{mutationUpdateOrderAdmin:A}=fr(),I=async s=>{const b=le.parse(s);(await A(b)).status&&U(ie.CUSTOMER_HISTORIES)},{customers:p,refetchCustomers:v}=Ze(f),{customer:T}=Se(Z),{customerCcs:P,refetchCustomerCcs:D}=nr(f),Oe=s=>{V(s.target.value)},Re=async s=>{V(""),k(void 0),C(void 0),O(void 0),o("id_customer_info").onChange({target:{name:"id_customer_info",value:s.id}}),o("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:0}}),o("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),o("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),k(s)},Fe=s=>{V(""),k(void 0),C(void 0),o("id_customer_info").onChange({target:{name:"id_customer_info",value:s.id_customer_info}}),o("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:s.id}}),o("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),o("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),O(s),J(s.id_customer_info)};async function oe(s){const b=x("money_total"),j=x("rate_option"),F=x("percent_to_charge");let _={status:!1,fee:0,rate:Number(F),result:0};s&&s==="2"||!s&&j===2?_=await me({money_total:b}):Number(F)>0&&(_=await se({money_total:b,percent_to_charge:String(F)})),_!=null&&_.status&&(W(_==null?void 0:_.fee),q(String(_==null?void 0:_.rate)),o("percent_to_charge").onChange({target:{name:"percent_to_charge",value:String(_==null?void 0:_.rate)}}),o("money_applied_percent").onChange({target:{name:"money_applied_percent",value:String(_.result)}}))}const ue=async s=>{var j;const b=(j=n==null?void 0:n.list_credit_card)==null?void 0:j.find(F=>F.id===Number(s));O(b),o("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:b==null?void 0:b.id_vietnamese_bank}}),C(void 0),o("id_pos_info").onChange({target:{name:"id_pos_info",value:0}})},we=(s,b)=>{C(s),b&&ee(b)},qe=s=>{X(s),oe(s)},Me=s=>{o("money_total").onChange(s),oe()},Ae=s=>{o("percent_to_charge").onChange(s),q(s.target.value)},Ie=()=>oe(),{mutationDeleteOrderCcImage:Be}=br(),{mutationDeleteOrderTransferImage:He}=yr(),Qe=s=>{Be({id:String(r.id),name_image_creditcard_due_withdrawn:s})},ze=s=>{He({id:String(r.id),name_image_transfer_money_to_customer:s})},{mutationCancelOrder:Le}=cr(),Ye=async()=>{(await Le({uuid_id:r.uuid_id})).status&&U(ie.CUSTOMER_HISTORIES)};ne(()=>{N==="customer"?v():D()},[f,N]),ne(()=>{var s;if(T&&N==="credit_card"){T.list_credit_card=T==null?void 0:T.list_customer_creditcard,k(T);const b=(s=n==null?void 0:n.list_credit_card)==null?void 0:s.find(j=>j.id===Number(l==null?void 0:l.id));o("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:b==null?void 0:b.id_vietnamese_bank}})}},[T==null?void 0:T.id,l==null?void 0:l.id,N,ue]);const Ge=N==="customer"?"Name or Phone":"Credit card number";return e.jsxDEV("form",{onSubmit:re(I),className:"grid grid-cols-1 lg:grid-cols-2 gap-4 max-w-2xl mx-auto",autoComplete:"off",children:[e.jsxDEV("div",{className:"grid grid-cols-2 lg:col-span-2",children:[e.jsxDEV("div",{children:e.jsxDEV(i,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"customer",checked:N==="customer",onChange:()=>h("customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:363,columnNumber:13},this)," ","Search by Customer"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:362,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:361,columnNumber:9},this),e.jsxDEV("div",{children:e.jsxDEV(i,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"credit_card",checked:N==="credit_card",onChange:()=>h("credit_card")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:375,columnNumber:13},this)," ","Search by Credit card"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:374,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:373,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:360,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 relative",children:[e.jsxDEV(c,{placeholder:Ge,value:f,onChange:Oe},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:388,columnNumber:9},this),f&&e.jsxDEV(We,{className:"absolute top-full mt-2 left-0 w-full z-50",children:e.jsxDEV(Xe,{className:"max-h-80 p-2 overflow-auto",children:[N==="credit_card"&&(P==null?void 0:P.map(s=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>Fe(s),children:[e.jsxDEV("strong",{children:s.name_on_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:399,columnNumber:21},this)," (",s.creditcard_number,")"]},s.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:394,columnNumber:19},this))),N==="customer"&&(p==null?void 0:p.map(s=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>Re(s),children:[e.jsxDEV("strong",{children:s.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:410,columnNumber:21},this)," (",s.phonenumber,")"]},s.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:405,columnNumber:19},this)))]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:391,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:390,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:387,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:420,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,value:n==null?void 0:n.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:421,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:419,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:425,columnNumber:9},this),e.jsxDEV("div",{children:[n?e.jsxDEV(_e,{...o("id_customer_creditcard"),value:l!=null&&l.id?String(l==null?void 0:l.id):"",listCustomerCreditcards:n==null?void 0:n.list_credit_card,onSelectCard:ue},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:428,columnNumber:13},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:435,columnNumber:13},this),M&&e.jsxDEV("p",{className:"italic mt-1 text-xs",children:["Last percent charge:"," ",e.jsxDEV("strong",{children:z(M/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:440,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:438,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:426,columnNumber:9},this),e.jsxDEV(a,{error:y.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:445,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:424,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:449,columnNumber:9},this),l?e.jsxDEV(xe,{...o("id_pos_info"),idCustomerCreditcard:l.id,onSelectPos:we,defaultValue:E==null?void 0:E.id},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:451,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:458,columnNumber:11},this),e.jsxDEV(a,{error:y.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:460,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:448,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:464,columnNumber:9},this),l?e.jsxDEV(Ue,{name:o("id_vietnamese_bank").name,onChange:o("id_vietnamese_bank").onChange,onBlur:o("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:l!=null&&l.id_vietnamese_bank?String(l.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:466,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:478,columnNumber:11},this),e.jsxDEV(a,{error:y.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:480,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:463,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:484,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...o("money_total"),onChange:Me},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:486,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(x("money_total")))?" ":S(Number(x("money_total")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:487,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:485,columnNumber:9},this),e.jsxDEV(a,{error:y.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:493,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:483,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:497,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,defaultValue:E==null?void 0:E.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:498,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:496,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:502,columnNumber:9},this),n?e.jsxDEV(ve,{...o("user_option"),defaultValue:String(r.user_option)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:504,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:509,columnNumber:11},this),e.jsxDEV(a,{error:y.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:511,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:501,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:515,columnNumber:9},this),n?e.jsxDEV(Te,{...o("rate_option"),defaultValue:String(r.rate_option),onSelectRate:qe},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:517,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:523,columnNumber:11},this),e.jsxDEV(a,{error:y.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:525,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:514,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:529,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...o("percent_to_charge"),value:w,onChange:Ae,onBlur:Ie,readOnly:d==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:531,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(x("percent_to_charge")))?" ":z(Number(x("percent_to_charge"))/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:538,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:530,columnNumber:9},this),e.jsxDEV(a,{error:y.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:544,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:528,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:548,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{readOnly:!0,value:R},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:550,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(R))?" ":S(Number(R))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:551,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:549,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:547,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:558,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...o("money_applied_percent"),value:x("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:562,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(x("money_applied_percent")))?" ":S(Number(x("money_applied_percent")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:567,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:561,columnNumber:9},this),e.jsxDEV(a,{error:y.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:573,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:557,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:577,columnNumber:9},this),e.jsxDEV(c,{...o("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:578,columnNumber:9},this),e.jsxDEV(a,{error:y.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:579,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:576,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"notification_coming_due",children:"Notification Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:583,columnNumber:9},this),e.jsxDEV(Ee,{...o("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:s=>o("notification_coming_due").onChange({target:{name:"notification_coming_due",value:s}}),children:[e.jsxDEV(Pe,{className:"h-8 w-20",children:e.jsxDEV(je,{placeholder:"Set notification"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:594,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:593,columnNumber:11},this),e.jsxDEV(Ve,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:s,value:b})=>e.jsxDEV(Ce,{value:b,children:s},b,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:601,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:596,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:584,columnNumber:9},this),e.jsxDEV(a,{error:y.notification_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:607,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:582,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:611,columnNumber:9},this),e.jsxDEV(De,{...o("card_type"),defaultValue:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:612,columnNumber:9},this),e.jsxDEV(a,{error:y.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:616,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:610,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2 lg:col-span-2",children:[e.jsxDEV(i,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:620,columnNumber:9},this),e.jsxDEV(he,{...o("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:621,columnNumber:9},this),e.jsxDEV(a,{error:y.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:622,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:619,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(i,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:627,columnNumber:11},this),e.jsxDEV(Q,{images:(ae=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:ae.map(L),onDelete:Qe,getName:de},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:630,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...o("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:637,columnNumber:11},this),e.jsxDEV(a,{error:y.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:643,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:626,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(i,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:649,columnNumber:11},this),e.jsxDEV(Q,{images:(ce=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:ce.map(L),onDelete:ze,getName:de},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:652,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...o("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:659,columnNumber:11},this),e.jsxDEV(a,{error:y.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:665,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:648,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:625,columnNumber:7},this),e.jsxDEV("div",{className:"mt-4 grid grid-cols-2 gap-4 lg:col-span-2",children:[r.status!==3&&e.jsxDEV(er,{children:[e.jsxDEV(rr,{asChild:!0,children:e.jsxDEV(te,{type:"button",variant:"destructive",children:"Cancel Order"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:675,columnNumber:15},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:674,columnNumber:13},this),e.jsxDEV(sr,{children:[e.jsxDEV(mr,{children:[e.jsxDEV(or,{children:"Are you absolutely sure?"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:681,columnNumber:17},this),e.jsxDEV(ir,{children:"This action cannot be undone. This will permanently cancel this order and can not revert."},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:682,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:680,columnNumber:15},this),e.jsxDEV(tr,{children:[e.jsxDEV(ur,{children:"Cancel"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:688,columnNumber:17},this),e.jsxDEV(ar,{onClick:Ye,children:"Confirm"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:689,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:687,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:679,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:673,columnNumber:11},this),e.jsxDEV(te,{type:"submit",className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:696,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:671,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:355,columnNumber:5},this)}const pe=t.object({id:t.coerce.number(),card_type:t.string({required_error:"Required."}),user_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:t.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:t.coerce.number({required_error:"Required."}),notification_coming_due:t.coerce.number(),note:t.string(),images_creditcard_due_withdrawn:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function _r(r){const m=ke(r);return K({method:"patch",url:"/customer_history/order_update_user",data:m,headers:{"Content-Type":"multipart/form-data"}})}function xr(){const{mutateAsync:r}=$({mutationFn:_r,onSuccess:()=>{Y.invalidateQueries({queryKey:G.CUSTOMER_HISTORY})}});return{mutationUpdateOrderUser:r}}function vr({defaultValues:r,defaultCustomer:m,defaultCreditCard:u}){var A,I;const U=fe(),[f,V]=g.useState(u),[n,k]=g.useState({id:r.id_pos_info}),[l,O]=g.useState(Number(r.fee)),[E,C]=g.useState(r.percent_to_charge),[R,W]=g.useState(String(r.rate_option)),[w,q]=g.useState(),{register:d,handleSubmit:X,getValues:N,formState:{errors:h}}=Ne({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:be(pe)}),{mutationCalculateManual:Z}=ye(),{mutationCalculateByLevelRate:J}=ge(),{mutationUpdateOrderUser:M}=xr(),ee=async p=>{const v=pe.parse(p);(await M(v)).status&&U(ie.CUSTOMER_HISTORIES)};async function o(p){const v=N("money_total"),T=N("rate_option"),P=N("percent_to_charge");let D={status:!1,fee:0,rate:Number(P),result:0};p&&p==="2"||!p&&T===2?D=await J({money_total:v}):Number(P)>0&&(D=await Z({money_total:v,percent_to_charge:String(P)})),D.status&&(O(D==null?void 0:D.fee),d("percent_to_charge").onChange({target:{name:"percent_to_charge",value:D==null?void 0:D.rate}}),d("money_applied_percent").onChange({target:{name:"money_applied_percent",value:D.result}}))}const re=(p,v)=>{k(p),v&&q(v)},x=p=>{W(p),o(p)},y=p=>{d("money_total").onChange(p),o()},se=p=>{d("percent_to_charge").onChange(p),C(p.target.value)},me=()=>o();return e.jsxDEV("form",{onSubmit:X(ee),className:"grid grid-cols-1 lg:grid-cols-2 gap-4 max-w-2xl mx-auto",autoComplete:"off",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:165,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,defaultValue:m==null?void 0:m.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:166,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:164,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:170,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(_e,{...d("id_customer_creditcard"),defaultValue:f!=null&&f.id?String(f.id):"",listCustomerCreditcards:m==null?void 0:m.list_customer_creditcard,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:172,columnNumber:11},this),w&&e.jsxDEV("p",{className:"italic mt-1 text-xs",children:["Last percent charge:"," ",e.jsxDEV("strong",{children:z(w/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:179,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:171,columnNumber:9},this),e.jsxDEV(a,{error:h.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:186,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:169,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:190,columnNumber:9},this),f?e.jsxDEV(xe,{...d("id_pos_info"),idCustomerCreditcard:f.id,onSelectPos:re,defaultValue:n==null?void 0:n.id,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:192,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:200,columnNumber:11},this),e.jsxDEV(a,{error:h.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:202,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:189,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:206,columnNumber:9},this),f?e.jsxDEV(Ue,{name:d("id_vietnamese_bank").name,onChange:d("id_vietnamese_bank").onChange,onBlur:d("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:f!=null&&f.id_vietnamese_bank?String(f.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:208,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:220,columnNumber:11},this),e.jsxDEV(a,{error:h.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:222,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:205,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:226,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...d("money_total"),onChange:y,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:228,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(N("money_total")))?" ":S(Number(N("money_total")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:233,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:227,columnNumber:9},this),e.jsxDEV(a,{error:h.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:239,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:225,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:243,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,defaultValue:n==null?void 0:n.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:244,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:242,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:248,columnNumber:9},this),e.jsxDEV(ve,{...d("user_option"),defaultValue:String(r.user_option)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:249,columnNumber:9},this),e.jsxDEV(a,{error:h.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:253,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:247,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:257,columnNumber:9},this),e.jsxDEV(Te,{...d("rate_option"),defaultValue:String(r.rate_option),onSelectRate:x,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:258,columnNumber:9},this),e.jsxDEV(a,{error:h.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:264,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:256,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:268,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...d("percent_to_charge"),value:E,onChange:se,onBlur:me,readOnly:R==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:270,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(N("percent_to_charge")))?" ":z(Number(N("percent_to_charge"))/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:277,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:269,columnNumber:9},this),e.jsxDEV(a,{error:h.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:283,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:267,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:287,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{readOnly:!0,value:l},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:289,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(l))?" ":S(Number(l))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:290,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:288,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:286,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:297,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...d("money_applied_percent"),value:N("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:301,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(N("money_applied_percent")))?" ":S(Number(N("money_applied_percent")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:306,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:300,columnNumber:9},this),e.jsxDEV(a,{error:h.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:312,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:296,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:316,columnNumber:9},this),e.jsxDEV(c,{...d("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:317,columnNumber:9},this),e.jsxDEV(a,{error:h.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:318,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:315,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"notification_coming_due",children:"Notification Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:322,columnNumber:9},this),e.jsxDEV(Ee,{...d("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:p=>d("notification_coming_due").onChange({target:{name:"notification_coming_due",value:p}}),children:[e.jsxDEV(Pe,{className:"h-8 w-20",children:e.jsxDEV(je,{placeholder:"Set notification"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:333,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:332,columnNumber:11},this),e.jsxDEV(Ve,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:p,value:v})=>e.jsxDEV(Ce,{value:v,children:p},v,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:340,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:335,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:323,columnNumber:9},this),e.jsxDEV(a,{error:h.notification_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:346,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:321,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(i,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:350,columnNumber:9},this),e.jsxDEV(De,{...d("card_type"),defaultValue:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:351,columnNumber:9},this),e.jsxDEV(a,{error:h.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:355,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:349,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2 lg:col-span-2",children:[e.jsxDEV(i,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:359,columnNumber:9},this),e.jsxDEV(he,{...d("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:360,columnNumber:9},this),e.jsxDEV(a,{error:h.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:361,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:358,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(i,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:366,columnNumber:11},this),e.jsxDEV(Q,{images:(A=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:A.map(L)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:369,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...d("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:374,columnNumber:11},this),e.jsxDEV(a,{error:h.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:380,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:365,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(i,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:386,columnNumber:11},this),e.jsxDEV(Q,{images:(I=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:I.map(L)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:389,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...d("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:394,columnNumber:11},this),e.jsxDEV(a,{error:h.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:400,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:385,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:364,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 mt-4",children:e.jsxDEV(te,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:407,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:406,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:159,columnNumber:5},this)}function Tr(){var n;const r=Ke(),{isAdmin:m}=dr(),{customerHistory:u}=lr(Number(r.id)),{customer:U}=Se((u==null?void 0:u.id_customer_info)||0),f=(n=U==null?void 0:U.list_customer_creditcard)==null?void 0:n.find(k=>k.id===(u==null?void 0:u.id_customer_creditcard)),V=m()?gr:vr;return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight max-w-2xl mx-auto",children:["Update Order: ",r.id]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:25,columnNumber:7},this),u&&f&&U&&e.jsxDEV(V,{defaultValues:u,defaultCreditCard:f,defaultCustomer:U},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:29,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:24,columnNumber:5},this)}function ts(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV($e,{children:e.jsxDEV("title",{children:"POS System - Order Update"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(Tr,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:6,columnNumber:5},this)}export{ts as default};

import{a as Y,Q as O,c as oe,r as _,j as e,R as X,k as Ve,u as Ce}from"./index-BfH-S7tZ.js";import{H as Se}from"./Helmet-DIdbsKPJ.js";import{z as i,u as me,t as te,F as a}from"./index-C-n3YrAC.js";import{a as R,B as Z}from"./api-client-qBA4DTQv.js";import{C as Oe,c as Re}from"./card-CqimdLdK.js";import{I as c}from"./input-CO2DN-xV.js";import{L as m}from"./label-BdL-3MWI.js";import{T as ue}from"./textarea-CNmeRLKC.js";import{u as ae,a as ce,f as qe,F as ne,b as de,c as le,d as pe,e as fe}from"./use-cancel-order.mutation-BV3P7IzY.js";import{u as we}from"./use-get-customers.query-BwskDEoK.js";import{F as be}from"./vn-bank.field-C-KscIE-.js";import{M as A,A as B,a as Fe}from"./upload.constant-D3d5R5uO.js";import{u as z}from"./useMutation-CMVljaSD.js";import{c as Ne}from"./convert-data-to-form-data.util-CYcIkezp.js";import{S as he,a as ye,b as ge,c as _e,d as xe}from"./select-CPwPHD76.js";import{G as H}from"./grid-images-C7F2aGXG.js";import{u as Me}from"./useQuery-D0chCk74.js";import{u as Ie}from"./use-get-customer-by-id.query-Bjk_76yH.js";import{u as Ae}from"./use-auth.cache-ClKKv6eS.js";import"./index-CTTdkZ8N.js";import"./index-BNAVSFPS.js";import"./use-get-user-options.query-BjdlKsCD.js";import"./use-get-vn-banks.query-VZso9b-u.js";import"./popover-CiycvxXm.js";import"./index-Vl8o0M7C.js";import"./react-icons.esm-XcE--LT7.js";import"./dialog-Dzi-kAH7.js";import"./index-VWaDGczM.js";const re=i.object({id:i.coerce.number(),card_type:i.string({required_error:"Required."}),user_option:i.coerce.number({required_error:"Required."}).gt(0,"Required."),rate_option:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_info:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_creditcard:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:i.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:i.coerce.number({required_error:"Required."}),notification_coming_due:i.coerce.number(),percent_to_charge:i.coerce.number({required_error:"Required."}).gt(0,"Required."),money_total:i.coerce.number({required_error:"Required."}).gt(0,"Required."),money_applied_percent:i.coerce.number({required_error:"Required."}).gt(0,"Required."),note:i.string(),images_creditcard_due_withdrawn:i.any().refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(t=>t.size>A))},"Max file size is 5MB.").refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(t=>!B.includes(t.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:i.any().refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(t=>t.size>A))},"Max file size is 5MB.").refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(t=>!B.includes(t.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function Be(r){const s=Ne(r);return R({method:"patch",url:"/customer_history/order_update_admin",data:s,headers:{"Content-Type":"multipart/form-data"}})}function He(){const{mutateAsync:r}=z({mutationFn:Be,onSuccess:()=>{Y.invalidateQueries({queryKey:O.CUSTOMER_HISTORY})}});return{mutationUpdateOrderAdmin:r}}function Q(r){return`https://pos.crawl.vn${r}`}function se(r){return r==null?void 0:r.replace(`https://pos.crawl.vn${Fe}`,"")}function Qe(r){return R({method:"delete",url:"/customer_history/DeleteImage/images_creditcard_due_withdrawn",data:r})}function Ye(){const{mutateAsync:r}=z({mutationFn:Qe,onSuccess:s=>{(s.status||s.success)&&Y.invalidateQueries({queryKey:O.CUSTOMER_HISTORY})}});return{mutationDeleteOrderCcImage:r}}function ze(r){return R({method:"delete",url:"/customer_history/DeleteImage/images_transfer_money_to_customer",data:r})}function Ge(){const{mutateAsync:r}=z({mutationFn:ze,onSuccess:s=>{(s.status||s.success)&&Y.invalidateQueries({queryKey:O.CUSTOMER_HISTORY})}});return{mutationDeleteOrderTransferImage:r}}function Ke({defaultValues:r,defaultCustomer:s,defaultCreditCard:t}){var J,ee;const x=oe(),[p,D]=_.useState(),[n,U]=_.useState({...s,list_credit_card:s.list_customer_creditcard}),[N,j]=_.useState(t),[T,P]=_.useState({id:r.id_pos_info}),[d,G]=_.useState(Number(r.fee)),[E,f]=_.useState(String(r.rate_option)),{register:u,handleSubmit:K,getValues:k,formState:{errors:b}}=me({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:te(re)}),{mutationCalculateManual:V}=ae(),{mutationCalculateByLevelRate:L}=ce(),{mutationUpdateOrderAdmin:$}=He(),W=async o=>{const y=re.parse(o);(await $(y)).status&&x(X.CUSTOMER_HISTORIES)},{customers:C,refetchCustomers:q}=we(p);_.useEffect(()=>{q()},[p]);const w=o=>{D(o.target.value)},l=async o=>{D(""),U(void 0),P(void 0),j(void 0),await u("id_customer_info").onChange({target:{name:"id_customer_info",value:o.id}}),await u("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:0}}),await u("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),await u("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),U(o)};async function g(o){const y=k("money_total"),S=k("rate_option"),I=k("percent_to_charge");if(Number(I)<=0)return;let v=null;o&&o==="2"||!o&&S===2?v=await L({money_total:y}):v=await V({money_total:y,percent_to_charge:String(I)}),v.status&&(G(v==null?void 0:v.fee),u("percent_to_charge").onChange({target:{name:"percent_to_charge",value:v==null?void 0:v.rate}}),u("money_applied_percent").onChange({target:{name:"money_applied_percent",value:v.result}}))}const F=async o=>{var S;P(void 0),j(void 0);const y=(S=n==null?void 0:n.list_credit_card)==null?void 0:S.find(I=>I.id===Number(o));await u("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:y==null?void 0:y.id_vietnamese_bank}}),j(y),u("id_pos_info").onChange({target:{name:"id_pos_info",value:0}})},M=o=>{P(o)},h=o=>{f(o),g(o)},ve=async o=>{await u("money_total").onChange(o),g()},Te=async o=>{await u("percent_to_charge").onChange(o),g()},{mutationDeleteOrderCcImage:Ue}=Ye(),{mutationDeleteOrderTransferImage:Ee}=Ge(),ke=o=>{Ue({id:String(r.id),name_image_creditcard_due_withdrawn:o})},De=o=>{Ee({id:String(r.id),name_image_transfer_money_to_customer:o})},{mutationCancelOrder:je}=qe(),Pe=async()=>{(await je({uuid_id:r.uuid_id})).status&&x(X.CUSTOMER_HISTORIES)};return e.jsxDEV("form",{onSubmit:K(W),className:"grid grid-cols-2 gap-4",autoComplete:"off",children:[e.jsxDEV("div",{className:"col-span-2 relative",children:[e.jsxDEV(m,{htmlFor:"search_customer",children:"Search Customer"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:263,columnNumber:9},this),e.jsxDEV(c,{placeholder:"Name or Phone",value:p,onChange:w},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:264,columnNumber:9},this),p&&e.jsxDEV(Oe,{className:"absolute top-full mt-2 left-0 w-full",children:e.jsxDEV(Re,{className:"max-h-80 p-2",children:C==null?void 0:C.map(o=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>l(o),children:[e.jsxDEV("strong",{children:o.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:278,columnNumber:19},this)," (",o.phonenumber,")"]},o.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:273,columnNumber:17},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:271,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:270,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:262,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h2",{className:"text-lg font-bold",children:"Customer Info"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:287,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:290,columnNumber:11},this),e.jsxDEV(c,{readOnly:!0,defaultValue:n==null?void 0:n.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:291,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:289,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:295,columnNumber:11},this),N?e.jsxDEV(ne,{...u("id_pos_info"),idCustomerCreditcard:N.id,onSelectPos:M,defaultValue:T!=null&&T.id?String(T.id):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:297,columnNumber:13},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:306,columnNumber:13},this),e.jsxDEV(a,{error:b.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:308,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:294,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:312,columnNumber:11},this),e.jsxDEV(c,{...u("money_total"),onChange:ve},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:313,columnNumber:11},this),e.jsxDEV(a,{error:b.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:314,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:311,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:318,columnNumber:11},this),n?e.jsxDEV(de,{...u("user_option"),defaultValue:String(r.user_option)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:320,columnNumber:13},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:325,columnNumber:13},this),e.jsxDEV(a,{error:b.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:327,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:317,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:331,columnNumber:11},this),n?e.jsxDEV(le,{...u("rate_option"),defaultValue:String(r.rate_option),onSelectRate:h},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:333,columnNumber:13},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:339,columnNumber:13},this),e.jsxDEV(a,{error:b.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:341,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:330,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:345,columnNumber:11},this),e.jsxDEV(c,{...u("percent_to_charge"),onChange:Te,readOnly:E==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:346,columnNumber:11},this),e.jsxDEV(a,{error:b.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:351,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:344,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:355,columnNumber:11},this),e.jsxDEV(c,{readOnly:!0,value:d},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:356,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:354,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:360,columnNumber:11},this),e.jsxDEV(c,{...u("money_applied_percent"),value:k("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:363,columnNumber:11},this),e.jsxDEV(a,{error:b.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:368,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:359,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:372,columnNumber:11},this),e.jsxDEV(c,{...u("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:373,columnNumber:11},this),e.jsxDEV(a,{error:b.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:374,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:371,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"notification_coming_due",children:"Notification Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:378,columnNumber:11},this),e.jsxDEV(he,{...u("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:o=>u("notification_coming_due").onChange({target:{name:"notification_coming_due",value:o}}),children:[e.jsxDEV(ye,{className:"h-8 w-20",children:e.jsxDEV(ge,{placeholder:"Set notification"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:391,columnNumber:15},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:390,columnNumber:13},this),e.jsxDEV(_e,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:o,value:y})=>e.jsxDEV(xe,{value:y,children:o},y,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:398,columnNumber:17},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:393,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:381,columnNumber:11},this),e.jsxDEV(a,{error:b.notification_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:404,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:377,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:286,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h2",{className:"text-lg font-bold",children:"Card Info"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:409,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:412,columnNumber:11},this),n?e.jsxDEV(pe,{...u("id_customer_creditcard"),listCustomerCreditcards:n==null?void 0:n.list_credit_card,onSelectCard:F,defaultValue:N!=null&&N.id?String(N.id):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:414,columnNumber:13},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:421,columnNumber:13},this),e.jsxDEV(a,{error:b.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:423,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:411,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:427,columnNumber:11},this),N?e.jsxDEV(be,{name:u("id_vietnamese_bank").name,onChange:u("id_vietnamese_bank").onChange,onBlur:u("id_vietnamese_bank").onBlur,readOnly:!0,value:N!=null&&N.id_vietnamese_bank?String(N.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:429,columnNumber:13},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:441,columnNumber:13},this),e.jsxDEV(a,{error:b.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:443,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:426,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:447,columnNumber:11},this),e.jsxDEV(c,{readOnly:!0,defaultValue:T==null?void 0:T.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:448,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:446,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:452,columnNumber:11},this),e.jsxDEV(fe,{...u("card_type"),defaultValue:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:453,columnNumber:11},this),e.jsxDEV(a,{error:b.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:457,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:451,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:461,columnNumber:11},this),e.jsxDEV(ue,{...u("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:462,columnNumber:11},this),e.jsxDEV(a,{error:b.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:463,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:460,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:408,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(m,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:468,columnNumber:9},this),e.jsxDEV(H,{images:(J=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:J.map(Q),onDelete:ke,getName:se},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:471,columnNumber:9},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...u("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:478,columnNumber:9},this),e.jsxDEV(a,{error:b.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:484,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:467,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(m,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:490,columnNumber:9},this),e.jsxDEV(H,{images:(ee=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:ee.map(Q),onDelete:De,getName:se},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:493,columnNumber:9},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...u("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:500,columnNumber:9},this),e.jsxDEV(a,{error:b.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:506,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:489,columnNumber:7},this),e.jsxDEV(Z,{type:"submit",className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:511,columnNumber:7},this),r.status!==3&&e.jsxDEV(Z,{type:"button",className:"w-full",variant:"destructive",onClick:Pe,children:"Cancel Order"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:515,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:257,columnNumber:5},this)}function Le(r){return R({url:"/customer_history/SearchHistory_By_ID",params:r})}function $e(r){var t;const{data:s}=Me({queryKey:[...O.CUSTOMER_HISTORY,r],queryFn:()=>Le({id:r}),placeholderData:Ve,gcTime:1e4});return{customerHistory:(t=s==null?void 0:s.result)==null?void 0:t[0]}}const ie=i.object({id:i.coerce.number(),card_type:i.string({required_error:"Required."}),user_option:i.coerce.number({required_error:"Required."}).gt(0,"Required."),rate_option:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_info:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_creditcard:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:i.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:i.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:i.coerce.number({required_error:"Required."}),notification_coming_due:i.coerce.number(),percent_to_charge:i.coerce.number({required_error:"Required."}).gt(0,"Required."),money_total:i.coerce.number({required_error:"Required."}).gt(0,"Required."),money_applied_percent:i.coerce.number({required_error:"Required."}).gt(0,"Required."),note:i.string(),images_creditcard_due_withdrawn:i.any().refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(t=>t.size>A))},"Max file size is 5MB.").refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(t=>!B.includes(t.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:i.any().refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(t=>t.size>A))},"Max file size is 5MB.").refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(t=>!B.includes(t.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function We(r){const s=Ne(r);return R({method:"patch",url:"/customer_history/order_update_user",data:s,headers:{"Content-Type":"multipart/form-data"}})}function Xe(){const{mutateAsync:r}=z({mutationFn:We,onSuccess:()=>{Y.invalidateQueries({queryKey:O.CUSTOMER_HISTORY})}});return{mutationUpdateOrderUser:r}}function Ze({defaultValues:r,defaultCustomer:s,defaultCreditCard:t}){var q,w;const x=oe(),[p,D]=_.useState(t),[n,U]=_.useState({id:r.id_pos_info}),[N,j]=_.useState(Number(r.fee)),[T,P]=_.useState(String(r.rate_option)),{register:d,handleSubmit:G,getValues:E,formState:{errors:f}}=me({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:te(ie)}),{mutationCalculateManual:u}=ae(),{mutationCalculateByLevelRate:K}=ce(),{mutationUpdateOrderUser:k}=Xe(),b=async l=>{const g=ie.parse(l);(await k(g)).status&&x(X.CUSTOMER_HISTORIES)};async function V(l){const g=E("money_total"),F=E("rate_option"),M=E("percent_to_charge");if(Number(M)<=0)return;let h=null;l&&l==="2"||!l&&F===2?h=await K({money_total:g}):h=await u({money_total:g,percent_to_charge:String(M)}),h.status&&(j(h==null?void 0:h.fee),d("percent_to_charge").onChange({target:{name:"percent_to_charge",value:h==null?void 0:h.rate}}),d("money_applied_percent").onChange({target:{name:"money_applied_percent",value:h.result}}))}const L=l=>{U(l)},$=l=>{P(l),V(l)},W=async l=>{await d("money_total").onChange(l),V()},C=async l=>{await d("percent_to_charge").onChange(l),V()};return e.jsxDEV("form",{onSubmit:G(b),className:"grid grid-cols-2 gap-4",autoComplete:"off",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h2",{className:"text-lg font-bold",children:"Customer Info"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:175,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:178,columnNumber:11},this),e.jsxDEV(c,{readOnly:!0,defaultValue:s==null?void 0:s.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:179,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:177,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:183,columnNumber:11},this),p?e.jsxDEV(ne,{...d("id_pos_info"),idCustomerCreditcard:p.id,onSelectPos:L,defaultValue:n!=null&&n.id?String(n.id):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:185,columnNumber:13},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:194,columnNumber:13},this),e.jsxDEV(a,{error:f.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:196,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:182,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:200,columnNumber:11},this),e.jsxDEV(c,{...d("money_total"),onChange:W},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:201,columnNumber:11},this),e.jsxDEV(a,{error:f.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:202,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:199,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:206,columnNumber:11},this),e.jsxDEV(de,{...d("user_option"),defaultValue:String(r.user_option)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:207,columnNumber:11},this),e.jsxDEV(a,{error:f.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:211,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:205,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:215,columnNumber:11},this),e.jsxDEV(le,{...d("rate_option"),defaultValue:String(r.rate_option),onSelectRate:$},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:216,columnNumber:11},this),e.jsxDEV(a,{error:f.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:221,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:214,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:225,columnNumber:11},this),e.jsxDEV(c,{...d("percent_to_charge"),onChange:C,readOnly:T==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:226,columnNumber:11},this),e.jsxDEV(a,{error:f.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:231,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:224,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:235,columnNumber:11},this),e.jsxDEV(c,{readOnly:!0,value:N},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:236,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:234,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:240,columnNumber:11},this),e.jsxDEV(c,{...d("money_applied_percent"),value:E("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:243,columnNumber:11},this),e.jsxDEV(a,{error:f.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:248,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:239,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:252,columnNumber:11},this),e.jsxDEV(c,{...d("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:253,columnNumber:11},this),e.jsxDEV(a,{error:f.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:254,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:251,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"notification_coming_due",children:"Notification Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:258,columnNumber:11},this),e.jsxDEV(he,{...d("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:l=>d("notification_coming_due").onChange({target:{name:"notification_coming_due",value:l}}),children:[e.jsxDEV(ye,{className:"h-8 w-20",children:e.jsxDEV(ge,{placeholder:"Set notification"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:271,columnNumber:15},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:270,columnNumber:13},this),e.jsxDEV(_e,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:l,value:g})=>e.jsxDEV(xe,{value:g,children:l},g,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:278,columnNumber:17},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:273,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:261,columnNumber:11},this),e.jsxDEV(a,{error:f.notification_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:284,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:257,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:174,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h2",{className:"text-lg font-bold",children:"Card Info"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:289,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:292,columnNumber:11},this),e.jsxDEV(pe,{...d("id_customer_creditcard"),listCustomerCreditcards:s==null?void 0:s.list_customer_creditcard,readOnly:!0,defaultValue:p!=null&&p.id?String(p.id):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:293,columnNumber:11},this),e.jsxDEV(a,{error:f.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:299,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:291,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:303,columnNumber:11},this),p?e.jsxDEV(be,{name:d("id_vietnamese_bank").name,onChange:d("id_vietnamese_bank").onChange,onBlur:d("id_vietnamese_bank").onBlur,readOnly:!0,value:p!=null&&p.id_vietnamese_bank?String(p.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:305,columnNumber:13},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:317,columnNumber:13},this),e.jsxDEV(a,{error:f.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:319,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:302,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:323,columnNumber:11},this),e.jsxDEV(c,{readOnly:!0,defaultValue:n==null?void 0:n.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:324,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:322,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:328,columnNumber:11},this),e.jsxDEV(fe,{...d("card_type"),defaultValue:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:329,columnNumber:11},this),e.jsxDEV(a,{error:f.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:333,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:327,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:337,columnNumber:11},this),e.jsxDEV(ue,{...d("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:338,columnNumber:11},this),e.jsxDEV(a,{error:f.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:339,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:336,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:288,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(m,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:344,columnNumber:9},this),e.jsxDEV(H,{images:(q=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:q.map(Q)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:347,columnNumber:9},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...d("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:352,columnNumber:9},this),e.jsxDEV(a,{error:f.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:358,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:343,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(m,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:364,columnNumber:9},this),e.jsxDEV(H,{images:(w=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:w.map(Q)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:367,columnNumber:9},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...d("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:372,columnNumber:9},this),e.jsxDEV(a,{error:f.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:378,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:363,columnNumber:7},this),e.jsxDEV("div",{className:"col-span-2 mt-4",children:e.jsxDEV(Z,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:384,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:383,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:169,columnNumber:5},this)}function Je(){var n;const r=Ce(),{isAdmin:s}=Ae(),{customerHistory:t}=$e(Number(r.id)),{customer:x}=Ie((t==null?void 0:t.id_customer_info)||0),p=(n=x==null?void 0:x.list_customer_creditcard)==null?void 0:n.find(U=>U.id===(t==null?void 0:t.id_customer_creditcard)),D=s()?Ke:Ze;return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between space-y-2",children:e.jsxDEV("h2",{className:"text-3xl font-bold tracking-tight",children:["Update Order: ",r.id]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:26,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:25,columnNumber:7},this),t&&p&&x&&e.jsxDEV(D,{defaultValues:t,defaultCreditCard:p,defaultCustomer:x},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:31,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:24,columnNumber:5},this)}function jr(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Se,{children:e.jsxDEV("title",{children:"POS System - Order Update"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(Je,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:6,columnNumber:5},this)}export{jr as default};

import{a as Pe,Q as De,r as t,j as e,L as Ue,R as je}from"./index-CJ4aojTS.js";import{a as $e,H as Ce}from"./Helmet-CQJxFuV9.js";import{z as h,u as Se,t as Re,F as x}from"./index-D8SDuPEw.js";import{d as j,B as Y,_ as D,a as $}from"./button-C7e1d5xZ.js";import{C as Fe,c as qe}from"./card-DKsQ3IgN.js";import{I as g}from"./input-8Nyj8SBJ.js";import{L as u}from"./label-DHIBfv39.js";import{T as Me}from"./textarea-B4abjeQF.js";import{u as Oe,a as we,F as Ie,b as Be,c as Ae,d as Le,e as Ge}from"./use-calculate-manual.mutation-DHSRQiSo.js";import{u as Qe}from"./use-auth.cache--d25v-3P.js";import{u as He}from"./useMutation-5gSZwTnf.js";import{u as Ke}from"./use-get-customers.query-BGm66KQH.js";import{F as Ye}from"./vn-bank.field-BdRWlDhX.js";import{u as ze,F as Je}from"./create-customer-cc.feature-Cz0E9N7z.js";import{u as We}from"./use-get-customer-by-id.query-CQHJuMHN.js";import{u as H}from"./index-CBzUkH_N.js";import{f as P}from"./format-currency-DwwnROlR.js";import{f as K}from"./format-percent-Ca7gawAv.js";import{S as Xe,a as Ze,b as er,c as rr,d as sr}from"./select-CRLuTXUs.js";import{$ as or,d as q,e as ir,a as tr,b as mr}from"./Combination-BfeDkqor.js";import{$ as z,a as lr,b as cr}from"./index-B3aP1jZr.js";import{a as ar}from"./index-BpO2Y5GS.js";import{B as nr}from"./bill-info-Cfjm6kNa.js";import"./useQuery-DY6s3jgh.js";import"./index-CmOA9PUo.js";import"./use-get-user-options.query-DRCFdhhx.js";import"./use-get-vn-banks.query-BlDHlsht.js";import"./popover-CaKhNzu_.js";import"./react-icons.esm-DY0tv6xu.js";import"./index-dwtWVcVM.js";import"./dialog-CRrJ1IH6.js";import"./dialog-button.component-Ztd2_n_g.js";import"./customer-cc.form-D3wxxF0J.js";function ur(s){return $e({method:"post",url:"/customer_history/order_step1",data:s})}function dr(){const{mutateAsync:s}=He({mutationFn:ur,onSuccess:m=>{m.status&&Pe.invalidateQueries({queryKey:De.CUSTOMER_HISTORY})}});return{mutationCreateOrderStep1:s}}const fr=h.object({card_type:h.string({required_error:"Required."}),user_option:h.coerce.number({required_error:"Required."}).gt(0,"Required."),rate_option:h.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_info:h.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:h.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_creditcard:h.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:h.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:h.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:h.coerce.number({required_error:"Required."}),percent_to_charge:h.coerce.number({required_error:"Required."}).gt(0,"Required."),money_total:h.coerce.number({required_error:"Required."}).gt(0,"Required."),money_applied_percent:h.coerce.number({required_error:"Required."}).gt(0,"Required."),note:h.string(),bill_split:h.coerce.number({required_error:"Required."}).min(1,"Required.")}),M=[{id:1,name:"No split"},{id:2,name:"Split"}],br=t.forwardRef(function({onChange:s,name:m,readOnly:i,...l},c){return e.jsxDEV(Xe,{...l,onValueChange:f=>{s({target:{name:m,value:f}})},children:[e.jsxDEV(Ze,{className:j("h-8",i&&"bg-muted pointer-events-none"),children:e.jsxDEV(er,{placeholder:"Select an option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/bill-split.field.tsx",lineNumber:45,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/bill-split.field.tsx",lineNumber:42,columnNumber:7},this),e.jsxDEV(rr,{children:M==null?void 0:M.map(({id:f,name:b})=>e.jsxDEV(sr,{value:String(f),children:b},f,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/bill-split.field.tsx",lineNumber:49,columnNumber:11},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/bill-split.field.tsx",lineNumber:47,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/bill-split.field.tsx",lineNumber:34,columnNumber:5},this)});function pr({nextStep:s}){const{auth:m}=Qe(),[i,l]=t.useState("customer"),[c,f]=t.useState(),[b,_]=t.useState(),[d,v]=t.useState(),[o,p]=t.useState(),[T,C]=t.useState(),[S,me]=t.useState(),[w,le]=t.useState(),[ce,I]=t.useState(""),[ae,ne]=t.useState("1"),{register:a,handleSubmit:ue,getValues:k,reset:B,watch:de,formState:{errors:y}}=Se({defaultValues:{days_coming_due:30,id_customer_creditcard:0,id_customer_info:0,id_pos_info:0,id_vietnamese_bank:0,money_applied_percent:"",money_total:"",note:"",percent_to_charge:0,rate_option:2,user_option:2,id_users:m==null?void 0:m.id,bill_split:1,card_type:"Visa"},resolver:Re(fr)}),{mutationCalculateManual:fe}=Oe(),{mutationCalculateByLevelRate:be}=we(),{mutationCreateOrderStep1:pe}=dr(),Ne=async r=>{const n=await pe(r);n.status&&s&&s({bills:n.result,sum_fee_all_bill:n.sum_fee_all_bill,sum_money_applied_percent_all_bill:n.sum_money_applied_percent_all_bill,sum_total_money_all_bill:n.sum_total_money_all_bill})},{customers:R,refetchCustomers:he}=Ke(c),{customer:E}=We(b),{customerCcs:F,refetchCustomerCcs:ye}=ze(c),xe=r=>{f(r.target.value)},ge=r=>{f(""),B(),v(void 0),C(void 0),p(void 0),a("id_customer_info").onChange({target:{name:"id_customer_info",value:r.id}}),v(r)},_e=r=>{f(""),B(),v(void 0),C(void 0),a("id_customer_info").onChange({target:{name:"id_customer_info",value:r.id_customer_info}}),a("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:r.id}}),p(r),_(r.id_customer_info)};async function A(r){const n=k("money_total"),V=k("rate_option"),U=k("percent_to_charge");let N={status:!1,fee:0,rate:U,result:0};r&&r==="2"||!r&&V===2?N=await be({money_total:n}):U>0&&(N=await fe({money_total:n,percent_to_charge:String(U)})),N!=null&&N.status&&(me(N==null?void 0:N.fee),I(String(N==null?void 0:N.rate)),a("percent_to_charge").onChange({target:{name:"percent_to_charge",value:String(N==null?void 0:N.rate)}}),a("money_applied_percent").onChange({target:{name:"money_applied_percent",value:String(N.result)}}))}const L=r=>{var V;const n=(V=d==null?void 0:d.list_credit_card)==null?void 0:V.find(U=>U.id===Number(r));p(n),a("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:n==null?void 0:n.id_vietnamese_bank}})},ve=(r,n)=>{C(r),typeof n=="number"&&le(n)},Te=r=>{ne(r),A(r)},ke=r=>{a("money_total").onChange(r)},Ee=r=>{a("percent_to_charge").onChange(r),I(r.target.value)},G=()=>A();H(()=>{i==="customer"?he():ye()},[c,i]),H(()=>{var r;if(E&&i==="credit_card"){E.list_credit_card=E==null?void 0:E.list_customer_creditcard,v(E);const n=(r=d==null?void 0:d.list_credit_card)==null?void 0:r.find(V=>V.id===Number(o==null?void 0:o.id));a("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:n==null?void 0:n.id_vietnamese_bank}})}},[E==null?void 0:E.id,o==null?void 0:o.id,i,L]);const Ve=i==="customer"?"Name or Phone":"Credit card number",Q=de("money_total");return e.jsxDEV("form",{onSubmit:ue(Ne),className:"grid grid-cols-1 lg:grid-cols-2 gap-4 max-w-2xl mx-auto",autoComplete:"off",children:[e.jsxDEV("div",{className:"grid grid-cols-2 lg:col-span-2",children:[e.jsxDEV("div",{children:e.jsxDEV(u,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"customer",checked:i==="customer",onChange:()=>l("customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:290,columnNumber:13},this)," ","Search by Customer"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:289,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:288,columnNumber:9},this),e.jsxDEV("div",{children:e.jsxDEV(u,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"credit_card",checked:i==="credit_card",onChange:()=>l("credit_card")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:302,columnNumber:13},this)," ","Search by Credit card"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:301,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:300,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:287,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 relative",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(g,{placeholder:Ve,value:c,onChange:xe,className:"flex-1"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:316,columnNumber:11},this),i==="credit_card"&&e.jsxDEV(Je,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:322,columnNumber:42},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:315,columnNumber:9},this),c&&e.jsxDEV(Fe,{className:"absolute top-full mt-2 left-0 w-full",children:e.jsxDEV(qe,{className:"max-h-80 p-2 overflow-auto",children:[i==="credit_card"&&(F==null?void 0:F.map(r=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>_e(r),children:[e.jsxDEV("strong",{children:r.name_on_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:334,columnNumber:21},this)," (",r.creditcard_number,")"]},r.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:329,columnNumber:19},this))),i==="customer"&&(R==null?void 0:R.map(r=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>ge(r),children:[e.jsxDEV("strong",{children:r.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:345,columnNumber:21},this)," (",r.phonenumber,")"]},r.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:340,columnNumber:19},this)))]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:326,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:325,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:314,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:355,columnNumber:9},this),e.jsxDEV(g,{readOnly:!0,defaultValue:d==null?void 0:d.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:356,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:354,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:360,columnNumber:9},this),e.jsxDEV("div",{children:[d?e.jsxDEV(Ie,{...a("id_customer_creditcard"),value:o!=null&&o.id?String(o==null?void 0:o.id):"",listCustomerCreditcards:d==null?void 0:d.list_credit_card,onSelectCard:L},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:363,columnNumber:13},this):e.jsxDEV(g,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:370,columnNumber:13},this),(o==null?void 0:o.id)&&typeof w=="number"&&e.jsxDEV("p",{className:"italic mt-1 text-xs",children:["Last percent charge:"," ",e.jsxDEV("strong",{children:K(w/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:375,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:373,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:361,columnNumber:9},this),e.jsxDEV(x,{error:y.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:380,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:359,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:384,columnNumber:9},this),o?e.jsxDEV(Be,{...a("id_pos_info"),idCustomerCreditcard:o==null?void 0:o.id,onSelectPos:ve},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:386,columnNumber:11},this):e.jsxDEV(g,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:392,columnNumber:11},this),e.jsxDEV(x,{error:y.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:394,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:383,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:398,columnNumber:9},this),o?e.jsxDEV(Ye,{name:a("id_vietnamese_bank").name,onChange:a("id_vietnamese_bank").onChange,onBlur:a("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:o!=null&&o.id_vietnamese_bank?String(o.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:400,columnNumber:11},this):e.jsxDEV(g,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:412,columnNumber:11},this),e.jsxDEV(x,{error:y.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:414,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:397,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:418,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(g,{...a("money_total"),onChange:ke,onBlur:G},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:420,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(Q))?" ":P(Number(Q))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:425,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:419,columnNumber:9},this),e.jsxDEV(x,{error:y.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:431,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:417,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:435,columnNumber:9},this),e.jsxDEV(g,{readOnly:!0,defaultValue:T==null?void 0:T.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:436,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:434,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:440,columnNumber:9},this),e.jsxDEV(Ae,{...a("user_option"),defaultValue:"2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:441,columnNumber:9},this),e.jsxDEV(x,{error:y.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:442,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:439,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:446,columnNumber:9},this),e.jsxDEV(Le,{...a("rate_option"),defaultValue:"2",onSelectRate:Te},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:447,columnNumber:9},this),e.jsxDEV(x,{error:y.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:452,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:445,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:456,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(g,{...a("percent_to_charge"),value:ce,onChange:Ee,onBlur:G,readOnly:ae==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:458,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(k("percent_to_charge")))?" ":K(Number(k("percent_to_charge"))/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:465,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:457,columnNumber:9},this),e.jsxDEV(x,{error:y.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:471,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:455,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:475,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(g,{readOnly:!0,value:S},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:477,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(S))?" ":P(Number(S))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:478,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:476,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:474,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:485,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(g,{...a("money_applied_percent"),value:k("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:489,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(k("money_applied_percent")))?" ":P(Number(k("money_applied_percent")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:494,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:488,columnNumber:9},this),e.jsxDEV(x,{error:y.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:501,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:484,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:505,columnNumber:9},this),e.jsxDEV(g,{...a("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:506,columnNumber:9},this),e.jsxDEV(x,{error:y.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:507,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:504,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:511,columnNumber:9},this),e.jsxDEV(Ge,{...a("card_type"),defaultValue:k("card_type")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:512,columnNumber:9},this),e.jsxDEV(x,{error:y.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:516,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:510,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(u,{htmlFor:"bill_split",children:"Bill Split"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:520,columnNumber:9},this),e.jsxDEV(br,{...a("bill_split"),defaultValue:String(k("bill_split"))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:521,columnNumber:9},this),e.jsxDEV(x,{error:y.bill_split},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:525,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:519,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2 lg:col-span-2",children:[e.jsxDEV(u,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:529,columnNumber:9},this),e.jsxDEV(Me,{...a("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:530,columnNumber:9},this),e.jsxDEV(x,{error:y.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:531,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:528,columnNumber:7},this),e.jsxDEV("div",{className:"mt-4 lg:col-span-2",children:e.jsxDEV(Y,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:535,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:534,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:282,columnNumber:5},this)}const J="Tabs",[Nr,ls]=or(J,[z]),W=z(),[hr,O]=Nr(J),yr=t.forwardRef((s,m)=>{const{__scopeTabs:i,value:l,onValueChange:c,defaultValue:f,orientation:b="horizontal",dir:_,activationMode:d="automatic",...v}=s,o=ar(_),[p,T]=tr({prop:l,onChange:c,defaultProp:f});return t.createElement(hr,{scope:i,baseId:mr(),value:p,onValueChange:T,orientation:b,dir:o,activationMode:d},t.createElement($.div,D({dir:o,"data-orientation":b},v,{ref:m})))}),xr="TabsList",gr=t.forwardRef((s,m)=>{const{__scopeTabs:i,loop:l=!0,...c}=s,f=O(xr,i),b=W(i);return t.createElement(lr,D({asChild:!0},b,{orientation:f.orientation,dir:f.dir,loop:l}),t.createElement($.div,D({role:"tablist","aria-orientation":f.orientation},c,{ref:m})))}),_r="TabsTrigger",vr=t.forwardRef((s,m)=>{const{__scopeTabs:i,value:l,disabled:c=!1,...f}=s,b=O(_r,i),_=W(i),d=X(b.baseId,l),v=Z(b.baseId,l),o=l===b.value;return t.createElement(cr,D({asChild:!0},_,{focusable:!c,active:o}),t.createElement($.button,D({type:"button",role:"tab","aria-selected":o,"aria-controls":v,"data-state":o?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:d},f,{ref:m,onMouseDown:q(s.onMouseDown,p=>{!c&&p.button===0&&p.ctrlKey===!1?b.onValueChange(l):p.preventDefault()}),onKeyDown:q(s.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&b.onValueChange(l)}),onFocus:q(s.onFocus,()=>{const p=b.activationMode!=="manual";!o&&!c&&p&&b.onValueChange(l)})})))}),Tr="TabsContent",kr=t.forwardRef((s,m)=>{const{__scopeTabs:i,value:l,forceMount:c,children:f,...b}=s,_=O(Tr,i),d=X(_.baseId,l),v=Z(_.baseId,l),o=l===_.value,p=t.useRef(o);return t.useEffect(()=>{const T=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(T)},[]),t.createElement(ir,{present:c||o},({present:T})=>t.createElement($.div,D({"data-state":o?"active":"inactive","data-orientation":_.orientation,role:"tabpanel","aria-labelledby":d,hidden:!T,id:v,tabIndex:0},b,{ref:m,style:{...s.style,animationDuration:p.current?"0s":void 0}}),T&&f))});function X(s,m){return`${s}-trigger-${m}`}function Z(s,m){return`${s}-content-${m}`}const Er=yr,ee=gr,re=vr,se=kr,Vr=Er,oe=t.forwardRef(({className:s,...m},i)=>e.jsxDEV(ee,{ref:i,className:j("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...m},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/ui/tabs.tsx",lineNumber:12,columnNumber:3},void 0));oe.displayName=ee.displayName;const ie=t.forwardRef(({className:s,...m},i)=>e.jsxDEV(re,{ref:i,className:j("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...m},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/ui/tabs.tsx",lineNumber:27,columnNumber:3},void 0));ie.displayName=re.displayName;const te=t.forwardRef(({className:s,...m},i)=>e.jsxDEV(se,{ref:i,className:j("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...m},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/ui/tabs.tsx",lineNumber:42,columnNumber:3},void 0));te.displayName=se.displayName;function Pr(){const[s,m]=t.useState();function i(l){m(l)}return e.jsxDEV("div",{className:"space-y-4 px-4 mb-10",children:[e.jsxDEV("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight space-y-2 max-w-2xl mx-auto",children:s?"Order Information":"Create Order"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:22,columnNumber:7},this),!s&&e.jsxDEV(pr,{nextStep:i},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:25,columnNumber:24},this),s&&e.jsxDEV(Vr,{defaultValue:"bill-0",className:"max-w-2xl mx-auto",children:[e.jsxDEV(oe,{className:"w-full flex items-center",children:s.bills.map((l,c)=>e.jsxDEV(ie,{value:`bill-${c}`,className:"flex-1",children:["Bill ",c+1]},l.uuid_id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:30,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:28,columnNumber:11},this),s.bills.map((l,c)=>e.jsxDEV(te,{value:`bill-${c}`,children:e.jsxDEV(nr,{bill:l},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:41,columnNumber:15},this)},l.uuid_id,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:40,columnNumber:13},this)),e.jsxDEV("div",{className:"mt-2 grid border border-b-0 md:grid-cols-[240px_1fr] bg-accent col-span-2",children:[e.jsxDEV(u,{className:"text-muted-foreground font-bold border-b flex items-center p-2",children:"Sum Fees"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:45,columnNumber:13},this),e.jsxDEV("p",{className:"border-b text-accent-foreground border-l font-bold p-2",children:P(s.sum_fee_all_bill)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:48,columnNumber:13},this),e.jsxDEV(u,{className:"text-muted-foreground font-bold border-b flex items-center p-2",children:"Sum Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:52,columnNumber:13},this),e.jsxDEV("p",{className:"border-b text-accent-foreground border-l font-bold p-2",children:P(s.sum_money_applied_percent_all_bill)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:55,columnNumber:13},this),e.jsxDEV(u,{className:"text-muted-foreground font-bold border-b flex items-center p-2",children:"Sum Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:59,columnNumber:13},this),e.jsxDEV("p",{className:"border-b text-accent-foreground font-bold border-l p-2",children:P(s.sum_total_money_all_bill)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:62,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:44,columnNumber:11},this),e.jsxDEV(Ue,{to:je.CUSTOMER_HISTORIES,children:e.jsxDEV(Y,{className:"w-full mt-4",children:"Done"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:67,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:66,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:27,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:21,columnNumber:5},this)}function cs(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ce,{children:e.jsxDEV("title",{children:"POS System - Order Create"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-create.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-create.page.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(Pr,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-create.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-create.page.tsx",lineNumber:6,columnNumber:5},this)}export{cs as default};

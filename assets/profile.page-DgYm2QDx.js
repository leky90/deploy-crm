import{j as e}from"./index-CJ4aojTS.js";import{a as g,H as w}from"./Helmet-CQJxFuV9.js";import{C as n,a as c,b as d,c as t}from"./card-DKsQ3IgN.js";import{u as p}from"./use-auth.cache--d25v-3P.js";import{g as x,a as P}from"./get-status.util-DC1d3cyY.js";import{z as a,u as y,t as v,F as i}from"./index-D8SDuPEw.js";import{B as U}from"./button-C7e1d5xZ.js";import{I as m}from"./input-8Nyj8SBJ.js";import{u as E}from"./useMutation-5gSZwTnf.js";import{L as o}from"./label-DHIBfv39.js";function j(){const{auth:s,getAuthInfo:u}=p(),r=u();return e.jsxDEV(n,{children:[e.jsxDEV(c,{children:e.jsxDEV(d,{className:"font-medium",children:"Your Profile"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:13,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:12,columnNumber:7},this),e.jsxDEV(t,{className:"grid grid-cols-[100px_1fr] gap-4",children:[e.jsxDEV("label",{className:"font-bold",children:"ID"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:16,columnNumber:9},this),e.jsxDEV("span",{children:s==null?void 0:s.id},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:17,columnNumber:9},this),e.jsxDEV("label",{className:"font-bold",children:"Public ID"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:18,columnNumber:9},this),e.jsxDEV("span",{className:"truncate",children:s==null?void 0:s.public_id},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:19,columnNumber:9},this),e.jsxDEV("label",{className:"font-bold",children:"Username"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:20,columnNumber:9},this),e.jsxDEV("span",{children:s==null?void 0:s.username},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:21,columnNumber:9},this),e.jsxDEV("label",{className:"font-bold",children:"Full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:22,columnNumber:9},this),e.jsxDEV("span",{children:s==null?void 0:s.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:23,columnNumber:9},this),e.jsxDEV("label",{className:"font-bold",children:"Role"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:24,columnNumber:9},this),e.jsxDEV("span",{children:x(r!=null&&r.is_administrator?2:1)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:25,columnNumber:9},this),e.jsxDEV("label",{className:"font-bold",children:"Status"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:26,columnNumber:9},this),e.jsxDEV("span",{children:P(!!(s!=null&&s.status))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:27,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:15,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/profile.feature.tsx",lineNumber:11,columnNumber:5},this)}function D(s){return g({method:"post",url:"/user/ChangePassword",data:s})}function T(){const{mutateAsync:s}=E({mutationFn:D});return{mutationChangePassword:s}}const V=a.object({username:a.string().nonempty(),old_password:a.string().nonempty(),new_password:a.string().nonempty(),re_new_password:a.string().nonempty()}).refine(s=>s.new_password===s.re_new_password,{message:"Passwords don't match",path:["re_new_password"]}).refine(s=>s.new_password!==s.old_password,{message:"The new password must not be the same as the old password",path:["new_password"]});function k(){const{auth:s}=p(),{mutationChangePassword:u}=T(),{register:r,handleSubmit:f,reset:b,formState:{errors:l}}=y({defaultValues:{username:s==null?void 0:s.username},resolver:v(V)}),N=async h=>{(await u(h)).status&&b()};return e.jsxDEV("form",{onSubmit:f(N),className:"space-y-4",autoComplete:"off",children:[e.jsxDEV("div",{children:[e.jsxDEV(o,{htmlFor:"username",children:"Username"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:44,columnNumber:9},this),e.jsxDEV(m,{placeholder:"Username",...r("username"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:45,columnNumber:9},this),e.jsxDEV(i,{error:l.username},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:46,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:43,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{htmlFor:"old_password",children:"Old Password"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:50,columnNumber:9},this),e.jsxDEV(m,{type:"password",placeholder:"Old Password",...r("old_password")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:51,columnNumber:9},this),e.jsxDEV(i,{error:l.old_password},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:56,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:49,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{htmlFor:"new_password",children:"New Password"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:59,columnNumber:9},this),e.jsxDEV(m,{type:"password",placeholder:"New Password",...r("new_password")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:60,columnNumber:9},this),e.jsxDEV(i,{error:l.new_password},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:65,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:58,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{htmlFor:"re_new_password",children:"Re-new Password"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:68,columnNumber:9},this),e.jsxDEV(m,{type:"password",placeholder:"Re-new Password",...r("re_new_password")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:69,columnNumber:9},this),e.jsxDEV(i,{error:l.re_new_password},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:74,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:67,columnNumber:7},this),e.jsxDEV(U,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:76,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/change-password/change-password.form.tsx",lineNumber:38,columnNumber:5},this)}function _(){return e.jsxDEV(n,{children:[e.jsxDEV(c,{children:e.jsxDEV(d,{className:"font-medium",children:"Change password"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/change-password.feature.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/change-password.feature.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(t,{children:e.jsxDEV(k,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/change-password.feature.tsx",lineNumber:11,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/change-password.feature.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/change-password.feature.tsx",lineNumber:6,columnNumber:5},this)}function z(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(w,{children:e.jsxDEV("title",{children:"POS System - Profile"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/profile.page.tsx",lineNumber:9,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/profile.page.tsx",lineNumber:8,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxDEV(j,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/profile.page.tsx",lineNumber:12,columnNumber:9},this),e.jsxDEV(_,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/profile.page.tsx",lineNumber:13,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/profile.page.tsx",lineNumber:11,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/profile.page.tsx",lineNumber:7,columnNumber:5},this)}export{z as default};

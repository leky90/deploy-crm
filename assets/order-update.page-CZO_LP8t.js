import{a as Y,Q as q,c as ne,r as y,j as e,R as re,k as ze,u as Ye}from"./index-DtKAakRc.js";import{H as Ge}from"./Helmet-DJWz6KFO.js";import{z as t,u as de,t as le,F as a}from"./index-BQEYCdRS.js";import{B as se}from"./button-BGRJ0Mg8.js";import{C as Ke,c as Le}from"./card--n9O8Hzu.js";import{I as c}from"./input-B-tuV2mB.js";import{L as o}from"./label-DXZhCP0j.js";import{T as pe}from"./textarea-CqS8A-pz.js";import{u as fe,a as be,f as $e,F as he,b as Ne,c as ge,d as ye,e as _e}from"./use-cancel-order.mutation-CSFvfNYP.js";import{u as We}from"./use-get-customers.query-DKEYZv8u.js";import{F as xe}from"./vn-bank.field-B298a0BI.js";import{M as B,A as H,a as Xe}from"./upload.constant-D3d5R5uO.js";import{u as G}from"./useMutation-Cv1PQFpo.js";import{a as F}from"./api-client-axGC5cZc.js";import{c as ve}from"./convert-data-to-form-data.util-CYcIkezp.js";import{S as Te,a as ke,b as Ue,c as Ee,d as De}from"./select-BrPI7tth.js";import{G as Q}from"./grid-images-DU2xDVkZ.js";import{u as je}from"./use-get-customer-by-id.query-B3n07Npk.js";import{u as Ze}from"./use-get-customer-ccs.query-WRk91E5c.js";import{u as te}from"./index-765l_sCq.js";import{u as Je}from"./useQuery-BLloIvPX.js";import{u as er}from"./use-auth.cache-BNMr8ff_.js";import"./index-BNgByyD0.js";import"./index-j9Y1WKZp.js";import"./use-get-user-options.query-HtCrhQjE.js";import"./use-get-vn-banks.query-BlJ42q5N.js";import"./popover-BK7T-Ivg.js";import"./Combination-DAgetaI7.js";import"./index-C1vx-IRk.js";import"./react-icons.esm-CNQoRNEM.js";import"./index-mEQ1JhiA.js";import"./dialog-DRmCyBys.js";const ue=t.object({id:t.coerce.number(),card_type:t.string({required_error:"Required."}),user_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),rate_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_creditcard:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:t.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:t.coerce.number({required_error:"Required."}),notification_coming_due:t.coerce.number(),percent_to_charge:t.coerce.number({required_error:"Required."}).gt(0,"Required."),money_total:t.coerce.number({required_error:"Required."}).gt(0,"Required."),money_applied_percent:t.coerce.number({required_error:"Required."}).gt(0,"Required."),note:t.string(),images_creditcard_due_withdrawn:t.any().refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:t.any().refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function rr(r){const s=ve(r);return F({method:"patch",url:"/customer_history/order_update_admin",data:s,headers:{"Content-Type":"multipart/form-data"}})}function sr(){const{mutateAsync:r}=G({mutationFn:rr,onSuccess:()=>{Y.invalidateQueries({queryKey:q.CUSTOMER_HISTORY})}});return{mutationUpdateOrderAdmin:r}}function z(r){return`https://pos.crawl.vn${r}`}function ae(r){return r==null?void 0:r.replace(`https://pos.crawl.vn${Xe}`,"")}function ir(r){return F({method:"delete",url:"/customer_history/DeleteImage/images_creditcard_due_withdrawn",data:r})}function mr(){const{mutateAsync:r}=G({mutationFn:ir,onSuccess:s=>{(s.status||s.success)&&Y.invalidateQueries({queryKey:q.CUSTOMER_HISTORY})}});return{mutationDeleteOrderCcImage:r}}function or(r){return F({method:"delete",url:"/customer_history/DeleteImage/images_transfer_money_to_customer",data:r})}function tr(){const{mutateAsync:r}=G({mutationFn:or,onSuccess:s=>{(s.status||s.success)&&Y.invalidateQueries({queryKey:q.CUSTOMER_HISTORY})}});return{mutationDeleteOrderTransferImage:r}}function ur({defaultValues:r,defaultCustomer:s,defaultCreditCard:u}){var me,oe;const T=ne(),[f,P]=y.useState(),[n,U]=y.useState({...s,list_credit_card:s.list_customer_creditcard}),[p,O]=y.useState(u),[E,V]=y.useState({id:r.id_pos_info}),[K,L]=y.useState(Number(r.fee)),[d,w]=y.useState(r.percent_to_charge),[C,b]=y.useState(String(r.rate_option)),[v,M]=y.useState("customer"),[$,W]=y.useState(),{register:m,handleSubmit:X,getValues:S,formState:{errors:h}}=de({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:le(ue)}),{mutationCalculateManual:Z}=fe(),{mutationCalculateByLevelRate:J}=be(),{mutationUpdateOrderAdmin:I}=sr(),A=async i=>{const N=ue.parse(i);(await I(N)).status&&T(re.CUSTOMER_HISTORIES)},{customers:l,refetchCustomers:k}=We(f),{customer:_}=je($),{customerCcs:D,refetchCustomerCcs:x}=Ze(f),Pe=i=>{P(i.target.value)},Ve=async i=>{P(""),U(void 0),V(void 0),O(void 0),m("id_customer_info").onChange({target:{name:"id_customer_info",value:i.id}}),m("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:0}}),m("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),m("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),U(i)},Ce=i=>{P(""),U(void 0),V(void 0),m("id_customer_info").onChange({target:{name:"id_customer_info",value:i.id_customer_info}}),m("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:i.id}}),m("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),m("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),O(i),W(i.id_customer_info)};async function ee(i){const N=S("money_total"),j=S("rate_option"),R=S("percent_to_charge");let g={status:!1,fee:0,rate:Number(R),result:0};i&&i==="2"||!i&&j===2?g=await J({money_total:N}):Number(R)>0&&(g=await Z({money_total:N,percent_to_charge:String(R)})),g!=null&&g.status&&(L(g==null?void 0:g.fee),w(String(g==null?void 0:g.rate)),m("percent_to_charge").onChange({target:{name:"percent_to_charge",value:String(g==null?void 0:g.rate)}}),m("money_applied_percent").onChange({target:{name:"money_applied_percent",value:String(g.result)}}))}const ie=async i=>{var j;const N=(j=n==null?void 0:n.list_credit_card)==null?void 0:j.find(R=>R.id===Number(i));O(N),m("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:N==null?void 0:N.id_vietnamese_bank}}),V(void 0),m("id_pos_info").onChange({target:{name:"id_pos_info",value:0}})},Se=i=>{V(i)},Oe=i=>{b(i),ee(i)},Re=i=>{m("money_total").onChange(i),ee()},qe=i=>{m("percent_to_charge").onChange(i),w(i.target.value)},Fe=()=>ee(),{mutationDeleteOrderCcImage:we}=mr(),{mutationDeleteOrderTransferImage:Me}=tr(),Ie=i=>{we({id:String(r.id),name_image_creditcard_due_withdrawn:i})},Ae=i=>{Me({id:String(r.id),name_image_transfer_money_to_customer:i})},{mutationCancelOrder:Be}=$e(),He=async()=>{(await Be({uuid_id:r.uuid_id})).status&&T(re.CUSTOMER_HISTORIES)};te(()=>{v==="customer"?k():x()},[f,v]),te(()=>{var i;if(_&&v==="credit_card"){_.list_credit_card=_==null?void 0:_.list_customer_creditcard,U(_);const N=(i=n==null?void 0:n.list_credit_card)==null?void 0:i.find(j=>j.id===Number(p==null?void 0:p.id));m("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:N==null?void 0:N.id_vietnamese_bank}})}},[_==null?void 0:_.id,p==null?void 0:p.id,v,ie]);const Qe=v==="customer"?"Name or Phone":"Credit card number";return e.jsxDEV("form",{onSubmit:X(A),className:"grid grid-cols-1 lg:grid-cols-2 gap-4",autoComplete:"off",children:[e.jsxDEV("div",{className:"grid grid-cols-2 lg:col-span-2",children:[e.jsxDEV("div",{children:e.jsxDEV(o,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"customer",checked:v==="customer",onChange:()=>M("customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:348,columnNumber:13},this)," ","Search by Customer"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:347,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:346,columnNumber:9},this),e.jsxDEV("div",{children:e.jsxDEV(o,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"credit_card",checked:v==="credit_card",onChange:()=>M("credit_card")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:360,columnNumber:13},this)," ","Search by Credit card"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:359,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:358,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:345,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 relative",children:[e.jsxDEV(c,{placeholder:Qe,value:f,onChange:Pe},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:373,columnNumber:9},this),f&&e.jsxDEV(Ke,{className:"absolute top-full mt-2 left-0 w-full z-50",children:e.jsxDEV(Le,{className:"max-h-80 p-2 overflow-auto",children:[v==="credit_card"&&(D==null?void 0:D.map(i=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>Ce(i),children:[e.jsxDEV("strong",{children:i.name_on_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:384,columnNumber:21},this)," (",i.creditcard_number,")"]},i.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:379,columnNumber:19},this))),v==="customer"&&(l==null?void 0:l.map(i=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>Ve(i),children:[e.jsxDEV("strong",{children:i.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:395,columnNumber:21},this)," (",i.phonenumber,")"]},i.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:390,columnNumber:19},this)))]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:376,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:375,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:372,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:405,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,value:n==null?void 0:n.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:406,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:404,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:410,columnNumber:9},this),n?e.jsxDEV(he,{...m("id_customer_creditcard"),value:p!=null&&p.id?String(p==null?void 0:p.id):"",listCustomerCreditcards:n==null?void 0:n.list_credit_card,onSelectCard:ie},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:412,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:419,columnNumber:11},this),e.jsxDEV(a,{error:h.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:421,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:409,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:425,columnNumber:9},this),p?e.jsxDEV(Ne,{...m("id_pos_info"),idCustomerCreditcard:p.id,onSelectPos:Se,defaultValue:E==null?void 0:E.id},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:427,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:434,columnNumber:11},this),e.jsxDEV(a,{error:h.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:436,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:424,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:440,columnNumber:9},this),p?e.jsxDEV(xe,{name:m("id_vietnamese_bank").name,onChange:m("id_vietnamese_bank").onChange,onBlur:m("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:p!=null&&p.id_vietnamese_bank?String(p.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:442,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:454,columnNumber:11},this),e.jsxDEV(a,{error:h.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:456,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:439,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:460,columnNumber:9},this),e.jsxDEV(c,{...m("money_total"),onChange:Re},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:461,columnNumber:9},this),e.jsxDEV(a,{error:h.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:462,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:459,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:466,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,defaultValue:E==null?void 0:E.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:467,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:465,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:471,columnNumber:9},this),n?e.jsxDEV(ge,{...m("user_option"),defaultValue:String(r.user_option)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:473,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:478,columnNumber:11},this),e.jsxDEV(a,{error:h.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:480,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:470,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:484,columnNumber:9},this),n?e.jsxDEV(ye,{...m("rate_option"),defaultValue:String(r.rate_option),onSelectRate:Oe},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:486,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:492,columnNumber:11},this),e.jsxDEV(a,{error:h.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:494,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:483,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:498,columnNumber:9},this),e.jsxDEV(c,{...m("percent_to_charge"),value:d,onChange:qe,onBlur:Fe,readOnly:C==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:499,columnNumber:9},this),e.jsxDEV(a,{error:h.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:506,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:497,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:510,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,value:K},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:511,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:509,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:515,columnNumber:9},this),e.jsxDEV(c,{...m("money_applied_percent"),value:S("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:518,columnNumber:9},this),e.jsxDEV(a,{error:h.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:523,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:514,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:527,columnNumber:9},this),e.jsxDEV(c,{...m("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:528,columnNumber:9},this),e.jsxDEV(a,{error:h.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:529,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:526,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"notification_coming_due",children:"Notification Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:533,columnNumber:9},this),e.jsxDEV(Te,{...m("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:i=>m("notification_coming_due").onChange({target:{name:"notification_coming_due",value:i}}),children:[e.jsxDEV(ke,{className:"h-8 w-20",children:e.jsxDEV(Ue,{placeholder:"Set notification"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:544,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:543,columnNumber:11},this),e.jsxDEV(Ee,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:i,value:N})=>e.jsxDEV(De,{value:N,children:i},N,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:551,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:546,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:534,columnNumber:9},this),e.jsxDEV(a,{error:h.notification_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:557,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:532,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:561,columnNumber:9},this),e.jsxDEV(_e,{...m("card_type"),defaultValue:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:562,columnNumber:9},this),e.jsxDEV(a,{error:h.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:566,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:560,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:570,columnNumber:9},this),e.jsxDEV(pe,{...m("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:571,columnNumber:9},this),e.jsxDEV(a,{error:h.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:572,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:569,columnNumber:7},this),e.jsxDEV("div",{className:"grid lg:col-span-2 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:577,columnNumber:11},this),e.jsxDEV(Q,{images:(me=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:me.map(z),onDelete:Ie,getName:ae},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:580,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...m("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:587,columnNumber:11},this),e.jsxDEV(a,{error:h.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:593,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:576,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:599,columnNumber:11},this),e.jsxDEV(Q,{images:(oe=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:oe.map(z),onDelete:Ae,getName:ae},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:602,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...m("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:609,columnNumber:11},this),e.jsxDEV(a,{error:h.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:615,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:598,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:575,columnNumber:7},this),e.jsxDEV("div",{className:"mt-4 grid grid-cols-2 gap-4 lg:col-span-2",children:[e.jsxDEV(se,{type:"submit",className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:622,columnNumber:9},this),r.status!==3&&e.jsxDEV(se,{type:"button",className:"w-full",variant:"destructive",onClick:He,children:"Cancel Order"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:626,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:621,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:340,columnNumber:5},this)}function ar(r){return F({url:"/customer_history/SearchHistory_By_ID",params:r})}function cr(r){var u;const{data:s}=Je({queryKey:[...q.CUSTOMER_HISTORY,r],queryFn:()=>ar({id:r}),placeholderData:ze,gcTime:1e4});return{customerHistory:(u=s==null?void 0:s.result)==null?void 0:u[0]}}const ce=t.object({id:t.coerce.number(),card_type:t.string({required_error:"Required."}),user_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),rate_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_creditcard:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:t.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:t.coerce.number({required_error:"Required."}),notification_coming_due:t.coerce.number(),percent_to_charge:t.coerce.number({required_error:"Required."}).gt(0,"Required."),money_total:t.coerce.number({required_error:"Required."}).gt(0,"Required."),money_applied_percent:t.coerce.number({required_error:"Required."}).gt(0,"Required."),note:t.string(),images_creditcard_due_withdrawn:t.any().refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:t.any().refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var s;return!(r!=null&&r.length)||!((s=Array.from(r))!=null&&s.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function nr(r){const s=ve(r);return F({method:"patch",url:"/customer_history/order_update_user",data:s,headers:{"Content-Type":"multipart/form-data"}})}function dr(){const{mutateAsync:r}=G({mutationFn:nr,onSuccess:()=>{Y.invalidateQueries({queryKey:q.CUSTOMER_HISTORY})}});return{mutationUpdateOrderUser:r}}function lr({defaultValues:r,defaultCustomer:s,defaultCreditCard:u}){var I,A;const T=ne(),[f,P]=y.useState(u),[n,U]=y.useState({id:r.id_pos_info}),[p,O]=y.useState(Number(r.fee)),[E,V]=y.useState(r.percent_to_charge),[K,L]=y.useState(String(r.rate_option)),{register:d,handleSubmit:w,getValues:C,formState:{errors:b}}=de({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:le(ce)}),{mutationCalculateManual:v}=fe(),{mutationCalculateByLevelRate:M}=be(),{mutationUpdateOrderUser:$}=dr(),W=async l=>{const k=ce.parse(l);(await $(k)).status&&T(re.CUSTOMER_HISTORIES)};async function m(l){const k=C("money_total"),_=C("rate_option"),D=C("percent_to_charge");let x={status:!1,fee:0,rate:Number(D),result:0};l&&l==="2"||!l&&_===2?x=await M({money_total:k}):Number(D)>0&&(x=await v({money_total:k,percent_to_charge:String(D)})),x.status&&(O(x==null?void 0:x.fee),d("percent_to_charge").onChange({target:{name:"percent_to_charge",value:x==null?void 0:x.rate}}),d("money_applied_percent").onChange({target:{name:"money_applied_percent",value:x.result}}))}const X=l=>{U(l)},S=l=>{L(l),m(l)},h=l=>{d("money_total").onChange(l),m()},Z=l=>{d("percent_to_charge").onChange(l),V(l.target.value)},J=()=>m();return e.jsxDEV("form",{onSubmit:w(W),className:"grid grid-cols-1 lg:grid-cols-2 gap-4",autoComplete:"off",children:[e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:160,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,defaultValue:s==null?void 0:s.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:161,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:159,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:165,columnNumber:9},this),e.jsxDEV(he,{...d("id_customer_creditcard"),defaultValue:f!=null&&f.id?String(f.id):"",listCustomerCreditcards:s==null?void 0:s.list_customer_creditcard,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:166,columnNumber:9},this),e.jsxDEV(a,{error:b.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:172,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:164,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:176,columnNumber:9},this),f?e.jsxDEV(Ne,{...d("id_pos_info"),idCustomerCreditcard:f.id,onSelectPos:X,defaultValue:n==null?void 0:n.id},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:178,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:185,columnNumber:11},this),e.jsxDEV(a,{error:b.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:187,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:175,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:191,columnNumber:9},this),f?e.jsxDEV(xe,{name:d("id_vietnamese_bank").name,onChange:d("id_vietnamese_bank").onChange,onBlur:d("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:f!=null&&f.id_vietnamese_bank?String(f.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:193,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:205,columnNumber:11},this),e.jsxDEV(a,{error:b.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:207,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:190,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:211,columnNumber:9},this),e.jsxDEV(c,{...d("money_total"),onChange:h},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:212,columnNumber:9},this),e.jsxDEV(a,{error:b.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:213,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:210,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:217,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,defaultValue:n==null?void 0:n.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:218,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:216,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:222,columnNumber:9},this),e.jsxDEV(ge,{...d("user_option"),defaultValue:String(r.user_option)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:223,columnNumber:9},this),e.jsxDEV(a,{error:b.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:227,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:221,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:231,columnNumber:9},this),e.jsxDEV(ye,{...d("rate_option"),defaultValue:String(r.rate_option),onSelectRate:S},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:232,columnNumber:9},this),e.jsxDEV(a,{error:b.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:237,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:230,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:241,columnNumber:9},this),e.jsxDEV(c,{...d("percent_to_charge"),value:E,onChange:Z,onBlur:J,readOnly:K==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:242,columnNumber:9},this),e.jsxDEV(a,{error:b.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:249,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:240,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:253,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,value:p},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:254,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:252,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:258,columnNumber:9},this),e.jsxDEV(c,{...d("money_applied_percent"),value:C("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:261,columnNumber:9},this),e.jsxDEV(a,{error:b.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:266,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:257,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:270,columnNumber:9},this),e.jsxDEV(c,{...d("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:271,columnNumber:9},this),e.jsxDEV(a,{error:b.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:272,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:269,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"notification_coming_due",children:"Notification Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:276,columnNumber:9},this),e.jsxDEV(Te,{...d("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:l=>d("notification_coming_due").onChange({target:{name:"notification_coming_due",value:l}}),children:[e.jsxDEV(ke,{className:"h-8 w-20",children:e.jsxDEV(Ue,{placeholder:"Set notification"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:287,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:286,columnNumber:11},this),e.jsxDEV(Ee,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:l,value:k})=>e.jsxDEV(De,{value:k,children:l},k,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:294,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:289,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:277,columnNumber:9},this),e.jsxDEV(a,{error:b.notification_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:300,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:275,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:304,columnNumber:9},this),e.jsxDEV(_e,{...d("card_type"),defaultValue:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:305,columnNumber:9},this),e.jsxDEV(a,{error:b.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:309,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:303,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:313,columnNumber:9},this),e.jsxDEV(pe,{...d("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:314,columnNumber:9},this),e.jsxDEV(a,{error:b.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:315,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:312,columnNumber:7},this),e.jsxDEV("div",{className:"grid lg:col-span-2 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:320,columnNumber:11},this),e.jsxDEV(Q,{images:(I=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:I.map(z)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:323,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...d("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:328,columnNumber:11},this),e.jsxDEV(a,{error:b.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:334,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:319,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:340,columnNumber:11},this),e.jsxDEV(Q,{images:(A=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:A.map(z)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:343,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...d("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:348,columnNumber:11},this),e.jsxDEV(a,{error:b.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:354,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:339,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:318,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 mt-4",children:e.jsxDEV(se,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:361,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:360,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:154,columnNumber:5},this)}function pr(){var n;const r=Ye(),{isAdmin:s}=er(),{customerHistory:u}=cr(Number(r.id)),{customer:T}=je((u==null?void 0:u.id_customer_info)||0),f=(n=T==null?void 0:T.list_customer_creditcard)==null?void 0:n.find(U=>U.id===(u==null?void 0:u.id_customer_creditcard)),P=s()?ur:lr;return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("div",{className:"flex items-center flex-col lg:flex-row justify-between space-y-2",children:e.jsxDEV("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:["Update Order: ",r.id]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:26,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:25,columnNumber:7},this),u&&f&&T&&e.jsxDEV(P,{defaultValues:u,defaultCreditCard:f,defaultCustomer:T},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:31,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:24,columnNumber:5},this)}function Gr(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ge,{children:e.jsxDEV("title",{children:"POS System - Order Update"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(pr,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:6,columnNumber:5},this)}export{Gr as default};

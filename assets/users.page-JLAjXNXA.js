import{B as p,ae as h,A as x,Q as N,j as e,af as U,ag as v,ah as k,P as d,ai as V,aj as E,G as m,J as P,E as T,r as f,F as j,L as a,ak as D,al as S,am as C,an as w,ao as F,M as _,ap as R,T as K,a2 as B,a4 as I,a5 as q}from"./index-cmrs5-26.js";import{g as M,a as Q}from"./get-status.util-DC1d3cyY.js";import{z as l,u as A,t as L,I as c,F as o}from"./index-CWsfpnlA.js";import{R as W}from"./role.component-BfsrxMoJ.js";function z(s){return p({method:"patch",url:"/user/set_active",data:s})}function G(){const{mutateAsync:s}=h({mutationFn:z,onSettled:()=>{x.invalidateQueries({queryKey:N.USERS})}});return{mutationUpdateUserStatusById:s}}function H({status:s,id:u}){const{mutationUpdateUserStatusById:i}=G(),r=()=>{i({id_user:u,active:!s})};return e.jsxDEV(U,{children:e.jsxDEV(v,{children:[e.jsxDEV(k,{asChild:!0,children:e.jsxDEV(d,{variant:"outline",size:"icon",onClick:r,children:e.jsxDEV(V,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:35,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:30,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:29,columnNumber:9},this),e.jsxDEV(E,{children:e.jsxDEV("p",{children:["Change user to ",s?"inactive":"active","."]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:39,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:38,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:28,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:27,columnNumber:5},this)}const Y={id:!0,active:!0,full_name:!0,public_id:!1,role:!0,token:!1,username:!0,working_address:!0,phonenumber:!0},J=()=>[{accessorKey:"id",header:"ID",enableHiding:!1,cell:s=>e.jsxDEV(m,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:29,columnNumber:14},void 0)},{accessorKey:"username",header:"Username",cell:s=>e.jsxDEV(m,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:36,columnNumber:14},void 0)},{accessorKey:"full_name",header:"Full Name",cell:s=>e.jsxDEV(m,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:43,columnNumber:14},void 0)},{accessorKey:"role",header:"Role",cell:s=>e.jsxDEV(m,{children:M(s.getValue())},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:51,columnNumber:14},void 0)},{accessorKey:"active",header:"Status",cell:s=>e.jsxDEV("div",{className:"space-x-2",children:[e.jsxDEV(P,{variant:s.getValue()?"success":"destructive",children:Q(s.getValue())},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:61,columnNumber:11},void 0),e.jsxDEV(H,{id:s.row.original.id,status:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:65,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:60,columnNumber:9},void 0)},{accessorKey:"phonenumber",header:"Phone",cell:s=>e.jsxDEV(m,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:77,columnNumber:14},void 0)},{accessorKey:"working_address",header:"Working Address",cell:s=>e.jsxDEV(m,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:84,columnNumber:14},void 0)}];function O(){return p({url:"/user/get_all"})}function X(){const{data:s}=T({queryKey:N.USERS,queryFn:O,gcTime:1e4}),u=f.useMemo(()=>s!=null&&s.status?j(s.result,"id"):{},[s==null?void 0:s.status]);return{users:s==null?void 0:s.result,usersByKey:u}}const Z=l.object({id:l.coerce.number().optional(),role:l.coerce.number({invalid_type_error:"Required."}).min(1,"Required.").max(2,"Required."),username:l.string().nonempty(),full_name:l.string().nonempty(),password:l.string().nonempty(),phonenumber:l.string(),working_address:l.string().nonempty()});function $({defaultValues:s,mutation:u,onClose:i}){const{register:r,handleSubmit:g,formState:{errors:n}}=A({defaultValues:s,resolver:L(Z)}),y=async t=>{(await u(t)).status&&i&&i()};return e.jsxDEV("form",{onSubmit:g(y),className:"space-y-4",autoComplete:"off",children:[e.jsxDEV("div",{children:[e.jsxDEV(a,{htmlFor:"username",children:"Username"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:49,columnNumber:9},this),e.jsxDEV(c,{placeholder:"Username",...r("username")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:50,columnNumber:9},this),e.jsxDEV(o,{error:n.username},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:51,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:48,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(a,{htmlFor:"fullname",children:"Full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:55,columnNumber:9},this),e.jsxDEV(c,{placeholder:"Full name",...r("full_name")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:56,columnNumber:9},this),e.jsxDEV(o,{error:n.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:57,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:54,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(a,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:61,columnNumber:9},this),e.jsxDEV(c,{type:"password",placeholder:"Password",...r("password")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:62,columnNumber:9},this),e.jsxDEV(o,{error:n.password},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:67,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:60,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(a,{htmlFor:"role",children:"Role"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:71,columnNumber:9},this),e.jsxDEV(D,{...r("role"),onValueChange:t=>r("role").onChange({target:{name:"role",value:t}}),children:[e.jsxDEV(S,{className:"h-8 w-20",children:e.jsxDEV(C,{placeholder:"Set role"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:79,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:78,columnNumber:11},this),e.jsxDEV(w,{children:[{role:"User",value:"1"},{role:"Admin",value:"2"}].map(({role:t,value:b})=>e.jsxDEV(F,{value:b,children:t},b,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:86,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:81,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:72,columnNumber:9},this),e.jsxDEV(o,{error:n.role},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:92,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:70,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(a,{htmlFor:"phonenumber",children:"Phone number"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:96,columnNumber:9},this),e.jsxDEV(c,{placeholder:"Phone number",...r("phonenumber")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:97,columnNumber:9},this),e.jsxDEV(o,{error:n.phonenumber},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:98,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:95,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(a,{htmlFor:"working_address",children:"Working address"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:102,columnNumber:9},this),e.jsxDEV(c,{placeholder:"Working address",...r("working_address")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:103,columnNumber:9},this),e.jsxDEV(o,{error:n.working_address},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:104,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:101,columnNumber:7},this),e.jsxDEV(d,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:107,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:43,columnNumber:5},this)}function ee(s){return p({url:"/user/signup",method:"post",data:s})}function se(){const{mutateAsync:s}=h({mutationFn:ee,onSuccess:u=>{u.status&&x.invalidateQueries({queryKey:N.USERS})}});return{mutationSignUp:s}}function re(){const s=f.useRef(null);function u(){var r;(r=s.current)==null||r.click()}const{mutationSignUp:i}=se();return e.jsxDEV(W,{type:"admin",children:e.jsxDEV(_,{title:"Create new user",className:"w-96",trigger:e.jsxDEV(d,{className:"gap-2",children:[e.jsxDEV(R,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:26,columnNumber:13},this)," Create new user"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:25,columnNumber:11},this),actionButtons:e.jsxDEV(K,{asChild:!0,children:e.jsxDEV(d,{ref:s,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:31,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:30,columnNumber:11},this),children:e.jsxDEV($,{onClose:u,mutation:i},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:37,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:21,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:20,columnNumber:5},this)}function ue(){const[s,u]=f.useState(Y),{users:i}=X(),r=f.useMemo(()=>J(),[]);return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxDEV("h2",{className:"text-3xl font-bold tracking-tight",children:"Users"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:20,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:e.jsxDEV(re,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:22,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:21,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:19,columnNumber:7},this),e.jsxDEV(B,{data:i,columns:r,columnVisibility:s,rowCount:i==null?void 0:i.length,onColumnVisibilityChange:u,hidePagination:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:26,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:18,columnNumber:5},this)}function ae(){return e.jsxDEV(I,{type:"admin",children:[e.jsxDEV(q,{children:e.jsxDEV("title",{children:"POS System - List of Users"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:9,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:8,columnNumber:7},this),e.jsxDEV(ue,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:11,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:7,columnNumber:5},this)}export{ae as default};

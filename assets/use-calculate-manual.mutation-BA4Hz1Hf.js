import{u as v}from"./useMutation-DXAaWg5m.js";import{a as x}from"./Helmet-DkqbKfy8.js";import{r as c,Q as P,j as s,k as V}from"./index-B_ytu5vn.js";import{S as d,a as f,b as p,c as b,d as N}from"./select-B0JqYmI4.js";import{d as h}from"./button-CGE2OTtm.js";import{u as E}from"./useQuery-Ca2VtRxa.js";import{k as D}from"./index-mj6Aafat.js";import{u as k}from"./index-CkFd4aZp.js";import{f as U}from"./format-percent-Ca7gawAv.js";import{a as j,u as T}from"./use-get-user-options.query-DeLAAZSv.js";function C(e){return x({url:"/Money_Percent_Calculation/Calculation_LevelRate_Priv",params:e})}function Y(){const{mutateAsync:e}=v({mutationFn:C});return{mutationCalculateByLevelRate:e}}function _(){return x({url:"/customer_history/card_type"})}function S(){const{data:e}=E({queryKey:P.CARD_TYPES,queryFn:_}),i=c.useMemo(()=>e!=null&&e.status?D(e.result,"id"):{},[e==null?void 0:e.status]);return{cardTypes:e==null?void 0:e.result,cardTypesByKey:i}}const z=c.forwardRef(function({onChange:e,name:i,readOnly:a,...l},m){const{cardTypes:u}=S();return s.jsxDEV(d,{...l,onValueChange:r=>e({target:{name:i,value:r}}),children:[s.jsxDEV(f,{className:h("h-8",a&&"pointer-events-none"),children:s.jsxDEV(p,{placeholder:"Select a card type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/card-type.field.tsx",lineNumber:35,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/card-type.field.tsx",lineNumber:34,columnNumber:7},this),s.jsxDEV(b,{children:u==null?void 0:u.map(r=>s.jsxDEV(N,{value:r,children:r},r,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/card-type.field.tsx",lineNumber:39,columnNumber:11},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/card-type.field.tsx",lineNumber:37,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/card-type.field.tsx",lineNumber:26,columnNumber:5},this)});function H({name:e,onChange:i,onSelectCard:a,readOnly:l,listCustomerCreditcards:m,...u}){return s.jsxDEV(d,{...u,onValueChange:r=>{a&&a(r),i({target:{name:e,value:r}})},children:[s.jsxDEV(f,{className:h("h-8",l&&"bg-muted pointer-events-none"),children:s.jsxDEV(p,{placeholder:"Select a Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/credit-card.field.tsx",lineNumber:41,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/credit-card.field.tsx",lineNumber:38,columnNumber:7},this),s.jsxDEV(b,{children:m==null?void 0:m.map(({id:r,creditcard_number:t})=>s.jsxDEV(N,{value:String(r),children:t},r,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/credit-card.field.tsx",lineNumber:45,columnNumber:11},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/credit-card.field.tsx",lineNumber:43,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/credit-card.field.tsx",lineNumber:29,columnNumber:5},this)}function F(e){return x({url:"/customer_history/GetListPos_Available_By_ID_Customer_Creditcard",params:e})}function R(e){const{data:i,refetch:a,isFetching:l}=E({queryKey:[...P.POS,"AVAILABLE",e],queryFn:()=>F({id_customer_creditcard:e}),placeholderData:V,gcTime:1e4,enabled:!!e});return{posAvailable:i==null?void 0:i.result,lastPercentChange:i==null?void 0:i.last_percent_charge,isFetchingPosAvailable:l,refetchPosAvailable:a}}function J({onChange:e,idCustomerCreditcard:i,defaultValue:a,onSelectPos:l,readOnly:m,...u}){const[r,t]=c.useState(String(a)),{posAvailable:n,lastPercentChange:g}=R(i);return k(()=>{t("")},[i]),c.useEffect(()=>{n&&l&&l(n==null?void 0:n.find(o=>o.id===a))},[n]),s.jsxDEV("div",{children:[s.jsxDEV(d,{value:r,onValueChange:o=>{t(o),l&&l(n==null?void 0:n.find(y=>y.id===Number(o))),e({target:{name:"id_pos_info",value:o}})},children:[s.jsxDEV(f,{className:h("h-8",m&&"bg-muted pointer-events-none"),children:s.jsxDEV(p,{placeholder:"Select a POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:65,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:62,columnNumber:9},this),s.jsxDEV(b,{children:n==null?void 0:n.map(({id:o,pos_name:y})=>s.jsxDEV(N,{value:String(o),children:y},o,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:69,columnNumber:13},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:67,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:51,columnNumber:7},this),g&&s.jsxDEV("p",{className:"italic mt-1 text-xs",children:["Last percent charge:"," ",s.jsxDEV("strong",{children:U(g/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:78,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:50,columnNumber:5},this)}const W=c.forwardRef(function({onChange:e,name:i,readOnly:a,onSelectRate:l,...m},u){const{rateOptions:r}=j();return s.jsxDEV(d,{...m,onValueChange:t=>{l&&l(t),e({target:{name:i,value:t}})},children:[s.jsxDEV(f,{className:h("h-8",a&&"bg-muted pointer-events-none"),children:s.jsxDEV(p,{placeholder:"Select a rate option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/rate-option.field.tsx",lineNumber:39,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/rate-option.field.tsx",lineNumber:36,columnNumber:7},this),s.jsxDEV(b,{children:r==null?void 0:r.map(({id:t,name:n})=>s.jsxDEV(N,{value:String(t),children:n},t,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/rate-option.field.tsx",lineNumber:43,columnNumber:11},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/rate-option.field.tsx",lineNumber:41,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/rate-option.field.tsx",lineNumber:27,columnNumber:5},this)}),X=c.forwardRef(function({onChange:e,name:i,readOnly:a,...l},m){const{userOptions:u}=T();return s.jsxDEV(d,{...l,onValueChange:r=>e({target:{name:i,value:r}}),children:[s.jsxDEV(f,{className:h("h-8",a&&"pointer-events-none"),children:s.jsxDEV(p,{placeholder:"Select a user option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/user-option.field.tsx",lineNumber:35,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/user-option.field.tsx",lineNumber:34,columnNumber:7},this),s.jsxDEV(b,{children:u==null?void 0:u.map(({id:r,name:t})=>s.jsxDEV(N,{value:String(r),children:t},r,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/user-option.field.tsx",lineNumber:39,columnNumber:11},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/user-option.field.tsx",lineNumber:37,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/user-option.field.tsx",lineNumber:26,columnNumber:5},this)});function B(e){return x({url:"/Money_Percent_Calculation/Calculation_Manual_Priv",params:e})}function Z(){const{mutateAsync:e}=v({mutationFn:B});return{mutationCalculateManual:e}}export{H as F,Y as a,J as b,X as c,W as d,z as e,Z as u};

import{r as l,j as e}from"./index-CJ4aojTS.js";import{z as i,u as C,t as S,F as n}from"./index-D8SDuPEw.js";import{B as j,d as E}from"./button-C7e1d5xZ.js";import{I as _}from"./input-8Nyj8SBJ.js";import{S as F,a as w,b as V,c as I,d as B}from"./select-CRLuTXUs.js";import{L as u}from"./label-DHIBfv39.js";import{C as R,a as q,b as G,c as L,d as O,e as Q,F as z}from"./vn-bank.field-BdRWlDhX.js";import{P as K,a as M,b as Y}from"./popover-CaKhNzu_.js";import{g as A,h as H}from"./react-icons.esm-DY0tv6xu.js";import{u as J}from"./use-get-customers.query-BGm66KQH.js";import{u as W}from"./use-get-customer-by-id.query-CQHJuMHN.js";import{u as X}from"./index-CBzUkH_N.js";const Z=i.object({id:i.coerce.number().optional(),id_customer_info:i.coerce.string().nonempty(),creditcard_number:i.coerce.string().min(4),id_vietnamese_bank:i.coerce.number({invalid_type_error:"Required."}),card_is_stored:i.coerce.number({invalid_type_error:"Required."}).min(0,"Required.").max(1,"Required."),name_on_creditcard:i.string().nonempty(),date_exp_creditcard:i.string().min(4)}),$=l.forwardRef(function({onChange:r,name:d,readOnly:f,...c},x){var k;const[m,b]=l.useState(),[o,t]=l.useState(!1),[p,D]=l.useState(),[v,P]=l.useState(),{customers:g,refetchCustomers:T}=J(v),U=s=>{P(s.target.value)};l.useEffect(()=>{D(document.getElementById(d)||void 0)},[]),X(()=>{T()},[v]);const{customer:y}=W(c.defaultValue?Number(c.defaultValue):void 0),N=g?[m,...g.filter(s=>s.id!==(m==null?void 0:m.id))]:[m];return l.useEffect(()=>{b(y)},[y]),e.jsxDEV("div",{id:d,className:"relative",children:e.jsxDEV(K,{open:o,onOpenChange:s=>{s&&setTimeout(()=>{const a=p==null?void 0:p.querySelector("[data-radix-popper-content-wrapper]");a&&(a.style.position="absolute",a.style.width="100%")},0),t(s)},children:[e.jsxDEV(M,{asChild:!0,children:e.jsxDEV(j,{ref:x,variant:"outline",role:"combobox",className:E("w-full justify-between",f&&"bg-muted pointer-events-none"),children:[m?(k=N==null?void 0:N.find(s=>(s==null?void 0:s.id)===(m==null?void 0:m.id)))==null?void 0:k.full_name:e.jsxDEV("span",{className:"text-muted-foreground font-normal",children:"Select a customer"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:97,columnNumber:15},this),e.jsxDEV(A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:101,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:83,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:82,columnNumber:9},this),e.jsxDEV(Y,{container:p,className:"w-full p-0",children:e.jsxDEV(R,{shouldFilter:!1,children:[e.jsxDEV(q,{placeholder:"Search customer by name or phone...",className:"h-9",value:v,onChangeCapture:U,autoComplete:"off"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:106,columnNumber:13},this),e.jsxDEV(G,{className:"w-full",children:[e.jsxDEV(L,{children:"No customer found."},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:114,columnNumber:15},this),e.jsxDEV(O,{children:N.filter(Boolean).map(s=>e.jsxDEV(Q,{value:String(s==null?void 0:s.id),onSelect:a=>{const h=a===String(m==null?void 0:m.id)?void 0:s;r({target:{name:d,value:h==null?void 0:h.id}}),t(!1),b(h)},children:[s==null?void 0:s.full_name,e.jsxDEV(H,{className:E("ml-auto h-4 w-4",(m==null?void 0:m.id)===(s==null?void 0:s.id)?"opacity-100":"opacity-0")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:133,columnNumber:21},this)]},s==null?void 0:s.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:117,columnNumber:19},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:115,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:113,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:105,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:104,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:64,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/customer.field.tsx",lineNumber:63,columnNumber:5},this)});function ae({defaultValues:r,mutation:d,onClose:f}){const{register:c,handleSubmit:x,formState:{errors:m}}=C({defaultValues:r,resolver:S(Z)}),b=async o=>{(await d(o)).status&&f&&f()};return e.jsxDEV("form",{onSubmit:x(b),className:"space-y-4",autoComplete:"off",children:[e.jsxDEV("div",{children:[e.jsxDEV(u,{htmlFor:"id_customer_info",children:"Customer ID"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:52,columnNumber:9},this),e.jsxDEV($,{...c("id_customer_info"),defaultValue:r!=null&&r.id_customer_info?String(r==null?void 0:r.id_customer_info):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:53,columnNumber:9},this),e.jsxDEV(n,{error:m.id_customer_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:61,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:51,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(u,{htmlFor:"name_on_creditcard",children:"Card name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:65,columnNumber:9},this),e.jsxDEV(_,{placeholder:"Card name",...c("name_on_creditcard")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV(n,{error:m.name_on_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:67,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:64,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(u,{htmlFor:"creditcard_number",children:"Credit card number"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:71,columnNumber:9},this),e.jsxDEV(_,{placeholder:"Credit card number",...c("creditcard_number")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:72,columnNumber:9},this),e.jsxDEV(n,{error:m.creditcard_number},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:70,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(u,{htmlFor:"date_exp_creditcard",children:"Date Expired"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:80,columnNumber:9},this),e.jsxDEV(_,{placeholder:"Date Expired",...c("date_exp_creditcard")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:81,columnNumber:9},this),e.jsxDEV(n,{error:m.date_exp_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:85,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:79,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(u,{htmlFor:"id_vietnamese_bank",children:"VN Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:89,columnNumber:9},this),e.jsxDEV(z,{name:c("id_vietnamese_bank").name,onChange:c("id_vietnamese_bank").onChange,onBlur:c("id_vietnamese_bank").onBlur,defaultValue:typeof(r==null?void 0:r.id_vietnamese_bank)>"u"?r==null?void 0:r.id_vietnamese_bank:String(r==null?void 0:r.id_vietnamese_bank)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:90,columnNumber:9},this),e.jsxDEV(n,{error:m.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:100,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:88,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(u,{htmlFor:"card_is_stored",children:"Card is stored?"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:104,columnNumber:9},this),e.jsxDEV(F,{...c("card_is_stored"),defaultValue:typeof(r==null?void 0:r.card_is_stored)>"u"?r==null?void 0:r.card_is_stored:String(r==null?void 0:r.card_is_stored),onValueChange:o=>c("card_is_stored").onChange({target:{name:"card_is_stored",value:o}}),children:[e.jsxDEV(w,{className:"h-8 w-40",children:e.jsxDEV(V,{placeholder:"Set status"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:119,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:118,columnNumber:11},this),e.jsxDEV(I,{children:[{label:"No",value:"0"},{label:"Yes",value:"1"}].map(({label:o,value:t})=>e.jsxDEV(B,{value:t,children:o},t,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:126,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:121,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:105,columnNumber:9},this),e.jsxDEV(n,{error:m.card_is_stored},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:132,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:103,columnNumber:7},this),e.jsxDEV(j,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:135,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:46,columnNumber:5},this)}export{ae as F};

import{u as v}from"./useMutation-5gSZwTnf.js";import{a as y}from"./Helmet-CQJxFuV9.js";import{r as c,Q as E,j as s,k as V}from"./index-CJ4aojTS.js";import{S as d,a as f,b as p,c as b,d as N}from"./select-CRLuTXUs.js";import{d as h}from"./button-C7e1d5xZ.js";import{u as P}from"./useQuery-DY6s3jgh.js";import{k as D}from"./index-CmOA9PUo.js";import{u as k}from"./index-CBzUkH_N.js";import{a as U,u as j}from"./use-get-user-options.query-DRCFdhhx.js";function T(e){return y({url:"/Money_Percent_Calculation/Calculation_LevelRate_Priv",params:e})}function O(){const{mutateAsync:e}=v({mutationFn:T});return{mutationCalculateByLevelRate:e}}function _(){return y({url:"/customer_history/card_type"})}function C(){const{data:e}=P({queryKey:E.CARD_TYPES,queryFn:_}),i=c.useMemo(()=>e!=null&&e.status?D(e.result,"id"):{},[e==null?void 0:e.status]);return{cardTypes:e==null?void 0:e.result,cardTypesByKey:i}}const w=c.forwardRef(function({onChange:e,name:i,readOnly:a,...l},m){const{cardTypes:u}=C();return s.jsxDEV(d,{...l,onValueChange:r=>e({target:{name:i,value:r}}),children:[s.jsxDEV(f,{className:h("h-8",a&&"pointer-events-none"),children:s.jsxDEV(p,{placeholder:"Select a card type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/card-type.field.tsx",lineNumber:35,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/card-type.field.tsx",lineNumber:34,columnNumber:7},this),s.jsxDEV(b,{children:u==null?void 0:u.map(r=>s.jsxDEV(N,{value:r,children:r},r,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/card-type.field.tsx",lineNumber:39,columnNumber:11},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/card-type.field.tsx",lineNumber:37,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/card-type.field.tsx",lineNumber:26,columnNumber:5},this)});function Y({name:e,onChange:i,onSelectCard:a,readOnly:l,listCustomerCreditcards:m,...u}){return s.jsxDEV(d,{...u,onValueChange:r=>{a&&a(r),i({target:{name:e,value:r}})},children:[s.jsxDEV(f,{className:h("h-8",l&&"bg-muted pointer-events-none"),children:s.jsxDEV(p,{placeholder:"Select a Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/credit-card.field.tsx",lineNumber:41,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/credit-card.field.tsx",lineNumber:38,columnNumber:7},this),s.jsxDEV(b,{children:m==null?void 0:m.map(({id:r,creditcard_number:n})=>s.jsxDEV(N,{value:String(r),children:n},r,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/credit-card.field.tsx",lineNumber:45,columnNumber:11},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/credit-card.field.tsx",lineNumber:43,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/credit-card.field.tsx",lineNumber:29,columnNumber:5},this)}function S(e){return y({url:"/customer_history/GetListPos_Available_By_ID_Customer_Creditcard",params:e})}function F(e){const{data:i,refetch:a,isFetching:l}=P({queryKey:[...E.POS,"AVAILABLE",e],queryFn:()=>S({id_customer_creditcard:e}),placeholderData:V,gcTime:1e4,enabled:!!e});return{posAvailable:i==null?void 0:i.result,lastPercentChange:i==null?void 0:i.last_percent_charge,isFetchingPosAvailable:l,refetchPosAvailable:a}}function z({onChange:e,idCustomerCreditcard:i,defaultValue:a,onSelectPos:l,readOnly:m,...u}){const[r,n]=c.useState(String(a)),{posAvailable:t,lastPercentChange:x}=F(i);return k(()=>{n(void 0)},[i]),c.useEffect(()=>{t&&n(t[0].id?String(t[0].id):void 0)},[t]),c.useEffect(()=>{r&&(e({target:{name:"id_pos_info",value:Number(r)}}),l&&l(t==null?void 0:t.find(o=>o.id===Number(r)),x))},[r,x]),s.jsxDEV(d,{value:r,onValueChange:o=>{n(o),l&&l(t==null?void 0:t.find(g=>g.id===Number(o))),e({target:{name:"id_pos_info",value:o}})},children:[s.jsxDEV(f,{className:h("h-8",m&&"bg-muted pointer-events-none"),children:s.jsxDEV(p,{placeholder:"Select a POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:78,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:75,columnNumber:7},this),s.jsxDEV(b,{children:t==null?void 0:t.map(({id:o,pos_name:g})=>s.jsxDEV(N,{value:String(o),children:g},o,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:82,columnNumber:11},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:80,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/pos-available.field.tsx",lineNumber:64,columnNumber:5},this)}const H=c.forwardRef(function({onChange:e,name:i,readOnly:a,onSelectRate:l,...m},u){const{rateOptions:r}=U();return s.jsxDEV(d,{...m,onValueChange:n=>{l&&l(n),e({target:{name:i,value:n}})},children:[s.jsxDEV(f,{className:h("h-8",a&&"bg-muted pointer-events-none"),children:s.jsxDEV(p,{placeholder:"Select a rate option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/rate-option.field.tsx",lineNumber:39,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/rate-option.field.tsx",lineNumber:36,columnNumber:7},this),s.jsxDEV(b,{children:r==null?void 0:r.map(({id:n,name:t})=>s.jsxDEV(N,{value:String(n),children:t},n,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/rate-option.field.tsx",lineNumber:43,columnNumber:11},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/rate-option.field.tsx",lineNumber:41,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/rate-option.field.tsx",lineNumber:27,columnNumber:5},this)}),J=c.forwardRef(function({onChange:e,name:i,readOnly:a,...l},m){const{userOptions:u}=j();return s.jsxDEV(d,{...l,onValueChange:r=>e({target:{name:i,value:r}}),children:[s.jsxDEV(f,{className:h("h-8",a&&"pointer-events-none"),children:s.jsxDEV(p,{placeholder:"Select a user option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/user-option.field.tsx",lineNumber:35,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/user-option.field.tsx",lineNumber:34,columnNumber:7},this),s.jsxDEV(b,{children:u==null?void 0:u.map(({id:r,name:n})=>s.jsxDEV(N,{value:String(r),children:n},r,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/user-option.field.tsx",lineNumber:39,columnNumber:11},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/user-option.field.tsx",lineNumber:37,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/fields/user-option.field.tsx",lineNumber:26,columnNumber:5},this)});function R(e){return y({url:"/Money_Percent_Calculation/Calculation_Manual_Priv",params:e})}function W(){const{mutateAsync:e}=v({mutationFn:R});return{mutationCalculateManual:e}}export{Y as F,O as a,z as b,J as c,H as d,w as e,W as u};

import{j as e,a as p,Q as o,r as m}from"./index-BfH-S7tZ.js";import{H as V}from"./Helmet-DIdbsKPJ.js";import{u as T,D as k}from"./index-WdKf6Ges.js";import{C as c}from"./cell-text-ChfqjlM6.js";import{D as N}from"./dialog-button.component-DTC0oagy.js";import{B as a,a as d}from"./api-client-qBA4DTQv.js";import{d as U,T as P,P as j}from"./react-icons.esm-XcE--LT7.js";import{D as x}from"./dialog-Dzi-kAH7.js";import{z as n,u as R,t as L,F as f}from"./index-C-n3YrAC.js";import{I as v}from"./input-CO2DN-xV.js";import{L as b}from"./label-BdL-3MWI.js";import{R as h}from"./role.component-Bj6xlVZZ.js";import{u as y}from"./useMutation-CMVljaSD.js";import{u as C}from"./useQuery-D0chCk74.js";import{k as S}from"./index-BNAVSFPS.js";import"./index-CTTdkZ8N.js";import"./index-Vl8o0M7C.js";import"./select-CPwPHD76.js";import"./dropdown-menu-CWT_rE4C.js";import"./use-auth.cache-ClKKv6eS.js";import"./index-VWaDGczM.js";const F=n.object({id:n.coerce.number().optional(),min:n.coerce.number(),max:n.coerce.number(),rate:n.coerce.number()});function g({defaultValues:l,mutation:r,onClose:s}){const{register:t,handleSubmit:u,formState:{errors:i}}=R({defaultValues:l,resolver:L(F)}),E=async D=>{(await r(D)).status&&s&&s()};return e.jsxDEV("form",{onSubmit:u(E),className:"space-y-4",autoComplete:"off",children:[e.jsxDEV("div",{children:[e.jsxDEV(b,{htmlFor:"max",children:"Max"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:43,columnNumber:9},this),e.jsxDEV(v,{placeholder:"Max",...t("max")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:44,columnNumber:9},this),e.jsxDEV(f,{error:i.max},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:45,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:42,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(b,{htmlFor:"min",children:"Min"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:49,columnNumber:9},this),e.jsxDEV(v,{placeholder:"Min",...t("min")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:50,columnNumber:9},this),e.jsxDEV(f,{error:i.min},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:51,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:48,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(b,{htmlFor:"rate",children:"Rate"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:55,columnNumber:9},this),e.jsxDEV(v,{placeholder:"Rate",...t("rate")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:56,columnNumber:9},this),e.jsxDEV(f,{error:i.rate},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:57,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:54,columnNumber:7},this),e.jsxDEV(a,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:60,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:37,columnNumber:5},this)}function M(l){return d({method:"patch",url:"/level_rate",data:l})}function K(){const{mutateAsync:l}=y({mutationFn:M,onSuccess:()=>{p.invalidateQueries({queryKey:o.LEVEL_RATES})}});return{mutationUpdateLevelRate:l}}function _({row:l}){const r=m.useRef(null);function s(){var u;(u=r.current)==null||u.click()}const{mutationUpdateLevelRate:t}=K();return e.jsxDEV(h,{type:"admin",children:e.jsxDEV(N,{title:"Update level rate",className:"max-w-max",trigger:e.jsxDEV(a,{variant:"outline",size:"icon",children:e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:32,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:31,columnNumber:11},this),actionButtons:e.jsxDEV(x,{asChild:!0,children:e.jsxDEV(a,{ref:r,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:37,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:36,columnNumber:11},this),children:e.jsxDEV(g,{defaultValues:l.original,onClose:s,mutation:t},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:43,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:27,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:26,columnNumber:5},this)}function B(l){return d({method:"delete",url:"/level_rate",data:l})}function Q(){const{mutateAsync:l}=y({mutationFn:B,onSuccess:()=>{p.invalidateQueries({queryKey:o.LEVEL_RATES})}});return{mutationDeleteLevelRate:l}}function A({row:l}){const r=m.useRef(null);function s(){var i;(i=r.current)==null||i.click()}const{mutationDeleteLevelRate:t}=Q();async function u(){(await t({id:l.original.id})).status&&s()}return e.jsxDEV(h,{type:"admin",children:e.jsxDEV(N,{title:`Delete level rate: ${l.original.id}`,className:"max-w-max",trigger:e.jsxDEV(a,{variant:"destructive",size:"icon",children:e.jsxDEV(P,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:37,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:36,columnNumber:11},this),actionButtons:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(a,{type:"button",variant:"destructive",onClick:u,children:"Delete"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:42,columnNumber:13},this),e.jsxDEV(x,{asChild:!0,children:e.jsxDEV(a,{ref:r,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:46,columnNumber:15},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:45,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:41,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:32,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:31,columnNumber:5},this)}const w={id:!0,max:!0,min:!0,rate:!0},I=()=>[{accessorKey:"id",header:"ID",enableHiding:!1,cell:l=>e.jsxDEV(c,{children:l.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:22,columnNumber:14},void 0)},{accessorKey:"min",header:"Min",cell:l=>e.jsxDEV(c,{children:l.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:29,columnNumber:14},void 0)},{accessorKey:"max",header:"Max",cell:l=>e.jsxDEV(c,{children:l.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:36,columnNumber:14},void 0)},{accessorKey:"rate",header:"Rate",cell:l=>e.jsxDEV(c,{children:l.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:43,columnNumber:14},void 0)},{id:"actions",enableHiding:!1,cell:({row:l})=>e.jsxDEV("div",{className:"space-x-2",children:[e.jsxDEV(_,{row:l},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:51,columnNumber:9},void 0),e.jsxDEV(A,{row:l},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:52,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:50,columnNumber:7},void 0)}];function q(){return d({url:"/level_rate"})}function H(){const{data:l}=C({queryKey:o.LEVEL_RATES,queryFn:q,gcTime:1e4}),r=m.useMemo(()=>l!=null&&l.status?S(l.result,"id"):{},[l==null?void 0:l.status]);return{levelRates:l==null?void 0:l.result,levelRatesByKey:r}}function z(l){return d({method:"post",url:"/level_rate",data:l})}function Y(){const{mutateAsync:l}=y({mutationFn:z,onSuccess:r=>{r.status&&p.invalidateQueries({queryKey:o.LEVEL_RATES})}});return{mutationCreateLevelRate:l}}function G(){const l=m.useRef(null);function r(){var t;(t=l.current)==null||t.click()}const{mutationCreateLevelRate:s}=Y();return e.jsxDEV(h,{type:"admin",children:e.jsxDEV(N,{title:"Create level rate",className:"max-w-max",trigger:e.jsxDEV(a,{className:"gap-2",children:[e.jsxDEV(j,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:26,columnNumber:13},this)," Create level rate"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:25,columnNumber:11},this),actionButtons:e.jsxDEV(x,{asChild:!0,children:e.jsxDEV(a,{ref:l,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:31,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:30,columnNumber:11},this),children:e.jsxDEV(g,{onClose:r,mutation:s},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:37,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:21,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:20,columnNumber:5},this)}function O(){const[l,r]=T("level-rate-columns",{defaultValue:w}),{levelRates:s}=H(),t=m.useMemo(()=>I(),[]);return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxDEV("h2",{className:"text-3xl font-bold tracking-tight",children:"Level Rates"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:28,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:e.jsxDEV(G,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:30,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:29,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:27,columnNumber:7},this),e.jsxDEV(k,{data:s,columns:t,columnVisibility:l,rowCount:s==null?void 0:s.length,onColumnVisibilityChange:r,hidePagination:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:34,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:26,columnNumber:5},this)}function Ne(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(V,{children:e.jsxDEV("title",{children:"POS System - List of Users"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/pages/level-rates.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/pages/level-rates.page.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(O,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/pages/level-rates.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/pages/level-rates.page.tsx",lineNumber:6,columnNumber:5},this)}export{Ne as default};

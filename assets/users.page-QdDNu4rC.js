import{a as h,Q as b,j as e,r as d}from"./index-BY9egYhW.js";import{a as N,B as f,H as U}from"./Helmet-ClrgHUyv.js";import{R as v}from"./role-redirect.component-BkJbmX6_.js";import{T as k,a as V,b as E,c as P,D as T}from"./data-table-_fX450cL.js";import{C as n}from"./cell-text-DbXrKnYw.js";import{g as D,a as j}from"./get-status.util-DC1d3cyY.js";import{B as S}from"./badge-CW5hcgnt.js";import{U as C,P as w}from"./react-icons.esm-DO47ONlk.js";import{u as x}from"./useMutation-psXQFSIX.js";import{u as F}from"./useQuery-Bst-_8Y-.js";import{k as R}from"./index-DsVbqe2n.js";import{D as _,a as B}from"./dialog-button.component-CSABBZrY.js";import{z as l,u as K,t as I,I as c,F as a}from"./index-CCxijaIC.js";import{S as q,a as Q,b as M,c as A,d as H}from"./select--WQDjXNr.js";import{L as o}from"./label-DsxFzG3k.js";import{R as L}from"./role.component-0bfogwXn.js";import"./index-CGDEZ85P.js";import"./use-auth.cache-Ef2_jiTx.js";import"./index-VWaDGczM.js";import"./index-D85UzQdK.js";import"./dropdown-menu-s5hM6OTG.js";function W(r){return N({method:"patch",url:"/user/set_active",data:r})}function z(){const{mutateAsync:r}=x({mutationFn:W,onSettled:()=>{h.invalidateQueries({queryKey:b.USERS})}});return{mutationUpdateUserStatusById:r}}function Y({status:r,id:u}){const{mutationUpdateUserStatusById:i}=z(),s=()=>{i({id_user:u,active:!r})};return e.jsxDEV(k,{children:e.jsxDEV(V,{children:[e.jsxDEV(E,{asChild:!0,children:e.jsxDEV(f,{variant:"outline",size:"icon",onClick:s,children:e.jsxDEV(C,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:35,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:30,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:29,columnNumber:9},this),e.jsxDEV(P,{children:e.jsxDEV("p",{children:["Change user to ",r?"inactive":"active","."]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:39,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:38,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:28,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:27,columnNumber:5},this)}const G={id:!0,active:!0,full_name:!0,public_id:!1,role:!0,token:!1,username:!0,working_address:!0,phonenumber:!0},O=()=>[{accessorKey:"id",header:"ID",enableHiding:!1,cell:r=>e.jsxDEV(n,{children:r.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:29,columnNumber:14},void 0)},{accessorKey:"username",header:"Username",cell:r=>e.jsxDEV(n,{children:r.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:36,columnNumber:14},void 0)},{accessorKey:"full_name",header:"Full Name",cell:r=>e.jsxDEV(n,{children:r.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:43,columnNumber:14},void 0)},{accessorKey:"role",header:"Role",cell:r=>e.jsxDEV(n,{children:D(r.getValue())},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:51,columnNumber:14},void 0)},{accessorKey:"active",header:"Status",cell:r=>e.jsxDEV("div",{className:"space-x-2",children:[e.jsxDEV(S,{variant:r.getValue()?"success":"destructive",children:j(r.getValue())},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:61,columnNumber:11},void 0),e.jsxDEV(Y,{id:r.row.original.id,status:r.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:65,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:60,columnNumber:9},void 0)},{accessorKey:"phonenumber",header:"Phone",cell:r=>e.jsxDEV(n,{children:r.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:77,columnNumber:14},void 0)},{accessorKey:"working_address",header:"Working Address",cell:r=>e.jsxDEV(n,{children:r.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:84,columnNumber:14},void 0)}];function J(){return N({url:"/user/get_all"})}function X(){const{data:r}=F({queryKey:b.USERS,queryFn:J,gcTime:1e4}),u=d.useMemo(()=>r!=null&&r.status?R(r.result,"id"):{},[r==null?void 0:r.status]);return{users:r==null?void 0:r.result,usersByKey:u}}const Z=l.object({id:l.coerce.number().optional(),role:l.coerce.number({invalid_type_error:"Required."}).min(1,"Required.").max(2,"Required."),username:l.string().nonempty(),full_name:l.string().nonempty(),password:l.string().nonempty(),phonenumber:l.string(),working_address:l.string().nonempty()});function $({defaultValues:r,mutation:u,onClose:i}){const{register:s,handleSubmit:g,formState:{errors:m}}=K({defaultValues:r,resolver:I(Z)}),y=async t=>{(await u(t)).status&&i&&i()};return e.jsxDEV("form",{onSubmit:g(y),className:"space-y-4",autoComplete:"off",children:[e.jsxDEV("div",{children:[e.jsxDEV(o,{htmlFor:"username",children:"Username"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:49,columnNumber:9},this),e.jsxDEV(c,{placeholder:"Username",...s("username")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:50,columnNumber:9},this),e.jsxDEV(a,{error:m.username},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:51,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:48,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{htmlFor:"fullname",children:"Full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:55,columnNumber:9},this),e.jsxDEV(c,{placeholder:"Full name",...s("full_name")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:56,columnNumber:9},this),e.jsxDEV(a,{error:m.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:57,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:54,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:61,columnNumber:9},this),e.jsxDEV(c,{type:"password",placeholder:"Password",...s("password")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:62,columnNumber:9},this),e.jsxDEV(a,{error:m.password},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:67,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:60,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{htmlFor:"role",children:"Role"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:71,columnNumber:9},this),e.jsxDEV(q,{...s("role"),onValueChange:t=>s("role").onChange({target:{name:"role",value:t}}),children:[e.jsxDEV(Q,{className:"h-8 w-20",children:e.jsxDEV(M,{placeholder:"Set role"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:79,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:78,columnNumber:11},this),e.jsxDEV(A,{children:[{role:"User",value:"1"},{role:"Admin",value:"2"}].map(({role:t,value:p})=>e.jsxDEV(H,{value:p,children:t},p,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:86,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:81,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:72,columnNumber:9},this),e.jsxDEV(a,{error:m.role},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:92,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:70,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{htmlFor:"phonenumber",children:"Phone number"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:96,columnNumber:9},this),e.jsxDEV(c,{placeholder:"Phone number",...s("phonenumber")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:97,columnNumber:9},this),e.jsxDEV(a,{error:m.phonenumber},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:98,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:95,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{htmlFor:"working_address",children:"Working address"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:102,columnNumber:9},this),e.jsxDEV(c,{placeholder:"Working address",...s("working_address")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:103,columnNumber:9},this),e.jsxDEV(a,{error:m.working_address},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:104,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:101,columnNumber:7},this),e.jsxDEV(f,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:107,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:43,columnNumber:5},this)}function ee(r){return N({url:"/user/signup",method:"post",data:r})}function re(){const{mutateAsync:r}=x({mutationFn:ee,onSuccess:u=>{u.status&&h.invalidateQueries({queryKey:b.USERS})}});return{mutationSignUp:r}}function se(){const r=d.useRef(null);function u(){var s;(s=r.current)==null||s.click()}const{mutationSignUp:i}=re();return e.jsxDEV(L,{type:"admin",children:e.jsxDEV(_,{title:"Create new user",className:"w-96",trigger:e.jsxDEV(f,{className:"gap-2",children:[e.jsxDEV(w,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:26,columnNumber:13},this)," Create new user"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:25,columnNumber:11},this),actionButtons:e.jsxDEV(B,{asChild:!0,children:e.jsxDEV(f,{ref:r,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:31,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:30,columnNumber:11},this),children:e.jsxDEV($,{onClose:u,mutation:i},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:37,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:21,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:20,columnNumber:5},this)}function ue(){const[r,u]=d.useState(G),{users:i}=X(),s=d.useMemo(()=>O(),[]);return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxDEV("h2",{className:"text-3xl font-bold tracking-tight",children:"Users"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:20,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:e.jsxDEV(se,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:22,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:21,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:19,columnNumber:7},this),e.jsxDEV(T,{data:i,columns:s,columnVisibility:r,rowCount:i==null?void 0:i.length,onColumnVisibilityChange:u,hidePagination:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:26,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:18,columnNumber:5},this)}function Ee(){return e.jsxDEV(v,{type:"admin",children:[e.jsxDEV(U,{children:e.jsxDEV("title",{children:"POS System - List of Users"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:9,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:8,columnNumber:7},this),e.jsxDEV(ue,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:11,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:7,columnNumber:5},this)}export{Ee as default};

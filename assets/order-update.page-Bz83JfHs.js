import{a as W,Q as X,e as ye,r as _,j as e,R as ue,b as We}from"./index-Do2QKNGk.js";import{a as Z,H as Xe}from"./Helmet-C3JY7vFc.js";import{z as t,u as ge,t as _e,F as a}from"./index-CqsOmylt.js";import{B as ae}from"./button-e30OhjXb.js";import{C as Ze,c as Je}from"./card-KijuXElq.js";import{I as n}from"./input-uIjAPASV.js";import{L as o}from"./label-Izo_8SoM.js";import{T as xe}from"./textarea-DqJ4wSeD.js";import{u as ve,a as Te,F as De,b as Ue,c as ke,d as Ee,e as je}from"./use-calculate-manual.mutation-Cv65lUh9.js";import{u as er}from"./use-get-customers.query-D6lvlSJa.js";import{F as Pe}from"./vn-bank.field-BHSwM6Eq.js";import{M as L,A as Y,a as rr}from"./upload.constant-D3d5R5uO.js";import{u as J}from"./useMutation-Br87UrH6.js";import{c as Ve}from"./convert-data-to-form-data.util-CYcIkezp.js";import{S as Ce,a as Se,b as Oe,c as Fe,d as Re}from"./select-BPXcnNhI.js";import{A as sr,a as mr,b as or,c as ir,d as tr,e as ur,f as ar,g as cr,h as nr}from"./alert-dialog-DP4bnzch.js";import{G}from"./grid-images-CxwAYX8d.js";import{u as lr,a as dr}from"./use-get-customer-history-by-id.query-4YenYI2h.js";import{u as we}from"./use-get-customer-by-id.query-DQYiloMc.js";import{u as pr,F as fr}from"./create-customer-cc.feature-r720aIWD.js";import{u as fe}from"./index-D_q78SYS.js";import{f as S}from"./format-currency-DwwnROlR.js";import{f as K}from"./format-percent-Ca7gawAv.js";import{u as Nr}from"./use-auth.cache-Bt1YqsLg.js";import"./useQuery-BMvn2REM.js";import"./index-mhbeUqrQ.js";import"./use-get-user-options.query-Col4TDF3.js";import"./use-get-vn-banks.query-BJnzuB6z.js";import"./popover-CpC0pUnD.js";import"./Combination-JqIHk-Nq.js";import"./index-CqFAmLPO.js";import"./react-icons.esm-Di3OhqCb.js";import"./index-CfmAVdDB.js";import"./dialog-BDrnUkE_.js";import"./dialog-button.component-DN9_VK_t.js";import"./customer-cc.form-DvfrEvG7.js";const Ne=t.object({id:t.coerce.number(),card_type:t.string({required_error:"Required."}),user_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),rate_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_creditcard:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:t.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:t.coerce.number({required_error:"Required."}),notification_coming_due:t.coerce.number(),percent_to_charge:t.coerce.number({required_error:"Required."}).gt(0,"Required."),money_total:t.coerce.number({required_error:"Required."}).gt(0,"Required."),money_applied_percent:t.coerce.number({required_error:"Required."}).gt(0,"Required."),note:t.string(),images_creditcard_due_withdrawn:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>L))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!Y.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>L))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!Y.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function br(r){const m=Ve(r);return Z({method:"patch",url:"/customer_history/order_update_admin",data:m,headers:{"Content-Type":"multipart/form-data"}})}function hr(){const{mutateAsync:r}=J({mutationFn:br,onSuccess:()=>{W.invalidateQueries({queryKey:X.CUSTOMER_HISTORY})}});return{mutationUpdateOrderAdmin:r}}function $(r){return`https://pos.crawl.vn${r}`}function be(r){return r==null?void 0:r.replace(`https://pos.crawl.vn${rr}`,"")}function yr(r){return Z({method:"delete",url:"/customer_history/DeleteImage/images_creditcard_due_withdrawn",data:r})}function gr(){const{mutateAsync:r}=J({mutationFn:yr,onSuccess:m=>{(m.status||m.success)&&W.invalidateQueries({queryKey:X.CUSTOMER_HISTORY})}});return{mutationDeleteOrderCcImage:r}}function _r(r){return Z({method:"delete",url:"/customer_history/DeleteImage/images_transfer_money_to_customer",data:r})}function xr(){const{mutateAsync:r}=J({mutationFn:_r,onSuccess:m=>{(m.status||m.success)&&W.invalidateQueries({queryKey:X.CUSTOMER_HISTORY})}});return{mutationDeleteOrderTransferImage:r}}function vr({defaultValues:r,defaultCustomer:m,defaultCreditCard:u}){var de,pe;const T=ye(),[d,j]=_.useState(),[l,U]=_.useState({...m,list_credit_card:m.list_customer_creditcard}),[c,O]=_.useState(u),[k,P]=_.useState({id:r.id_pos_info}),[F,ee]=_.useState(Number(r.fee)),[M,A]=_.useState(r.percent_to_charge),[p,re]=_.useState(String(r.rate_option)),[b,I]=_.useState("customer"),[y,se]=_.useState(),[B,me]=_.useState(),{register:i,handleSubmit:R,getValues:D,watch:oe,formState:{errors:g}}=ge({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:_e(Ne)}),{mutationCalculateManual:ie}=ve(),{mutationCalculateByLevelRate:H}=Te(),{mutationUpdateOrderAdmin:Q}=hr(),z=async s=>{const h=Ne.parse(s);(await Q(h)).status&&T(ue.CUSTOMER_HISTORIES)},{customers:V,refetchCustomers:f}=er(d),{customer:N}=we(y),{customerCcs:C,refetchCustomerCcs:w}=pr(d),v=s=>{j(s.target.value)},qe=async s=>{j(""),U(void 0),P(void 0),O(void 0),i("id_customer_info").onChange({target:{name:"id_customer_info",value:s.id}}),i("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:0}}),i("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),i("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),U(s)},Me=s=>{j(""),U(void 0),P(void 0),i("id_customer_info").onChange({target:{name:"id_customer_info",value:s.id_customer_info}}),i("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:s.id}}),i("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),i("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),O(s),se(s.id_customer_info)};async function te(s){const h=D("money_total"),E=D("rate_option"),q=D("percent_to_charge");let x={status:!1,fee:0,rate:Number(q),result:0};s&&s==="2"||!s&&E===2?x=await H({money_total:h}):Number(q)>0&&(x=await ie({money_total:h,percent_to_charge:String(q)})),x!=null&&x.status&&(ee(x==null?void 0:x.fee),A(String(x==null?void 0:x.rate)),i("percent_to_charge").onChange({target:{name:"percent_to_charge",value:String(x==null?void 0:x.rate)}}),i("money_applied_percent").onChange({target:{name:"money_applied_percent",value:String(x.result)}}))}const ce=async s=>{var E;const h=(E=l==null?void 0:l.list_credit_card)==null?void 0:E.find(q=>q.id===Number(s));O(h),i("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:h==null?void 0:h.id_vietnamese_bank}}),P(void 0),i("id_pos_info").onChange({target:{name:"id_pos_info",value:0}})},Ae=(s,h)=>{P(s),typeof h=="number"&&me(h)},Ie=s=>{re(s),te(s)},Be=s=>{i("money_total").onChange(s),te()},He=s=>{i("percent_to_charge").onChange(s),A(s.target.value)},ne=()=>te(),{mutationDeleteOrderCcImage:Qe}=gr(),{mutationDeleteOrderTransferImage:ze}=xr(),Le=s=>{Qe({id:String(r.id),name_image_creditcard_due_withdrawn:s})},Ye=s=>{ze({id:String(r.id),name_image_transfer_money_to_customer:s})},{mutationCancelOrder:Ge}=lr(),Ke=async()=>{(await Ge({uuid_id:r.uuid_id})).status&&T(ue.CUSTOMER_HISTORIES)};fe(()=>{b==="customer"?f():w()},[d,b]),fe(()=>{var s;if(N&&b==="credit_card"){N.list_credit_card=N==null?void 0:N.list_customer_creditcard,U(N);const h=(s=l==null?void 0:l.list_credit_card)==null?void 0:s.find(E=>E.id===Number(c==null?void 0:c.id));i("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:h==null?void 0:h.id_vietnamese_bank}})}},[N==null?void 0:N.id,c==null?void 0:c.id,b,ce]);const $e=b==="customer"?"Name or Phone":"Credit card number",le=oe("money_total");return e.jsxDEV("form",{onSubmit:R(z),className:"grid grid-cols-1 lg:grid-cols-2 gap-4 max-w-2xl mx-auto",autoComplete:"off",children:[e.jsxDEV("div",{className:"grid grid-cols-2 lg:col-span-2",children:[e.jsxDEV("div",{children:e.jsxDEV(o,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"customer",checked:b==="customer",onChange:()=>I("customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:368,columnNumber:13},this)," ","Search by Customer"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:367,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:366,columnNumber:9},this),e.jsxDEV("div",{children:e.jsxDEV(o,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"credit_card",checked:b==="credit_card",onChange:()=>I("credit_card")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:380,columnNumber:13},this)," ","Search by Credit card"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:379,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:378,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:365,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 relative",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(n,{placeholder:$e,value:d,onChange:v,className:"flex-1"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:394,columnNumber:11},this),b==="credit_card"&&e.jsxDEV(fr,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:400,columnNumber:42},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:393,columnNumber:9},this),d&&e.jsxDEV(Ze,{className:"absolute top-full mt-2 left-0 w-full z-50",children:e.jsxDEV(Je,{className:"max-h-80 p-2 overflow-auto",children:[b==="credit_card"&&(C==null?void 0:C.map(s=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>Me(s),children:[e.jsxDEV("strong",{children:s.name_on_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:412,columnNumber:21},this)," (",s.creditcard_number,")"]},s.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:407,columnNumber:19},this))),b==="customer"&&(V==null?void 0:V.map(s=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>qe(s),children:[e.jsxDEV("strong",{children:s.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:423,columnNumber:21},this)," (",s.phonenumber,")"]},s.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:418,columnNumber:19},this)))]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:404,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:403,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:392,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:433,columnNumber:9},this),e.jsxDEV(n,{readOnly:!0,value:l==null?void 0:l.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:434,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:432,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:438,columnNumber:9},this),e.jsxDEV("div",{children:[l?e.jsxDEV(De,{...i("id_customer_creditcard"),value:c!=null&&c.id?String(c==null?void 0:c.id):"",listCustomerCreditcards:l==null?void 0:l.list_credit_card,onSelectCard:ce},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:441,columnNumber:13},this):e.jsxDEV(n,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:448,columnNumber:13},this),(c==null?void 0:c.id)&&typeof B=="number"&&e.jsxDEV("p",{className:"italic mt-1 text-xs",children:["Last percent charge:"," ",e.jsxDEV("strong",{children:K(B/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:453,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:451,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:439,columnNumber:9},this),e.jsxDEV(a,{error:g.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:458,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:437,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:462,columnNumber:9},this),c?e.jsxDEV(Ue,{...i("id_pos_info"),idCustomerCreditcard:c.id,onSelectPos:Ae,defaultValue:k==null?void 0:k.id},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:464,columnNumber:11},this):e.jsxDEV(n,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:471,columnNumber:11},this),e.jsxDEV(a,{error:g.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:473,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:461,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:477,columnNumber:9},this),c?e.jsxDEV(Pe,{name:i("id_vietnamese_bank").name,onChange:i("id_vietnamese_bank").onChange,onBlur:i("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:c!=null&&c.id_vietnamese_bank?String(c.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:479,columnNumber:11},this):e.jsxDEV(n,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:491,columnNumber:11},this),e.jsxDEV(a,{error:g.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:493,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:476,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:497,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(n,{...i("money_total"),onChange:Be,onBlur:ne},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:499,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(le))?" ":S(Number(le))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:504,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:498,columnNumber:9},this),e.jsxDEV(a,{error:g.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:510,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:496,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:514,columnNumber:9},this),e.jsxDEV(n,{readOnly:!0,defaultValue:k==null?void 0:k.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:515,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:513,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:519,columnNumber:9},this),l?e.jsxDEV(ke,{...i("user_option"),defaultValue:String(r.user_option)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:521,columnNumber:11},this):e.jsxDEV(n,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:526,columnNumber:11},this),e.jsxDEV(a,{error:g.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:528,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:518,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:532,columnNumber:9},this),l?e.jsxDEV(Ee,{...i("rate_option"),defaultValue:String(r.rate_option),onSelectRate:Ie},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:534,columnNumber:11},this):e.jsxDEV(n,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:540,columnNumber:11},this),e.jsxDEV(a,{error:g.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:542,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:531,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:546,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(n,{...i("percent_to_charge"),value:M,onChange:He,onBlur:ne,readOnly:p==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:548,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(D("percent_to_charge")))?" ":K(Number(D("percent_to_charge"))/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:555,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:547,columnNumber:9},this),e.jsxDEV(a,{error:g.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:561,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:545,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:565,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(n,{readOnly:!0,value:F},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:567,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(F))?" ":S(Number(F))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:568,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:566,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:564,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:575,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(n,{...i("money_applied_percent"),value:D("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:579,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(D("money_applied_percent")))?" ":S(Number(D("money_applied_percent")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:584,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:578,columnNumber:9},this),e.jsxDEV(a,{error:g.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:590,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:574,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:594,columnNumber:9},this),e.jsxDEV(n,{...i("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:595,columnNumber:9},this),e.jsxDEV(a,{error:g.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:596,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:593,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"notification_coming_due",children:"Notification Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:600,columnNumber:9},this),e.jsxDEV(Ce,{...i("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:s=>i("notification_coming_due").onChange({target:{name:"notification_coming_due",value:s}}),children:[e.jsxDEV(Se,{className:"h-8 w-20",children:e.jsxDEV(Oe,{placeholder:"Set notification"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:611,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:610,columnNumber:11},this),e.jsxDEV(Fe,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:s,value:h})=>e.jsxDEV(Re,{value:h,children:s},h,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:618,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:613,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:601,columnNumber:9},this),e.jsxDEV(a,{error:g.notification_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:624,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:599,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:628,columnNumber:9},this),e.jsxDEV(je,{...i("card_type"),defaultValue:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:629,columnNumber:9},this),e.jsxDEV(a,{error:g.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:633,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:627,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2 lg:col-span-2",children:[e.jsxDEV(o,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:637,columnNumber:9},this),e.jsxDEV(xe,{...i("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:638,columnNumber:9},this),e.jsxDEV(a,{error:g.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:639,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:636,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:644,columnNumber:11},this),e.jsxDEV(G,{images:(de=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:de.map($),onDelete:Le,getName:be},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:647,columnNumber:11},this),e.jsxDEV(n,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...i("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:654,columnNumber:11},this),e.jsxDEV(a,{error:g.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:660,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:643,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:666,columnNumber:11},this),e.jsxDEV(G,{images:(pe=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:pe.map($),onDelete:Ye,getName:be},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:669,columnNumber:11},this),e.jsxDEV(n,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...i("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:676,columnNumber:11},this),e.jsxDEV(a,{error:g.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:682,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:665,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:642,columnNumber:7},this),e.jsxDEV("div",{className:"mt-4 grid grid-cols-2 gap-4 lg:col-span-2",children:[r.status!==3&&e.jsxDEV(sr,{children:[e.jsxDEV(mr,{asChild:!0,children:e.jsxDEV(ae,{type:"button",variant:"destructive",children:"Cancel Order"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:692,columnNumber:15},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:691,columnNumber:13},this),e.jsxDEV(or,{children:[e.jsxDEV(ir,{children:[e.jsxDEV(tr,{children:"Are you absolutely sure?"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:698,columnNumber:17},this),e.jsxDEV(ur,{children:"This action cannot be undone. This will permanently cancel this order and can not revert."},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:699,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:697,columnNumber:15},this),e.jsxDEV(ar,{children:[e.jsxDEV(cr,{children:"Cancel"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:705,columnNumber:17},this),e.jsxDEV(nr,{onClick:Ke,children:"Confirm"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:706,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:704,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:696,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:690,columnNumber:11},this),e.jsxDEV(ae,{type:"submit",className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:713,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:688,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:360,columnNumber:5},this)}const he=t.object({id:t.coerce.number(),card_type:t.string({required_error:"Required."}),user_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:t.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:t.coerce.number({required_error:"Required."}),notification_coming_due:t.coerce.number(),note:t.string(),images_creditcard_due_withdrawn:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>L))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!Y.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>L))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!Y.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function Tr(r){const m=Ve(r);return Z({method:"patch",url:"/customer_history/order_update_user",data:m,headers:{"Content-Type":"multipart/form-data"}})}function Dr(){const{mutateAsync:r}=J({mutationFn:Tr,onSuccess:()=>{W.invalidateQueries({queryKey:X.CUSTOMER_HISTORY})}});return{mutationUpdateOrderUser:r}}function Ur({defaultValues:r,defaultCustomer:m,defaultCreditCard:u}){var z,V;const T=ye(),[d,j]=_.useState(u),[l,U]=_.useState({id:r.id_pos_info}),[c,O]=_.useState(Number(r.fee)),[k,P]=_.useState(r.percent_to_charge),[F,ee]=_.useState(String(r.rate_option)),[M,A]=_.useState(),{register:p,handleSubmit:re,getValues:b,watch:I,formState:{errors:y}}=ge({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:_e(he)}),{mutationCalculateManual:se}=ve(),{mutationCalculateByLevelRate:B}=Te(),{mutationUpdateOrderUser:me}=Dr(),i=async f=>{const N=he.parse(f);(await me(N)).status&&T(ue.CUSTOMER_HISTORIES)};async function R(f){const N=b("money_total"),C=b("rate_option"),w=b("percent_to_charge");let v={status:!1,fee:0,rate:Number(w),result:0};f&&f==="2"||!f&&C===2?v=await B({money_total:N}):Number(w)>0&&(v=await se({money_total:N,percent_to_charge:String(w)})),v.status&&(O(v==null?void 0:v.fee),p("percent_to_charge").onChange({target:{name:"percent_to_charge",value:v==null?void 0:v.rate}}),p("money_applied_percent").onChange({target:{name:"money_applied_percent",value:v.result}}))}const D=(f,N)=>{U(f),typeof N=="number"&&A(N)},oe=f=>{ee(f),R(f)},g=f=>{p("money_total").onChange(f),R()},ie=f=>{p("percent_to_charge").onChange(f),P(f.target.value)},H=()=>R(),Q=I("money_total");return e.jsxDEV("form",{onSubmit:re(i),className:"grid grid-cols-1 lg:grid-cols-2 gap-4 max-w-2xl mx-auto",autoComplete:"off",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:169,columnNumber:9},this),e.jsxDEV(n,{readOnly:!0,defaultValue:m==null?void 0:m.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:170,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:168,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:174,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(De,{...p("id_customer_creditcard"),defaultValue:d!=null&&d.id?String(d.id):"",listCustomerCreditcards:m==null?void 0:m.list_customer_creditcard,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:176,columnNumber:11},this),(d==null?void 0:d.id)&&typeof M=="number"&&e.jsxDEV("p",{className:"italic mt-1 text-xs",children:["Last percent charge:"," ",e.jsxDEV("strong",{children:K(M/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:185,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:175,columnNumber:9},this),e.jsxDEV(a,{error:y.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:190,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:173,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:194,columnNumber:9},this),d?e.jsxDEV(Ue,{...p("id_pos_info"),idCustomerCreditcard:d.id,onSelectPos:D,defaultValue:l==null?void 0:l.id,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:196,columnNumber:11},this):e.jsxDEV(n,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:204,columnNumber:11},this),e.jsxDEV(a,{error:y.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:206,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:193,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:210,columnNumber:9},this),d?e.jsxDEV(Pe,{name:p("id_vietnamese_bank").name,onChange:p("id_vietnamese_bank").onChange,onBlur:p("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:d!=null&&d.id_vietnamese_bank?String(d.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:212,columnNumber:11},this):e.jsxDEV(n,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:224,columnNumber:11},this),e.jsxDEV(a,{error:y.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:226,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:209,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:230,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(n,{...p("money_total"),onChange:g,onBlur:H,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:232,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(Q))?" ":S(Number(Q))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:238,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:231,columnNumber:9},this),e.jsxDEV(a,{error:y.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:244,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:229,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:248,columnNumber:9},this),e.jsxDEV(n,{readOnly:!0,defaultValue:l==null?void 0:l.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:249,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:247,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:253,columnNumber:9},this),e.jsxDEV(ke,{...p("user_option"),defaultValue:String(r.user_option)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:254,columnNumber:9},this),e.jsxDEV(a,{error:y.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:258,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:252,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:262,columnNumber:9},this),e.jsxDEV(Ee,{...p("rate_option"),defaultValue:String(r.rate_option),onSelectRate:oe,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:263,columnNumber:9},this),e.jsxDEV(a,{error:y.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:269,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:261,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:273,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(n,{...p("percent_to_charge"),value:k,onChange:ie,onBlur:H,readOnly:F==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:275,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(b("percent_to_charge")))?" ":K(Number(b("percent_to_charge"))/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:282,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:274,columnNumber:9},this),e.jsxDEV(a,{error:y.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:288,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:272,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:292,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(n,{readOnly:!0,value:c},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:294,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(c))?" ":S(Number(c))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:295,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:293,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:291,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:302,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(n,{...p("money_applied_percent"),value:b("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:306,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(b("money_applied_percent")))?" ":S(Number(b("money_applied_percent")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:311,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:305,columnNumber:9},this),e.jsxDEV(a,{error:y.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:317,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:301,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:321,columnNumber:9},this),e.jsxDEV(n,{...p("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:322,columnNumber:9},this),e.jsxDEV(a,{error:y.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:323,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:320,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"notification_coming_due",children:"Notification Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:327,columnNumber:9},this),e.jsxDEV(Ce,{...p("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:f=>p("notification_coming_due").onChange({target:{name:"notification_coming_due",value:f}}),children:[e.jsxDEV(Se,{className:"h-8 w-20",children:e.jsxDEV(Oe,{placeholder:"Set notification"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:338,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:337,columnNumber:11},this),e.jsxDEV(Fe,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:f,value:N})=>e.jsxDEV(Re,{value:N,children:f},N,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:345,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:340,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:328,columnNumber:9},this),e.jsxDEV(a,{error:y.notification_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:351,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:326,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:355,columnNumber:9},this),e.jsxDEV(je,{...p("card_type"),defaultValue:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:356,columnNumber:9},this),e.jsxDEV(a,{error:y.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:360,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:354,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-2 lg:col-span-2",children:[e.jsxDEV(o,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:364,columnNumber:9},this),e.jsxDEV(xe,{...p("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:365,columnNumber:9},this),e.jsxDEV(a,{error:y.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:366,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:363,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:371,columnNumber:11},this),e.jsxDEV(G,{images:(z=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:z.map($)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:374,columnNumber:11},this),e.jsxDEV(n,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...p("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:379,columnNumber:11},this),e.jsxDEV(a,{error:y.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:385,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:370,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:391,columnNumber:11},this),e.jsxDEV(G,{images:(V=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:V.map($)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:394,columnNumber:11},this),e.jsxDEV(n,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...p("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:399,columnNumber:11},this),e.jsxDEV(a,{error:y.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:405,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:390,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:369,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 mt-4",children:e.jsxDEV(ae,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:412,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:411,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:163,columnNumber:5},this)}function kr(){var l;const r=We(),{isAdmin:m}=Nr(),{customerHistory:u}=dr(Number(r.id)),{customer:T}=we((u==null?void 0:u.id_customer_info)||0),d=(l=T==null?void 0:T.list_customer_creditcard)==null?void 0:l.find(U=>U.id===(u==null?void 0:u.id_customer_creditcard)),j=m()?vr:Ur;return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight max-w-2xl mx-auto",children:["Update Order: ",r.id]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:25,columnNumber:7},this),u&&d&&T&&e.jsxDEV(j,{defaultValues:u,defaultCreditCard:d,defaultCustomer:T},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:29,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:24,columnNumber:5},this)}function cs(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Xe,{children:e.jsxDEV("title",{children:"POS System - Order Update"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(kr,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:6,columnNumber:5},this)}export{cs as default};

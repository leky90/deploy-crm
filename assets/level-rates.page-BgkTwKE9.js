import{j as e,P as t,B as o,ae as b,A as N,Q as d,r as n,M as p,aq as V,T as x,ar as D,G as c,E as T,F as U,ap as k,a2 as P,a5 as j}from"./index-CpIRsMsc.js";import{z as m,u as R,t as L,I as f,F as v}from"./index-Bhnnc076.js";import{R as h}from"./role.component-BwPT6qR0.js";const C=m.object({id:m.coerce.number().optional(),min:m.coerce.number(),max:m.coerce.number(),rate:m.coerce.number()});function y({defaultValues:l,mutation:r,onClose:s}){const{register:a,handleSubmit:u,formState:{errors:i}}=R({defaultValues:l,resolver:L(C)}),g=async E=>{(await r(E)).status&&s&&s()};return e.jsxDEV("form",{onSubmit:u(g),className:"space-y-4",autoComplete:"off",children:[e.jsxDEV("div",{children:[e.jsxDEV(f,{placeholder:"Max",...a("max")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:42,columnNumber:9},this),e.jsxDEV(v,{error:i.max},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:43,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:41,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(f,{placeholder:"Min",...a("min")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:47,columnNumber:9},this),e.jsxDEV(v,{error:i.min},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:48,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:46,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(f,{placeholder:"Rate",...a("rate")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:52,columnNumber:9},this),e.jsxDEV(v,{error:i.rate},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:53,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:51,columnNumber:7},this),e.jsxDEV(t,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:56,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/forms/level-rate.form.tsx",lineNumber:36,columnNumber:5},this)}function F(l){return o({method:"patch",url:"/level_rate",data:l})}function S(){const{mutateAsync:l}=b({mutationFn:F,onSuccess:()=>{N.invalidateQueries({queryKey:d.LEVEL_RATES})}});return{mutationUpdateLevelRate:l}}function M({row:l}){const r=n.useRef(null);function s(){var u;(u=r.current)==null||u.click()}const{mutationUpdateLevelRate:a}=S();return e.jsxDEV(h,{type:"admin",children:e.jsxDEV(p,{title:"Update level rate",className:"max-w-max",trigger:e.jsxDEV(t,{variant:"outline",size:"icon",children:e.jsxDEV(V,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:32,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:31,columnNumber:11},this),actionButtons:e.jsxDEV(x,{asChild:!0,children:e.jsxDEV(t,{ref:r,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:37,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:36,columnNumber:11},this),children:e.jsxDEV(y,{defaultValues:l.original,onClose:s,mutation:a},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:43,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:27,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/update-level-rate.feature.tsx",lineNumber:26,columnNumber:5},this)}function K(l){return o({method:"delete",url:"/level_rate",data:l})}function _(){const{mutateAsync:l}=b({mutationFn:K,onSuccess:()=>{N.invalidateQueries({queryKey:d.LEVEL_RATES})}});return{mutationDeleteLevelRate:l}}function A({row:l}){const r=n.useRef(null);function s(){var i;(i=r.current)==null||i.click()}const{mutationDeleteLevelRate:a}=_();async function u(){(await a({id:l.original.id})).status&&s()}return e.jsxDEV(h,{type:"admin",children:e.jsxDEV(p,{title:`Delete level rate: ${l.original.id}`,className:"max-w-max",trigger:e.jsxDEV(t,{variant:"destructive",size:"icon",children:e.jsxDEV(D,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:37,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:36,columnNumber:11},this),actionButtons:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(t,{type:"button",variant:"destructive",onClick:u,children:"Delete"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:42,columnNumber:13},this),e.jsxDEV(x,{asChild:!0,children:e.jsxDEV(t,{ref:r,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:46,columnNumber:15},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:45,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:41,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:32,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/delete-level-rate.feature.tsx",lineNumber:31,columnNumber:5},this)}const B={id:!0,max:!0,min:!0,rate:!0},Q=()=>[{accessorKey:"id",header:"ID",enableHiding:!1,cell:l=>e.jsxDEV(c,{children:l.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:22,columnNumber:14},void 0)},{accessorKey:"max",header:"Max",cell:l=>e.jsxDEV(c,{children:l.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:29,columnNumber:14},void 0)},{accessorKey:"min",header:"Min",cell:l=>e.jsxDEV(c,{children:l.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:36,columnNumber:14},void 0)},{accessorKey:"rate",header:"Rate",cell:l=>e.jsxDEV(c,{children:l.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:43,columnNumber:14},void 0)},{id:"actions",enableHiding:!1,cell:({row:l})=>e.jsxDEV("div",{className:"space-x-2",children:[e.jsxDEV(M,{row:l},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:51,columnNumber:9},void 0),e.jsxDEV(A,{row:l},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:52,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/columns/level-rate.column.tsx",lineNumber:50,columnNumber:7},void 0)}];function q(){return o({url:"/level_rate"})}function w(){const{data:l}=T({queryKey:d.LEVEL_RATES,queryFn:q,gcTime:1e4}),r=n.useMemo(()=>l!=null&&l.status?U(l.result,"id"):{},[l==null?void 0:l.status]);return{levelRates:l==null?void 0:l.result,levelRatesByKey:r}}function I(l){return o({method:"post",url:"/level_rate",data:l})}function z(){const{mutateAsync:l}=b({mutationFn:I,onSuccess:r=>{r.status&&N.invalidateQueries({queryKey:d.LEVEL_RATES})}});return{mutationCreateLevelRate:l}}function H(){const l=n.useRef(null);function r(){var a;(a=l.current)==null||a.click()}const{mutationCreateLevelRate:s}=z();return e.jsxDEV(h,{type:"admin",children:e.jsxDEV(p,{title:"Create level rate",className:"max-w-max",trigger:e.jsxDEV(t,{className:"gap-2",children:[e.jsxDEV(k,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:26,columnNumber:13},this)," Create level rate"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:25,columnNumber:11},this),actionButtons:e.jsxDEV(x,{asChild:!0,children:e.jsxDEV(t,{ref:l,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:31,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:30,columnNumber:11},this),children:e.jsxDEV(y,{onClose:r,mutation:s},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:37,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:21,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/features/create-level-rate.feature.tsx",lineNumber:20,columnNumber:5},this)}function G(){const[l,r]=n.useState(B),{levelRates:s}=w(),a=n.useMemo(()=>Q(),[]);return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxDEV("h2",{className:"text-3xl font-bold tracking-tight",children:"Level Rates"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:24,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:e.jsxDEV(H,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:26,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:25,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:23,columnNumber:7},this),e.jsxDEV(P,{data:s,columns:a,columnVisibility:l,rowCount:s==null?void 0:s.length,onColumnVisibilityChange:r,hidePagination:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:30,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/containers/level-rates.container.tsx",lineNumber:22,columnNumber:5},this)}function W(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(j,{children:e.jsxDEV("title",{children:"CRM - List of Users"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/pages/level-rates.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/pages/level-rates.page.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(G,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/pages/level-rates.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/level-rate/pages/level-rates.page.tsx",lineNumber:6,columnNumber:5},this)}export{W as default};

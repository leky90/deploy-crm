import{a as B,Q as A,r as u,j as e,c as ke,R as Y}from"./index-DtKAakRc.js";import{H as Ee}from"./Helmet-DJWz6KFO.js";import{z as n,u as ee,t as re,F as x}from"./index-BQEYCdRS.js";import{B as I}from"./button-BGRJ0Mg8.js";import{C as Te,c as Pe}from"./card--n9O8Hzu.js";import{I as f}from"./input-B-tuV2mB.js";import{L as m}from"./label-DXZhCP0j.js";import{T as je}from"./textarea-CqS8A-pz.js";import{u as Ue,a as De,F as Ve,b as Ce,c as Se,d as $e,e as Oe,f as Re}from"./use-cancel-order.mutation-CSFvfNYP.js";import{u as qe}from"./use-auth.cache-BNMr8ff_.js";import{u as H}from"./useMutation-Cv1PQFpo.js";import{a as L}from"./api-client-axGC5cZc.js";import{u as Fe}from"./use-get-customers.query-DKEYZv8u.js";import{F as we}from"./vn-bank.field-B298a0BI.js";import{u as Me}from"./use-get-customer-ccs.query-WRk91E5c.js";import{u as Ie}from"./use-get-customer-by-id.query-B3n07Npk.js";import{u as G}from"./index-765l_sCq.js";import{c as Be}from"./convert-data-to-form-data.util-CYcIkezp.js";import{$ as Ae,a as se,_ as Q,d as X}from"./index-BNgByyD0.js";import{$ as He,a as Le,d as W,e as Qe}from"./Combination-DAgetaI7.js";import{b as Ke,d as ze}from"./index-C1vx-IRk.js";import{f as Ye}from"./react-icons.esm-CNQoRNEM.js";import{M as Z,A as J}from"./upload.constant-D3d5R5uO.js";import{f as M}from"./format-currency-DwwnROlR.js";import{f as Ge}from"./format-percent-Ca7gawAv.js";import"./select-BrPI7tth.js";import"./useQuery-BLloIvPX.js";import"./index-j9Y1WKZp.js";import"./use-get-user-options.query-HtCrhQjE.js";import"./use-get-vn-banks.query-BlJ42q5N.js";import"./popover-BK7T-Ivg.js";import"./index-mEQ1JhiA.js";import"./dialog-DRmCyBys.js";function Xe(r){return L({method:"post",url:"/customer_history/order_step1",data:r})}function We(){const{mutateAsync:r}=H({mutationFn:Xe,onSuccess:t=>{t.status&&B.invalidateQueries({queryKey:A.CUSTOMER_HISTORY})}});return{mutationCreateOrderStep1:r}}const Ze=n.object({card_type:n.string({required_error:"Required."}),user_option:n.coerce.number({required_error:"Required."}).gt(0,"Required."),rate_option:n.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_info:n.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:n.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_creditcard:n.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:n.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:n.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:n.coerce.number({required_error:"Required."}),percent_to_charge:n.coerce.number({required_error:"Required."}).gt(0,"Required."),money_total:n.coerce.number({required_error:"Required."}).gt(0,"Required."),money_applied_percent:n.coerce.number({required_error:"Required."}).gt(0,"Required."),note:n.string()});function Je({nextStep:r}){const{auth:t}=qe(),[o,N]=u.useState("customer"),[b,d]=u.useState(),[g,E]=u.useState(),[l,T]=u.useState(),[c,a]=u.useState(),[P,_]=u.useState(),[v,$]=u.useState(),[U,V]=u.useState(""),[R,y]=u.useState("1"),{register:i,handleSubmit:ce,getValues:O,reset:K,formState:{errors:k}}=ee({defaultValues:{days_coming_due:30,id_customer_creditcard:0,id_customer_info:0,id_pos_info:0,id_vietnamese_bank:0,money_applied_percent:"",money_total:"",note:"",percent_to_charge:0,rate_option:1,user_option:0,id_users:t==null?void 0:t.id},resolver:re(Ze)}),{mutationCalculateManual:ue}=Ue(),{mutationCalculateByLevelRate:le}=De(),{mutationCreateOrderStep1:ne}=We(),ae=async s=>{const h=await ne(s);h.status&&r&&r(h)},{customers:q,refetchCustomers:de}=Fe(b),{customer:j}=Ie(g),{customerCcs:F,refetchCustomerCcs:pe}=Me(b),fe=s=>{d(s.target.value)},be=s=>{d(""),K(),T(void 0),_(void 0),a(void 0),i("id_customer_info").onChange({target:{name:"id_customer_info",value:s.id}}),T(s)},he=s=>{d(""),K(),T(void 0),_(void 0),i("id_customer_info").onChange({target:{name:"id_customer_info",value:s.id_customer_info}}),i("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:s.id}}),a(s),E(s.id_customer_info)};async function w(s){const h=O("money_total"),C=O("rate_option"),S=O("percent_to_charge");let p={status:!1,fee:0,rate:S,result:0};s&&s==="2"||!s&&C===2?p=await le({money_total:h}):S>0&&(p=await ue({money_total:h,percent_to_charge:String(S)})),p!=null&&p.status&&($(p==null?void 0:p.fee),V(String(p==null?void 0:p.rate)),i("percent_to_charge").onChange({target:{name:"percent_to_charge",value:String(p==null?void 0:p.rate)}}),i("money_applied_percent").onChange({target:{name:"money_applied_percent",value:String(p.result)}}))}const z=s=>{var C;const h=(C=l==null?void 0:l.list_credit_card)==null?void 0:C.find(S=>S.id===Number(s));a(h),i("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:h==null?void 0:h.id_vietnamese_bank}})},Ne=s=>{_(s)},ye=s=>{y(s),w(s)},xe=s=>{i("money_total").onChange(s),w()},ge=s=>{i("percent_to_charge").onChange(s),V(s.target.value)},_e=()=>w();G(()=>{o==="customer"?de():pe()},[b,o]),G(()=>{var s;if(j&&o==="credit_card"){j.list_credit_card=j==null?void 0:j.list_customer_creditcard,T(j);const h=(s=l==null?void 0:l.list_credit_card)==null?void 0:s.find(C=>C.id===Number(c==null?void 0:c.id));i("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:h==null?void 0:h.id_vietnamese_bank}})}},[j==null?void 0:j.id,c==null?void 0:c.id,o,z]);const ve=o==="customer"?"Name or Phone":"Credit card number";return e.jsxDEV("form",{onSubmit:ce(ae),className:"grid grid-cols-1 lg:grid-cols-2 gap-4",autoComplete:"off",children:[e.jsxDEV("div",{className:"grid grid-cols-2 lg:col-span-2",children:[e.jsxDEV("div",{children:e.jsxDEV(m,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"customer",checked:o==="customer",onChange:()=>N("customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:269,columnNumber:13},this)," ","Search by Customer"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:268,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:267,columnNumber:9},this),e.jsxDEV("div",{children:e.jsxDEV(m,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"credit_card",checked:o==="credit_card",onChange:()=>N("credit_card")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:281,columnNumber:13},this)," ","Search by Credit card"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:280,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:279,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:266,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 relative",children:[e.jsxDEV(f,{placeholder:ve,value:b,onChange:fe},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:294,columnNumber:9},this),b&&e.jsxDEV(Te,{className:"absolute top-full mt-2 left-0 w-full",children:e.jsxDEV(Pe,{className:"max-h-80 p-2 overflow-auto",children:[o==="credit_card"&&(F==null?void 0:F.map(s=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>he(s),children:[e.jsxDEV("strong",{children:s.name_on_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:305,columnNumber:21},this)," (",s.creditcard_number,")"]},s.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:300,columnNumber:19},this))),o==="customer"&&(q==null?void 0:q.map(s=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>be(s),children:[e.jsxDEV("strong",{children:s.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:316,columnNumber:21},this)," (",s.phonenumber,")"]},s.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:311,columnNumber:19},this)))]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:297,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:296,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:293,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:326,columnNumber:9},this),e.jsxDEV(f,{readOnly:!0,defaultValue:l==null?void 0:l.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:327,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:325,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:331,columnNumber:9},this),l?e.jsxDEV(Ve,{...i("id_customer_creditcard"),value:c!=null&&c.id?String(c==null?void 0:c.id):"",listCustomerCreditcards:l==null?void 0:l.list_credit_card,onSelectCard:z},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:333,columnNumber:11},this):e.jsxDEV(f,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:340,columnNumber:11},this),e.jsxDEV(x,{error:k.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:342,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:330,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:346,columnNumber:9},this),c?e.jsxDEV(Ce,{...i("id_pos_info"),idCustomerCreditcard:c==null?void 0:c.id,onSelectPos:Ne},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:348,columnNumber:11},this):e.jsxDEV(f,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:354,columnNumber:11},this),e.jsxDEV(x,{error:k.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:356,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:345,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:360,columnNumber:9},this),c?e.jsxDEV(we,{name:i("id_vietnamese_bank").name,onChange:i("id_vietnamese_bank").onChange,onBlur:i("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:c!=null&&c.id_vietnamese_bank?String(c.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:362,columnNumber:11},this):e.jsxDEV(f,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:374,columnNumber:11},this),e.jsxDEV(x,{error:k.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:376,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:359,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:380,columnNumber:9},this),e.jsxDEV(f,{...i("money_total"),onChange:xe},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:381,columnNumber:9},this),e.jsxDEV(x,{error:k.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:382,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:379,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:386,columnNumber:9},this),e.jsxDEV(f,{readOnly:!0,defaultValue:P==null?void 0:P.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:387,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:385,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:391,columnNumber:9},this),l?e.jsxDEV(Se,{...i("user_option")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:393,columnNumber:11},this):e.jsxDEV(f,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:395,columnNumber:11},this),e.jsxDEV(x,{error:k.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:397,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:390,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:401,columnNumber:9},this),l?e.jsxDEV($e,{...i("rate_option"),defaultValue:"1",onSelectRate:ye},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:403,columnNumber:11},this):e.jsxDEV(f,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:409,columnNumber:11},this),e.jsxDEV(x,{error:k.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:411,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:400,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:415,columnNumber:9},this),e.jsxDEV(f,{...i("percent_to_charge"),value:U,onChange:ge,onBlur:_e,readOnly:R==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:416,columnNumber:9},this),e.jsxDEV(x,{error:k.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:423,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:414,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:427,columnNumber:9},this),e.jsxDEV(f,{readOnly:!0,value:v},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:428,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:426,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:432,columnNumber:9},this),e.jsxDEV(f,{...i("money_applied_percent"),value:O("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:435,columnNumber:9},this),e.jsxDEV(x,{error:k.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:440,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:431,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:444,columnNumber:9},this),e.jsxDEV(f,{...i("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:445,columnNumber:9},this),e.jsxDEV(x,{error:k.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:446,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:443,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:450,columnNumber:9},this),e.jsxDEV(Oe,{...i("card_type")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:451,columnNumber:9},this),e.jsxDEV(x,{error:k.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:452,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:449,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(m,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:456,columnNumber:9},this),e.jsxDEV(je,{...i("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:457,columnNumber:9},this),e.jsxDEV(x,{error:k.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:458,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:455,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 mt-4",children:e.jsxDEV(I,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:462,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:461,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-1.form.tsx",lineNumber:261,columnNumber:5},this)}function er(r){const t=Be(r);return L({method:"post",url:"/customer_history/order_step2",data:t,headers:{"Content-Type":"multipart/form-data"}})}function rr(){const{mutateAsync:r}=H({mutationFn:er,onSuccess:t=>{t.status&&B.invalidateQueries({queryKey:A.CUSTOMER_HISTORY})}});return{mutationCreateOrderStep2:r}}const oe="Checkbox",[sr,Yr]=He(oe),[or,tr]=sr(oe),ir=u.forwardRef((r,t)=>{const{__scopeCheckbox:o,name:N,checked:b,defaultChecked:d,required:g,disabled:E,value:l="on",onCheckedChange:T,...c}=r,[a,P]=u.useState(null),_=Ae(t,y=>P(y)),v=u.useRef(!1),$=a?!!a.closest("form"):!0,[U=!1,V]=Le({prop:b,defaultProp:d,onChange:T}),R=u.useRef(U);return u.useEffect(()=>{const y=a==null?void 0:a.form;if(y){const i=()=>V(R.current);return y.addEventListener("reset",i),()=>y.removeEventListener("reset",i)}},[a,V]),u.createElement(or,{scope:o,state:U,disabled:E},u.createElement(se.button,Q({type:"button",role:"checkbox","aria-checked":D(U)?"mixed":U,"aria-required":g,"data-state":te(U),"data-disabled":E?"":void 0,disabled:E,value:l},c,{ref:_,onKeyDown:W(r.onKeyDown,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:W(r.onClick,y=>{V(i=>D(i)?!0:!i),$&&(v.current=y.isPropagationStopped(),v.current||y.stopPropagation())})})),$&&u.createElement(ur,{control:a,bubbles:!v.current,name:N,value:l,checked:U,required:g,disabled:E,style:{transform:"translateX(-100%)"}}))}),mr="CheckboxIndicator",cr=u.forwardRef((r,t)=>{const{__scopeCheckbox:o,forceMount:N,...b}=r,d=tr(mr,o);return u.createElement(Qe,{present:N||D(d.state)||d.state===!0},u.createElement(se.span,Q({"data-state":te(d.state),"data-disabled":d.disabled?"":void 0},b,{ref:t,style:{pointerEvents:"none",...r.style}})))}),ur=r=>{const{control:t,checked:o,bubbles:N=!0,...b}=r,d=u.useRef(null),g=Ke(o),E=ze(t);return u.useEffect(()=>{const l=d.current,T=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(T,"checked").set;if(g!==o&&a){const P=new Event("click",{bubbles:N});l.indeterminate=D(o),a.call(l,D(o)?!1:o),l.dispatchEvent(P)}},[g,o,N]),u.createElement("input",Q({type:"checkbox","aria-hidden":!0,defaultChecked:D(o)?!1:o},b,{tabIndex:-1,ref:d,style:{...r.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function D(r){return r==="indeterminate"}function te(r){return D(r)?"indeterminate":r?"checked":"unchecked"}const ie=ir,lr=cr,me=u.forwardRef(({className:r,...t},o)=>e.jsxDEV(ie,{ref:o,className:X("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...t,children:e.jsxDEV(lr,{className:X("flex items-center justify-center text-current"),children:e.jsxDEV(Ye,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/ui/checkbox.tsx",lineNumber:22,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/ui/checkbox.tsx",lineNumber:19,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/ui/checkbox.tsx",lineNumber:11,columnNumber:3},void 0));me.displayName=ie.displayName;function nr(r){return L({method:"post",url:"/customer_history/order_step2_1",data:r})}function ar(){const{mutateAsync:r}=H({mutationFn:nr,onSuccess:t=>{t.status&&B.invalidateQueries({queryKey:A.CUSTOMER_HISTORY})}});return{mutationCreateOrderStep2_1:r}}const dr=n.object({uuid_id:n.string({required_error:"Required."}),images_creditcard_due_withdrawn:n.any().refine(r=>{var t;return!(r!=null&&r.length)||!((t=Array.from(r))!=null&&t.some(o=>o.size>Z))},"Max file size is 5MB.").refine(r=>{var t;return!(r!=null&&r.length)||!((t=Array.from(r))!=null&&t.some(o=>!J.includes(o.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:n.any().refine(r=>{var t;return!(r!=null&&r.length)||!((t=Array.from(r))!=null&&t.some(o=>o.size>Z))},"Max file size is 5MB.").refine(r=>{var t;return!(r!=null&&r.length)||!((t=Array.from(r))!=null&&t.some(o=>!J.includes(o.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function pr({resultStep1:r}){const t=ke(),[o,N]=u.useState(!1),{register:b,handleSubmit:d,formState:{errors:g}}=ee({defaultValues:{uuid_id:r.uuid_id},resolver:re(dr)}),{mutationCreateOrderStep2:E}=rr(),{mutationCreateOrderStep2_1:l}=ar(),{mutationCancelOrder:T}=Re(),c=async _=>{let v=null;o?v=await l(_):v=await E(_),v!=null&&v.status&&t(Y.CUSTOMER_HISTORIES)},a=async()=>{(await T({uuid_id:r.uuid_id})).status&&t(Y.CUSTOMER_HISTORIES)},P=_=>{N(_)};return console.log("errors",g),e.jsxDEV("form",{onSubmit:d(c),className:"grid grid-cols-2 gap-4",autoComplete:"off",children:[e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] gap-4 col-span-2",children:[e.jsxDEV(m,{className:"text-muted-foreground",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV("p",{children:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:76,columnNumber:9},this),e.jsxDEV(m,{className:"text-muted-foreground",children:"Card Number"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:78,columnNumber:9},this),e.jsxDEV("p",{children:r.customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:79,columnNumber:9},this),e.jsxDEV(m,{className:"text-muted-foreground",children:"Customer Name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:81,columnNumber:9},this),e.jsxDEV("p",{children:r.customer_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:82,columnNumber:9},this),e.jsxDEV(m,{className:"text-muted-foreground",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:84,columnNumber:9},this),e.jsxDEV("p",{children:M(r.fee)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:85,columnNumber:9},this),e.jsxDEV(m,{className:"text-muted-foreground",children:"Total Money (- Fee)"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:87,columnNumber:9},this),e.jsxDEV("p",{children:M(r.money_applied_percent)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:88,columnNumber:9},this),e.jsxDEV(m,{className:"text-muted-foreground",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:90,columnNumber:9},this),e.jsxDEV("p",{children:M(r.money_total)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:91,columnNumber:9},this),e.jsxDEV(m,{className:"text-muted-foreground",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:93,columnNumber:9},this),e.jsxDEV("p",{children:r.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:94,columnNumber:9},this),e.jsxDEV(m,{className:"text-muted-foreground",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:96,columnNumber:9},this),e.jsxDEV("p",{children:Ge(r.percent_to_charge/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:97,columnNumber:9},this),e.jsxDEV(m,{className:"text-muted-foreground",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:99,columnNumber:9},this),e.jsxDEV("p",{children:r.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:100,columnNumber:9},this),e.jsxDEV(m,{className:"text-muted-foreground",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:102,columnNumber:9},this),e.jsxDEV("p",{children:r.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:103,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(me,{checked:o,onCheckedChange:P,id:"upload-later"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:106,columnNumber:11},this),e.jsxDEV("label",{htmlFor:"upload-later",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Upload later"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:111,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:105,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:74,columnNumber:7},this),!o&&e.jsxDEV("div",{className:"grid col-span-2 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(m,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:123,columnNumber:13},this),e.jsxDEV(f,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...b("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:126,columnNumber:13},this),e.jsxDEV(x,{error:g.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:132,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(m,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:138,columnNumber:13},this),e.jsxDEV(f,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...b("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:141,columnNumber:13},this),e.jsxDEV(x,{error:g.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:147,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:137,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:121,columnNumber:9},this),e.jsxDEV("div",{className:"mt-4 grid grid-cols-2 gap-4 col-span-2",children:[e.jsxDEV(I,{type:"submit",className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:155,columnNumber:9},this),e.jsxDEV(I,{type:"button",className:"w-full",variant:"destructive",onClick:a,children:"Cancel Order"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:158,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:154,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-step-2.form.tsx",lineNumber:69,columnNumber:5},this)}function fr(){const[r,t]=u.useState();function o(N){t(N)}return e.jsxDEV("div",{className:"space-y-4 px-4 mb-10",children:[e.jsxDEV("div",{className:"flex items-center flex-col lg:flex-row justify-between space-y-2",children:e.jsxDEV("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:"Create Order"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:17,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:16,columnNumber:7},this),!r&&e.jsxDEV(Je,{nextStep:o},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:21,columnNumber:24},this),r&&e.jsxDEV(pr,{resultStep1:r},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:22,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-create.container.tsx",lineNumber:15,columnNumber:5},this)}function Gr(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ee,{children:e.jsxDEV("title",{children:"POS System - Order Create"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-create.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-create.page.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(fr,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-create.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-create.page.tsx",lineNumber:6,columnNumber:5},this)}export{Gr as default};

import{B as b,ae as N,A as x,Q as p,j as e,af as y,ag as U,ah as v,P as c,ai as V,aj as k,G as l,J as E,E as T,r as d,F as P,ak as D,al as j,am as S,an as C,ao as w,M as R,ap as _,T as K,a2 as F,a4 as B,a5 as I}from"./index-BwBBNwSb.js";import{g as M,a as q}from"./get-status.util-DC1d3cyY.js";import{z as n,u as Q,t as A,I as o,F as m}from"./index-BYV_BC0H.js";import{R as z}from"./role.component-Jsy-QsQT.js";function G(s){return b({method:"patch",url:"/user",data:s})}function H(){const{mutateAsync:s}=N({mutationFn:G,onSettled:()=>{x.invalidateQueries({queryKey:p.USERS})}});return{mutationUpdateUserStatusById:s}}function Y({status:s,id:u}){const{mutationUpdateUserStatusById:i}=H(),r=()=>{i({id_user:u,active:!s})};return e.jsxDEV(y,{children:e.jsxDEV(U,{children:[e.jsxDEV(v,{asChild:!0,children:e.jsxDEV(c,{variant:"outline",size:"icon",onClick:r,children:e.jsxDEV(V,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:35,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:30,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:29,columnNumber:9},this),e.jsxDEV(k,{children:e.jsxDEV("p",{children:["Change user to ",s?"inactive":"active","."]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:39,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:38,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:28,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/update-user-status.feature.tsx",lineNumber:27,columnNumber:5},this)}const J={id:!0,active:!0,full_name:!0,public_id:!1,role:!0,token:!1,username:!0,working_address:!0,phonenumber:!0},L=()=>[{accessorKey:"id",header:"ID",enableHiding:!1,cell:s=>e.jsxDEV(l,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:29,columnNumber:14},void 0)},{accessorKey:"username",header:"Username",cell:s=>e.jsxDEV(l,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:36,columnNumber:14},void 0)},{accessorKey:"full_name",header:"Full Name",cell:s=>e.jsxDEV(l,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:43,columnNumber:14},void 0)},{accessorKey:"role",header:"Role",cell:s=>e.jsxDEV(l,{children:M(s.getValue())},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:51,columnNumber:14},void 0)},{accessorKey:"active",header:"Status",cell:s=>e.jsxDEV("div",{className:"space-x-2",children:[e.jsxDEV(E,{variant:s.getValue()?"success":"destructive",children:q(s.getValue())},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:61,columnNumber:11},void 0),e.jsxDEV(Y,{id:s.row.original.id,status:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:65,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:60,columnNumber:9},void 0)},{accessorKey:"phonenumber",header:"Phone",cell:s=>e.jsxDEV(l,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:77,columnNumber:14},void 0)},{accessorKey:"working_address",header:"Note",cell:s=>e.jsxDEV(l,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:84,columnNumber:14},void 0)},{accessorKey:"public_id",header:"UUID",cell:s=>e.jsxDEV(l,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:91,columnNumber:14},void 0)},{accessorKey:"token",header:"Token",cell:s=>e.jsxDEV(l,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/columns/user.column.tsx",lineNumber:98,columnNumber:14},void 0)}];function W(){return b({url:"/user/get_all"})}function O(){const{data:s}=T({queryKey:p.USERS,queryFn:W,gcTime:1e4}),u=d.useMemo(()=>s!=null&&s.status?P(s.result,"id"):{},[s==null?void 0:s.status]);return{users:s==null?void 0:s.result,usersByKey:u}}const X=n.object({id:n.coerce.number().optional(),role:n.coerce.number({invalid_type_error:"Required."}).min(1,"Required.").max(2,"Required."),username:n.string().nonempty(),full_name:n.string().nonempty(),password:n.string().nonempty(),phonenumber:n.string(),working_address:n.string().nonempty()});function Z({defaultValues:s,mutation:u,onClose:i}){const{register:r,handleSubmit:h,formState:{errors:a}}=Q({defaultValues:s,resolver:A(X)}),g=async t=>{(await u(t)).status&&i&&i()};return e.jsxDEV("form",{onSubmit:h(g),className:"space-y-4",autoComplete:"off",children:[e.jsxDEV("div",{children:[e.jsxDEV(o,{placeholder:"Username",...r("username")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:48,columnNumber:9},this),e.jsxDEV(m,{error:a.username},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:49,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:47,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{placeholder:"Full name",...r("full_name")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:53,columnNumber:9},this),e.jsxDEV(m,{error:a.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:54,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:52,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{type:"password",placeholder:"Password",...r("password")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:58,columnNumber:9},this),e.jsxDEV(m,{error:a.password},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:63,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:57,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(D,{...r("role"),onValueChange:t=>r("role").onChange({target:{name:"role",value:t}}),children:[e.jsxDEV(j,{className:"h-8 w-[70px]",children:e.jsxDEV(S,{placeholder:"Role"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:74,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:73,columnNumber:11},this),e.jsxDEV(C,{children:[{role:"User",value:"1"},{role:"Admin",value:"2"}].map(({role:t,value:f})=>e.jsxDEV(w,{value:f,children:t},f,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:81,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:76,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:67,columnNumber:9},this),e.jsxDEV(m,{error:a.role},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:87,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:66,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{placeholder:"Phone",...r("phonenumber")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:91,columnNumber:9},this),e.jsxDEV(m,{error:a.phonenumber},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:92,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:90,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(o,{placeholder:"Working address",...r("working_address")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:96,columnNumber:9},this),e.jsxDEV(m,{error:a.working_address},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:97,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:95,columnNumber:7},this),e.jsxDEV(c,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:100,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/forms/user/user.form.tsx",lineNumber:42,columnNumber:5},this)}function $(s){return b({url:"/user/signup",method:"post",data:s})}function ee(){const{mutateAsync:s}=N({mutationFn:$,onSuccess:u=>{u.status&&x.invalidateQueries({queryKey:p.USERS})}});return{mutationSignUp:s}}function se(){const s=d.useRef(null);function u(){var r;(r=s.current)==null||r.click()}const{mutationSignUp:i}=ee();return e.jsxDEV(z,{type:"admin",children:e.jsxDEV(R,{title:"Create new user",className:"w-96",trigger:e.jsxDEV(c,{className:"gap-2",children:[e.jsxDEV(_,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:26,columnNumber:13},this)," Create new user"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:25,columnNumber:11},this),actionButtons:e.jsxDEV(K,{asChild:!0,children:e.jsxDEV(c,{ref:s,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:31,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:30,columnNumber:11},this),children:e.jsxDEV(Z,{onClose:u,mutation:i},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:37,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:21,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/features/create-user.feature.tsx",lineNumber:20,columnNumber:5},this)}function re(){const[s,u]=d.useState(J),{users:i}=O(),r=d.useMemo(()=>L(),[]);return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxDEV("h2",{className:"text-3xl font-bold tracking-tight",children:"Users"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:20,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:e.jsxDEV(se,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:22,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:21,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:19,columnNumber:7},this),e.jsxDEV(F,{data:i,columns:r,columnVisibility:s,rowCount:i==null?void 0:i.length,onColumnVisibilityChange:u,hidePagination:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:26,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/containers/users.container.tsx",lineNumber:18,columnNumber:5},this)}function ae(){return e.jsxDEV(B,{type:"admin",children:[e.jsxDEV(I,{children:e.jsxDEV("title",{children:"CRM - List of Users"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:9,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:8,columnNumber:7},this),e.jsxDEV(re,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:11,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/user/pages/users.page.tsx",lineNumber:7,columnNumber:5},this)}export{ae as default};

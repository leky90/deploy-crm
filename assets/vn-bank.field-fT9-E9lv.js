import{r as n,j as x}from"./index-XwE6gQmn.js";import{u as je}from"./use-get-vn-banks.query-F2BXTXzV.js";import{a as k,d as j,B as ke}from"./button-C4HOWXLM.js";import{P as Me,a as Ae,b as Le}from"./popover-Bx3-hur5.js";import{M as Ve,h as De,g as Pe}from"./react-icons.esm-5SUvy-NO.js";import{f as Fe,e as Ke,$ as qe,a as Ge}from"./index-DrW2nO8L.js";import"./dialog-Cq2VxrqT.js";var me=1,He=.9,Oe=.8,Te=.17,_=.1,Z=.999,Ue=.9999,ze=.99,We=/[\\\/_+.#"@\[\(\{&]/,Je=/[\\\/_+.#"@\[\(\{&]/g,Qe=/[\s-]/,he=/[\s-]/g;function ee(e,l,t,m,o,i,s){if(i===l.length)return o===e.length?me:ze;var f=`${o},${i}`;if(s[f]!==void 0)return s[f];for(var g=m.charAt(i),d=t.indexOf(g,o),c=0,p,E,h,S;d>=0;)p=ee(e,l,t,m,d+1,i+1,s),p>c&&(d===o?p*=me:We.test(e.charAt(d-1))?(p*=Oe,h=e.slice(o,d-1).match(Je),h&&o>0&&(p*=Math.pow(Z,h.length))):Qe.test(e.charAt(d-1))?(p*=He,S=e.slice(o,d-1).match(he),S&&o>0&&(p*=Math.pow(Z,S.length))):(p*=Te,o>0&&(p*=Math.pow(Z,d-o))),e.charAt(d)!==l.charAt(i)&&(p*=Ue)),(p<_&&t.charAt(d-1)===m.charAt(i+1)||m.charAt(i+1)===m.charAt(i)&&t.charAt(d-1)!==m.charAt(i))&&(E=ee(e,l,t,m,d+1,i+2,s),E*_>p&&(p=E*_)),p>c&&(c=p),d=t.indexOf(g,d+1);return s[f]=c,c}function pe(e){return e.toLowerCase().replace(he," ")}function Xe(e,l,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,ee(e,l,pe(e),pe(l),0,0,{})}var q='[cmdk-group=""]',B='[cmdk-group-items=""]',Ye='[cmdk-group-heading=""]',re='[cmdk-item=""]',ve=`${re}:not([aria-disabled="true"])`,te="cmdk-item-select",L="data-value",_e=(e,l,t)=>Xe(e,l,t),ge=n.createContext(void 0),H=()=>n.useContext(ge),be=n.createContext(void 0),le=()=>n.useContext(be),xe=n.createContext(void 0),ye=n.forwardRef((e,l)=>{let t=P(()=>{var r,u;return{search:"",value:(u=(r=e.value)!=null?r:e.defaultValue)!=null?u:"",filtered:{count:0,items:new Map,groups:new Set}}}),m=P(()=>new Set),o=P(()=>new Map),i=P(()=>new Map),s=P(()=>new Set),f=we(e),{label:g,children:d,value:c,onValueChange:p,filter:E,shouldFilter:h,loop:S,disablePointerSelection:$=!1,vimBindings:N=!0,...O}=e,ne=n.useId(),ae=n.useId(),oe=n.useId(),M=n.useRef(null),y=ut();V(()=>{if(c!==void 0){let r=c.trim();t.current.value=r,R.emit()}},[c]),V(()=>{y(6,ue)},[]);let R=n.useMemo(()=>({subscribe:r=>(s.current.add(r),()=>s.current.delete(r)),snapshot:()=>t.current,setState:(r,u,v)=>{var a,b,w;if(!Object.is(t.current[r],u)){if(t.current[r]=u,r==="search")Q(),W(),y(1,J);else if(r==="value"&&(v||y(5,ue),((a=f.current)==null?void 0:a.value)!==void 0)){let I=u??"";(w=(b=f.current).onValueChange)==null||w.call(b,I);return}R.emit()}},emit:()=>{s.current.forEach(r=>r())}}),[]),z=n.useMemo(()=>({value:(r,u,v)=>{var a;u!==((a=i.current.get(r))==null?void 0:a.value)&&(i.current.set(r,{value:u,keywords:v}),t.current.filtered.items.set(r,ie(u,v)),y(2,()=>{W(),R.emit()}))},item:(r,u)=>(m.current.add(r),u&&(o.current.has(u)?o.current.get(u).add(r):o.current.set(u,new Set([r]))),y(3,()=>{Q(),W(),t.current.value||J(),R.emit()}),()=>{i.current.delete(r),m.current.delete(r),t.current.filtered.items.delete(r);let v=F();y(4,()=>{Q(),(v==null?void 0:v.getAttribute("id"))===r&&J(),R.emit()})}),group:r=>(o.current.has(r)||o.current.set(r,new Set),()=>{i.current.delete(r),o.current.delete(r)}),filter:()=>f.current.shouldFilter,label:g||e["aria-label"],disablePointerSelection:$,listId:ne,inputId:oe,labelId:ae,listInnerRef:M}),[]);function ie(r,u){var v,a;let b=(a=(v=f.current)==null?void 0:v.filter)!=null?a:_e;return r?b(r,t.current.search,u):0}function W(){if(!t.current.search||f.current.shouldFilter===!1)return;let r=t.current.filtered.items,u=[];t.current.filtered.groups.forEach(a=>{let b=o.current.get(a),w=0;b.forEach(I=>{let A=r.get(I);w=Math.max(A,w)}),u.push([a,w])});let v=M.current;K().sort((a,b)=>{var w,I;let A=a.getAttribute("id"),T=b.getAttribute("id");return((w=r.get(T))!=null?w:0)-((I=r.get(A))!=null?I:0)}).forEach(a=>{let b=a.closest(B);b?b.appendChild(a.parentElement===b?a:a.closest(`${B} > *`)):v.appendChild(a.parentElement===v?a:a.closest(`${B} > *`))}),u.sort((a,b)=>b[1]-a[1]).forEach(a=>{let b=M.current.querySelector(`${q}[${L}="${encodeURIComponent(a[0])}"]`);b==null||b.parentElement.appendChild(b)})}function J(){let r=K().find(v=>v.getAttribute("aria-disabled")!=="true"),u=r==null?void 0:r.getAttribute(L);R.setState("value",u||void 0)}function Q(){var r,u,v,a;if(!t.current.search||f.current.shouldFilter===!1){t.current.filtered.count=m.current.size;return}t.current.filtered.groups=new Set;let b=0;for(let w of m.current){let I=(u=(r=i.current.get(w))==null?void 0:r.value)!=null?u:"",A=(a=(v=i.current.get(w))==null?void 0:v.keywords)!=null?a:[],T=ie(I,A);t.current.filtered.items.set(w,T),T>0&&b++}for(let[w,I]of o.current)for(let A of I)if(t.current.filtered.items.get(A)>0){t.current.filtered.groups.add(w);break}t.current.filtered.count=b}function ue(){var r,u,v;let a=F();a&&(((r=a.parentElement)==null?void 0:r.firstChild)===a&&((v=(u=a.closest(q))==null?void 0:u.querySelector(Ye))==null||v.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function F(){var r;return(r=M.current)==null?void 0:r.querySelector(`${re}[aria-selected="true"]`)}function K(){var r;return Array.from((r=M.current)==null?void 0:r.querySelectorAll(ve))}function X(r){let u=K()[r];u&&R.setState("value",u.getAttribute(L))}function Y(r){var u;let v=F(),a=K(),b=a.findIndex(I=>I===v),w=a[b+r];(u=f.current)!=null&&u.loop&&(w=b+r<0?a[a.length-1]:b+r===a.length?a[0]:a[b+r]),w&&R.setState("value",w.getAttribute(L))}function ce(r){let u=F(),v=u==null?void 0:u.closest(q),a;for(;v&&!a;)v=r>0?ot(v,q):it(v,q),a=v==null?void 0:v.querySelector(ve);a?R.setState("value",a.getAttribute(L)):Y(r)}let se=()=>X(K().length-1),de=r=>{r.preventDefault(),r.metaKey?se():r.altKey?ce(1):Y(1)},fe=r=>{r.preventDefault(),r.metaKey?X(0):r.altKey?ce(-1):Y(-1)};return n.createElement(k.div,{ref:l,tabIndex:-1,...O,"cmdk-root":"",onKeyDown:r=>{var u;if((u=O.onKeyDown)==null||u.call(O,r),!r.defaultPrevented)switch(r.key){case"n":case"j":{N&&r.ctrlKey&&de(r);break}case"ArrowDown":{de(r);break}case"p":case"k":{N&&r.ctrlKey&&fe(r);break}case"ArrowUp":{fe(r);break}case"Home":{r.preventDefault(),X(0);break}case"End":{r.preventDefault(),se();break}case"Enter":if(!r.nativeEvent.isComposing&&r.keyCode!==229){r.preventDefault();let v=F();if(v){let a=new Event(te);v.dispatchEvent(a)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:z.inputId,id:z.labelId,style:st},g),U(e,r=>n.createElement(be.Provider,{value:R},n.createElement(ge.Provider,{value:z},r))))}),Ze=n.forwardRef((e,l)=>{var t,m;let o=n.useId(),i=n.useRef(null),s=n.useContext(xe),f=H(),g=we(e),d=(m=(t=g.current)==null?void 0:t.forceMount)!=null?m:s==null?void 0:s.forceMount;V(()=>{if(!d)return f.item(o,s==null?void 0:s.id)},[d]);let c=Se(o,i,[e.value,e.children,i],e.keywords),p=le(),E=D(y=>y.value&&y.value===c.current),h=D(y=>d||f.filter()===!1?!0:y.search?y.filtered.items.get(o)>0:!0);n.useEffect(()=>{let y=i.current;if(!(!y||e.disabled))return y.addEventListener(te,S),()=>y.removeEventListener(te,S)},[h,e.onSelect,e.disabled]);function S(){var y,R;$(),(R=(y=g.current).onSelect)==null||R.call(y,c.current)}function $(){p.setState("value",c.current,!0)}if(!h)return null;let{disabled:N,value:O,onSelect:ne,forceMount:ae,keywords:oe,...M}=e;return n.createElement(k.div,{ref:G([i,l]),...M,id:o,"cmdk-item":"",role:"option","aria-disabled":!!N,"aria-selected":!!E,"data-disabled":!!N,"data-selected":!!E,onPointerMove:N||f.disablePointerSelection?void 0:$,onClick:N?void 0:S},e.children)}),Be=n.forwardRef((e,l)=>{let{heading:t,children:m,forceMount:o,...i}=e,s=n.useId(),f=n.useRef(null),g=n.useRef(null),d=n.useId(),c=H(),p=D(h=>o||c.filter()===!1?!0:h.search?h.filtered.groups.has(s):!0);V(()=>c.group(s),[]),Se(s,f,[e.value,e.heading,g]);let E=n.useMemo(()=>({id:s,forceMount:o}),[o]);return n.createElement(k.div,{ref:G([f,l]),...i,"cmdk-group":"",role:"presentation",hidden:p?void 0:!0},t&&n.createElement("div",{ref:g,"cmdk-group-heading":"","aria-hidden":!0,id:d},t),U(e,h=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?d:void 0},n.createElement(xe.Provider,{value:E},h))))}),et=n.forwardRef((e,l)=>{let{alwaysRender:t,...m}=e,o=n.useRef(null),i=D(s=>!s.search);return!t&&!i?null:n.createElement(k.div,{ref:G([o,l]),...m,"cmdk-separator":"",role:"separator"})}),tt=n.forwardRef((e,l)=>{let{onValueChange:t,...m}=e,o=e.value!=null,i=le(),s=D(c=>c.search),f=D(c=>c.value),g=H(),d=n.useMemo(()=>{var c;let p=(c=g.listInnerRef.current)==null?void 0:c.querySelector(`${re}[${L}="${encodeURIComponent(f)}"]`);return p==null?void 0:p.getAttribute("id")},[]);return n.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),n.createElement(k.input,{ref:l,...m,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":g.listId,"aria-labelledby":g.labelId,"aria-activedescendant":d,id:g.inputId,type:"text",value:o?e.value:s,onChange:c=>{o||i.setState("search",c.target.value),t==null||t(c.target.value)}})}),rt=n.forwardRef((e,l)=>{let{children:t,label:m="Suggestions",...o}=e,i=n.useRef(null),s=n.useRef(null),f=H();return n.useEffect(()=>{if(s.current&&i.current){let g=s.current,d=i.current,c,p=new ResizeObserver(()=>{c=requestAnimationFrame(()=>{let E=g.offsetHeight;d.style.setProperty("--cmdk-list-height",E.toFixed(1)+"px")})});return p.observe(g),()=>{cancelAnimationFrame(c),p.unobserve(g)}}},[]),n.createElement(k.div,{ref:G([i,l]),...o,"cmdk-list":"",role:"listbox","aria-label":m,id:f.listId},U(e,g=>n.createElement("div",{ref:G([s,f.listInnerRef]),"cmdk-list-sizer":""},g)))}),lt=n.forwardRef((e,l)=>{let{open:t,onOpenChange:m,overlayClassName:o,contentClassName:i,container:s,...f}=e;return n.createElement(Fe,{open:t,onOpenChange:m},n.createElement(Ke,{container:s},n.createElement(qe,{"cmdk-overlay":"",className:o}),n.createElement(Ge,{"aria-label":e.label,"cmdk-dialog":"",className:i},n.createElement(ye,{ref:l,...f}))))}),nt=n.forwardRef((e,l)=>D(t=>t.filtered.count===0)?n.createElement(k.div,{ref:l,...e,"cmdk-empty":"",role:"presentation"}):null),at=n.forwardRef((e,l)=>{let{progress:t,children:m,label:o="Loading...",...i}=e;return n.createElement(k.div,{ref:l,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},U(e,s=>n.createElement("div",{"aria-hidden":!0},s)))}),C=Object.assign(ye,{List:rt,Item:Ze,Input:tt,Group:Be,Separator:et,Dialog:lt,Empty:nt,Loading:at});function ot(e,l){let t=e.nextElementSibling;for(;t;){if(t.matches(l))return t;t=t.nextElementSibling}}function it(e,l){let t=e.previousElementSibling;for(;t;){if(t.matches(l))return t;t=t.previousElementSibling}}function we(e){let l=n.useRef(e);return V(()=>{l.current=e}),l}var V=typeof window>"u"?n.useEffect:n.useLayoutEffect;function P(e){let l=n.useRef();return l.current===void 0&&(l.current=e()),l}function G(e){return l=>{e.forEach(t=>{typeof t=="function"?t(l):t!=null&&(t.current=l)})}}function D(e){let l=le(),t=()=>e(l.snapshot());return n.useSyncExternalStore(l.subscribe,t,t)}function Se(e,l,t,m=[]){let o=n.useRef(),i=H();return V(()=>{var s;let f=(()=>{var d;for(let c of t){if(typeof c=="string")return c.trim();if(typeof c=="object"&&"current"in c)return c.current?(d=c.current.textContent)==null?void 0:d.trim():o.current}})(),g=m.map(d=>d.trim());i.value(e,f,g),(s=l.current)==null||s.setAttribute(L,f),o.current=f}),o}var ut=()=>{let[e,l]=n.useState(),t=P(()=>new Map);return V(()=>{t.current.forEach(m=>m()),t.current=new Map},[e]),(m,o)=>{t.current.set(m,o),l({})}};function ct(e){let l=e.type;return typeof l=="function"?l(e.props):"render"in l?l.render(e.props):e}function U({asChild:e,children:l},t){return e&&n.isValidElement(l)?n.cloneElement(ct(l),{ref:l.ref},t(l.props.children)):t(l)}var st={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Ee=n.forwardRef(({className:e,...l},t)=>x.jsx(C,{ref:t,className:j("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...l}));Ee.displayName=C.displayName;const Ce=n.forwardRef(({className:e,...l},t)=>x.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[x.jsx(Ve,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),x.jsx(C.Input,{ref:t,className:j("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...l})]}));Ce.displayName=C.Input.displayName;const Re=n.forwardRef(({className:e,...l},t)=>x.jsx(C.List,{ref:t,className:j("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...l}));Re.displayName=C.List.displayName;const Ie=n.forwardRef((e,l)=>x.jsx(C.Empty,{ref:l,className:"py-6 text-center text-sm",...e}));Ie.displayName=C.Empty.displayName;const $e=n.forwardRef(({className:e,...l},t)=>x.jsx(C.Group,{ref:t,className:j("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...l}));$e.displayName=C.Group.displayName;const dt=n.forwardRef(({className:e,...l},t)=>x.jsx(C.Separator,{ref:t,className:j("-mx-1 h-px bg-border",e),...l}));dt.displayName=C.Separator.displayName;const Ne=n.forwardRef(({className:e,...l},t)=>x.jsx(C.Item,{ref:t,className:j("relative","flex","cursor-default","select-none","items-center","rounded-sm","px-2","py-1.5","text-sm","outline-none","aria-selected:bg-accent","aria-selected:text-accent-foreground","data-[disabled=true]:pointer-events-none","data-[disabled=true]:opacity-50",e),...l}));Ne.displayName=C.Item.displayName;const xt=n.forwardRef(function({onChange:e,name:l,readOnly:t,...m},o){var E;const[i,s]=n.useState(!1),[f,g]=n.useState(),[d,c]=n.useState(m.defaultValue),{vnBanks:p}=je();return n.useEffect(()=>{g(document.getElementById(l)||void 0)},[]),x.jsx("div",{id:l,className:"relative",children:x.jsxs(Me,{open:i,onOpenChange:h=>{s(h),h&&setTimeout(()=>{const S=f==null?void 0:f.querySelector("[data-radix-popper-content-wrapper]");S&&(S.style.position="absolute",S.style.width="100%")},0)},children:[x.jsx(Ae,{asChild:!0,children:x.jsxs(ke,{ref:o,variant:"outline",role:"combobox",className:j("w-full justify-between",t&&"bg-muted pointer-events-none"),children:[d?(E=p==null?void 0:p.find(h=>String(h.id)===d))==null?void 0:E.short_name:x.jsx("span",{className:"text-muted-foreground font-normal",children:"Select a VN bank"}),x.jsx(De,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),x.jsx(Le,{container:f,className:"w-full p-0",children:x.jsxs(Ee,{filter:(h,S,$)=>$!=null&&$.some(N=>N.toLowerCase().includes(S.toLowerCase()))?1:0,children:[x.jsx(Ce,{placeholder:"Search bank...",className:"h-9"}),x.jsxs(Re,{className:"w-full",children:[x.jsx(Ie,{children:"No bank found."}),x.jsx($e,{children:p==null?void 0:p.map(h=>x.jsxs(Ne,{value:String(h==null?void 0:h.id),keywords:[h.short_name,h.bank_code],onSelect:S=>{const $=S===d?"":S;c($),e({target:{name:l,value:$}}),s(!1)},children:[h==null?void 0:h.short_name,x.jsx(Pe,{className:j("ml-auto h-4 w-4",d===String(h.id)?"opacity-100":"opacity-0")})]},h==null?void 0:h.id))})]})]})})]})})});export{Ee as C,xt as F,Ce as a,Re as b,Ie as c,$e as d,Ne as e};

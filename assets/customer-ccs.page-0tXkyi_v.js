import{a0 as k,j as e,L as l,ak as g,al as y,am as _,an as v,ao as C,P as b,B as x,ae as E,A as D,Q as h,r as N,M as U,aq as V,T,G as u,E as S,W as F,ap as K,a2 as R,a5 as I}from"./index-ClphHpRy.js";import{z as o,u as q,t as w,I as f,F as a}from"./index-Dov3n5QL.js";const M=o.object({id:o.coerce.number().optional(),id_customer_info:o.coerce.number(),creditcard_number:o.coerce.string().nonempty(),id_vietnamese_bank:o.coerce.number({invalid_type_error:"Required."}),card_is_stored:o.coerce.number({invalid_type_error:"Required."}).min(0,"Required.").max(1,"Required."),name_on_creditcard:o.string().nonempty(),date_exp_creditcard:o.string().nonempty()});function P({defaultValues:r,mutation:s,onClose:m}){const{register:c,handleSubmit:t,formState:{errors:n}}=q({defaultValues:r,resolver:w(M)}),{vnBanks:p}=k(),j=async i=>{(await s(i)).status&&m&&m()};return e.jsxDEV("form",{onSubmit:t(j),className:"space-y-4",autoComplete:"off",children:[e.jsxDEV("div",{children:[e.jsxDEV(l,{htmlFor:"id_customer_info",children:"Customer ID"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:53,columnNumber:9},this),e.jsxDEV(f,{placeholder:"Customer ID",...c("id_customer_info")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:54,columnNumber:9},this),e.jsxDEV(a,{error:n.id_customer_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:55,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:52,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(l,{htmlFor:"name_on_creditcard",children:"Card name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:59,columnNumber:9},this),e.jsxDEV(f,{placeholder:"Card name",...c("name_on_creditcard")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:60,columnNumber:9},this),e.jsxDEV(a,{error:n.name_on_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:61,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:58,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(l,{htmlFor:"creditcard_number",children:"Credit card number"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:65,columnNumber:9},this),e.jsxDEV(f,{placeholder:"Credit card number",...c("creditcard_number")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV(a,{error:n.creditcard_number},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:70,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:64,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(l,{htmlFor:"date_exp_creditcard",children:"Date Expired"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:74,columnNumber:9},this),e.jsxDEV(f,{placeholder:"Date Expired",...c("date_exp_creditcard")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV(a,{error:n.date_exp_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:73,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(l,{htmlFor:"id_vietnamese_bank",children:"VN Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:83,columnNumber:9},this),e.jsxDEV(g,{...c("id_vietnamese_bank"),defaultValue:typeof(r==null?void 0:r.id_vietnamese_bank)>"u"?r==null?void 0:r.id_vietnamese_bank:String(r==null?void 0:r.id_vietnamese_bank),onValueChange:i=>c("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:i}}),children:[e.jsxDEV(y,{className:"h-8",children:e.jsxDEV(_,{placeholder:"Select a VN bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:98,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:97,columnNumber:11},this),e.jsxDEV(v,{children:p==null?void 0:p.map(({id:i,short_name:d})=>e.jsxDEV(C,{value:String(i),children:d},i,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:102,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:84,columnNumber:9},this),e.jsxDEV(a,{error:n.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:108,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:82,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(l,{htmlFor:"card_is_stored",children:"Card is stored?"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:112,columnNumber:9},this),e.jsxDEV(g,{...c("card_is_stored"),defaultValue:typeof(r==null?void 0:r.card_is_stored)>"u"?r==null?void 0:r.card_is_stored:String(r==null?void 0:r.card_is_stored),onValueChange:i=>c("card_is_stored").onChange({target:{name:"card_is_stored",value:i}}),children:[e.jsxDEV(y,{className:"h-8 w-40",children:e.jsxDEV(_,{placeholder:"Set status"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:127,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:126,columnNumber:11},this),e.jsxDEV(v,{children:[{label:"No",value:"0"},{label:"Yes",value:"1"}].map(({label:i,value:d})=>e.jsxDEV(C,{value:d,children:i},d,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:134,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:129,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:113,columnNumber:9},this),e.jsxDEV(a,{error:n.card_is_stored},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:140,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:111,columnNumber:7},this),e.jsxDEV(b,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:143,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-cc/customer-cc.form.tsx",lineNumber:47,columnNumber:5},this)}function Q(r){return x({method:"patch",url:"/customer_creditcard",data:r})}function B(){const{mutateAsync:r}=E({mutationFn:Q,onSuccess:()=>{D.invalidateQueries({queryKey:h.CUSTOMER_CC})}});return{mutationUpdateCustomerCc:r}}function O({row:r}){const s=N.useRef(null);function m(){var t;(t=s.current)==null||t.click()}const{mutationUpdateCustomerCc:c}=B();return e.jsxDEV(U,{title:"Update customer credit card.",className:"w-96",trigger:e.jsxDEV(b,{variant:"outline",size:"icon",children:e.jsxDEV(V,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/update-customer-cc.feature.tsx",lineNumber:30,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/update-customer-cc.feature.tsx",lineNumber:29,columnNumber:9},this),actionButtons:e.jsxDEV(T,{asChild:!0,children:e.jsxDEV(b,{ref:s,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/update-customer-cc.feature.tsx",lineNumber:35,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/update-customer-cc.feature.tsx",lineNumber:34,columnNumber:9},this),children:e.jsxDEV(P,{defaultValues:r.original,onClose:m,mutation:c},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/update-customer-cc.feature.tsx",lineNumber:41,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/update-customer-cc.feature.tsx",lineNumber:25,columnNumber:5},this)}const Y={id:!0,id_customer_info:!0,id_vietnamese_bank:!0,card_is_stored:!0,name_on_creditcard:!0,creditcard_number:!0,date_exp_creditcard:!0,last_update:!1,time_insert:!1},A=({vnBanks:r})=>[{accessorKey:"id",header:"ID",enableHiding:!1,cell:s=>e.jsxDEV(u,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:29,columnNumber:14},void 0)},{accessorKey:"id_customer_info",header:"Customer info ID",cell:s=>e.jsxDEV(u,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:36,columnNumber:14},void 0)},{accessorKey:"id_vietnamese_bank",header:"VN Bank",cell:s=>e.jsxDEV(u,{children:r==null?void 0:r[s.getValue()].short_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:44,columnNumber:9},void 0)},{accessorKey:"card_is_stored",header:"Card Is Stored",cell:s=>e.jsxDEV(u,{children:s.getValue()?"Yes":"No"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:52,columnNumber:14},void 0)},{accessorKey:"name_on_creditcard",header:"Card Name",cell:s=>e.jsxDEV(u,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:59,columnNumber:14},void 0)},{accessorKey:"creditcard_number",header:"CC Number",cell:s=>e.jsxDEV(u,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:66,columnNumber:14},void 0)},{accessorKey:"date_exp_creditcard",header:"Date Expired",cell:s=>e.jsxDEV(u,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:73,columnNumber:14},void 0)},{accessorKey:"last_update",header:"Last update",cell:s=>e.jsxDEV(u,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:80,columnNumber:14},void 0)},{accessorKey:"time_insert",header:"Created time",cell:s=>e.jsxDEV(u,{children:s.getValue()},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:87,columnNumber:14},void 0)},{id:"actions",enableHiding:!1,cell:({row:s})=>e.jsxDEV("div",{className:"space-x-2",children:e.jsxDEV(O,{row:s},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:96,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/columns/customer-cc.column.tsx",lineNumber:95,columnNumber:9},void 0)}];function G(){return x({url:"/customer_creditcard/"})}function H(){const{data:r}=S({queryKey:h.CUSTOMER_CC,queryFn:G,placeholderData:F,gcTime:1e4});return{customerCcs:r==null?void 0:r.result}}function L(r){return x({method:"post",url:"/customer_creditcard/",data:r})}function z(){const{mutateAsync:r}=E({mutationFn:L,onSuccess:s=>{s.status&&D.invalidateQueries({queryKey:h.CUSTOMER_CC})}});return{mutationCreateCustomerCc:r}}function W(){const r=N.useRef(null);function s(){var c;(c=r.current)==null||c.click()}const{mutationCreateCustomerCc:m}=z();return e.jsxDEV(U,{title:"Create new customer credit card",className:"w-96",trigger:e.jsxDEV(b,{className:"gap-2",children:[e.jsxDEV(K,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/create-customer-cc.feature.tsx",lineNumber:24,columnNumber:11},this)," Create new customer credit card"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/create-customer-cc.feature.tsx",lineNumber:23,columnNumber:9},this),actionButtons:e.jsxDEV(T,{asChild:!0,children:e.jsxDEV(b,{ref:r,type:"button",variant:"secondary",children:"Close"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/create-customer-cc.feature.tsx",lineNumber:29,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/create-customer-cc.feature.tsx",lineNumber:28,columnNumber:9},this),children:e.jsxDEV(P,{onClose:s,mutation:m},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/create-customer-cc.feature.tsx",lineNumber:35,columnNumber:7},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/features/create-customer-cc.feature.tsx",lineNumber:19,columnNumber:5},this)}function J(){const[r,s]=N.useState(Y),{customerCcs:m}=H(),{vnBanksByKey:c}=k(),t=N.useMemo(()=>A({vnBanks:c}),[c]);return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxDEV("h2",{className:"text-3xl font-bold tracking-tight",children:"Customer Credit Cards"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-ccs.container.tsx",lineNumber:32,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:e.jsxDEV(W,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-ccs.container.tsx",lineNumber:36,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-ccs.container.tsx",lineNumber:35,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-ccs.container.tsx",lineNumber:31,columnNumber:7},this),e.jsxDEV(R,{data:m,columns:t,columnVisibility:r,rowCount:m==null?void 0:m.length,onColumnVisibilityChange:s,hidePagination:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-ccs.container.tsx",lineNumber:39,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/customer-ccs.container.tsx",lineNumber:30,columnNumber:5},this)}function $(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(I,{children:e.jsxDEV("title",{children:"POS System - Customer Credit Cards"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/customer-ccs.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/customer-ccs.page.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(J,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/customer-ccs.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/customer-ccs.page.tsx",lineNumber:6,columnNumber:5},this)}export{$ as default};

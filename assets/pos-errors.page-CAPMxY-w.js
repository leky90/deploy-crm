import{j as e,a as E,Q as j,r as u,k as O}from"./index-XwE6gQmn.js";import{a as _,H as R}from"./Helmet-DUuvCvTm.js";import{u as F,D as w}from"./index-BsOMOp0z.js";import{C as l}from"./cell-text-H3JibL2T.js";import{D as y}from"./dialog-button.component-msJRMg9P.js";import{B as x}from"./button-C4HOWXLM.js";import{e as K,P as I}from"./react-icons.esm-5SUvy-NO.js";import{D as S}from"./dialog-Cq2VxrqT.js";import{z as i,u as M,t as D,F as d}from"./index-MxbznExh.js";import{I as h}from"./input-BFqvYdSA.js";import{S as k,a as U,b as Q,c as B,d as V}from"./select-BLsJIQQv.js";import{L as p}from"./label-DhoCOihp.js";import{R as f}from"./role.component-D8MaKBYp.js";import{u as P}from"./useMutation-Czv1wBp1.js";import{g as q}from"./get-yes-no.util-C-N_EnQX.js";import{u as z}from"./useQuery-BXJOiSOe.js";import{u as A}from"./index-Dwx9NaXw.js";import"./Combination-WE48jzIv.js";import"./index-DWR91OCR.js";import"./index-CROUqNK7.js";import"./dropdown-menu-oMbE38VB.js";import"./index-DrW2nO8L.js";import"./use-auth.cache-CFuprbIQ.js";const H=i.object({id:i.coerce.number().optional(),active:i.coerce.number(),note:i.coerce.string(),pos_error_code:i.coerce.string(),pos_error_message_en:i.coerce.string(),pos_error_message_vi:i.coerce.string()});function v({defaultValues:r,mutation:s,onClose:n}){const{register:o,handleSubmit:c,formState:{errors:a}}=M({defaultValues:r,resolver:D(H)}),g=async t=>{(await s(t)).status&&n&&n()};return e.jsxs("form",{onSubmit:c(g),className:"space-y-4",autoComplete:"off",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"pos_error_code",children:"POS Error Code"}),e.jsx(h,{placeholder:"POS Error Code",...o("pos_error_code")}),e.jsx(d,{error:a.pos_error_code})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"pos_error_message_en",children:"POS Error Message (EN)"}),e.jsx(h,{placeholder:"POS Error Message (EN)",...o("pos_error_message_en")}),e.jsx(d,{error:a.pos_error_message_en})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"pos_error_message_vi",children:"POS Error Message (VI)"}),e.jsx(h,{placeholder:"POS Error Message (VI)",...o("pos_error_message_vi")}),e.jsx(d,{error:a.pos_error_message_vi})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"note",children:"Note"}),e.jsx(h,{placeholder:"Note",...o("note")}),e.jsx(d,{error:a.note})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"active",children:"Active"}),e.jsxs(k,{...o("active"),defaultValue:typeof(r==null?void 0:r.active)>"u"?r==null?void 0:r.active:String(r==null?void 0:r.active),onValueChange:t=>o("active").onChange({target:{name:"active",value:t}}),children:[e.jsx(U,{className:"h-8 w-40",children:e.jsx(Q,{placeholder:"Set status"})}),e.jsx(B,{children:[{label:"No",value:"0"},{label:"Yes",value:"1"}].map(({label:t,value:m})=>e.jsx(V,{value:m,children:t},m))})]}),e.jsx(d,{error:a.active})]}),e.jsx(x,{className:"w-full",children:"Submit"})]})}function L(r){return _({method:"patch",url:"/pos_error_code",data:r})}function T(){const{mutateAsync:r}=P({mutationFn:L,onSuccess:()=>{E.invalidateQueries({queryKey:j.POS_ERRORS})}});return{mutationUpdatePosError:r}}function Y({row:r}){const s=u.useRef(null);function n(){var c;(c=s.current)==null||c.click()}const{mutationUpdatePosError:o}=T();return e.jsx(f,{type:"admin",children:e.jsx(y,{title:"Update POS error",className:"w-96",trigger:e.jsx(x,{variant:"outline",size:"icon",children:e.jsx(K,{})}),actionButtons:e.jsx(S,{asChild:!0,children:e.jsx(x,{ref:s,type:"button",variant:"secondary",children:"Close"})}),children:e.jsx(v,{defaultValues:r.original,onClose:n,mutation:o})})})}const G={id:!0,active:!0,note:!0,pos_error_code:!0,pos_error_message_en:!0,pos_error_message_vi:!0},J=()=>[{accessorKey:"id",header:"ID",enableHiding:!1,cell:r=>e.jsx(l,{children:r.getValue()})},{accessorKey:"note",header:"Note",cell:r=>e.jsx(l,{children:r.getValue()})},{accessorKey:"active",header:"Active",cell:r=>e.jsx(l,{children:q(r.getValue())})},{accessorKey:"pos_error_code",header:"POS Error Code",cell:r=>e.jsx(l,{children:r.getValue()})},{accessorKey:"pos_error_message_en",header:"Error Message (EN)",cell:r=>e.jsx(l,{children:r.getValue()})},{accessorKey:"pos_error_message_vi",header:"Error Message (VI)",cell:r=>e.jsx(l,{children:r.getValue()})},{id:"actions",enableHiding:!1,cell:({row:r})=>e.jsx(f,{type:"admin",children:e.jsx("div",{className:"space-x-2",children:e.jsx(Y,{row:r})})})}];function W(r){return _({url:"/pos_error_code"+(r.keywords?"/search":""),params:r})}function X(r){const s=[r.page,r.page_limit].join("_"),{data:n,refetch:o}=z({queryKey:[...j.POS_ERRORS,s],queryFn:()=>W(r),placeholderData:O,gcTime:1e3*10});return{posErrors:n,refetchPosErrors:o}}function Z(r){return _({method:"post",url:"/pos_error_code",data:r})}function $(){const{mutateAsync:r}=P({mutationFn:Z,onSuccess:s=>{s.status&&E.invalidateQueries({queryKey:j.POS_ERRORS})}});return{mutationCreatePosError:r}}function ee(){const r=u.useRef(null);function s(){var o;(o=r.current)==null||o.click()}const{mutationCreatePosError:n}=$();return e.jsx(f,{type:"admin",children:e.jsx(y,{title:"Create POS error",className:"w-96",trigger:e.jsxs(x,{className:"gap-2",children:[e.jsx(I,{})," Create POS error"]}),actionButtons:e.jsx(S,{asChild:!0,children:e.jsx(x,{ref:r,type:"button",variant:"secondary",children:"Close"})}),children:e.jsx(v,{defaultValues:{active:1},onClose:s,mutation:n})})})}function re(){const[r,s]=u.useState(),n=u.useDeferredValue(r),[o,c]=u.useState({pageIndex:0,pageSize:10}),[a,g]=F("pos-error-columns",{defaultValue:G}),{posErrors:t,refetchPosErrors:m}=X({keywords:n,page:o.pageIndex+1,page_limit:o.pageSize}),C=u.useMemo(()=>J(),[]),b=N=>{s(N.target.value)};return A(()=>{m()},[n]),e.jsxs("div",{className:"space-y-6 px-4 py-4",children:[e.jsxs("div",{className:"flex items-center flex-col lg:flex-row justify-between space-y-2",children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:"POS Errors"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{type:"search",placeholder:"Search pos errors",value:r,onChange:b}),e.jsx(ee,{})]})]}),e.jsx(w,{data:t==null?void 0:t.result,columns:C,columnVisibility:a,rowCount:t==null?void 0:t.total_data,onColumnVisibilityChange:g,pagination:o,onPaginationChange:c})]})}function Ce(){return e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsx("title",{children:"POS System - List of POS errors"})}),e.jsx(re,{})]})}export{Ce as default};

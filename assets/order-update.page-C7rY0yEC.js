import{a as Y,Q as G,e as le,r as y,j as e,R as se,b as Ge}from"./index-B_ytu5vn.js";import{a as K,H as Ke}from"./Helmet-DkqbKfy8.js";import{z as t,u as de,t as pe,F as a}from"./index-BFOHhKiB.js";import{B as me}from"./button-CGE2OTtm.js";import{C as Le,c as $e}from"./card-3GFku0Wo.js";import{I as c}from"./input-CA_BiuFQ.js";import{L as o}from"./label-WR9_UZlh.js";import{T as fe}from"./textarea-8rVszr12.js";import{u as Ne,a as be,F as he,b as ge,c as ye,d as _e,e as xe}from"./use-calculate-manual.mutation-BA4Hz1Hf.js";import{u as We}from"./use-get-customers.query-BqaP7RzA.js";import{F as ve}from"./vn-bank.field-CSkirJhR.js";import{M as B,A as H,a as Xe}from"./upload.constant-D3d5R5uO.js";import{u as L}from"./useMutation-DXAaWg5m.js";import{c as Te}from"./convert-data-to-form-data.util-CYcIkezp.js";import{S as De,a as Ue,b as ke,c as Ee,d as je}from"./select-B0JqYmI4.js";import{u as Ze,A as Je,a as er,b as rr,c as sr,d as mr,e as ir,f as or,g as tr,h as ur}from"./alert-dialog-BFif2bNQ.js";import{G as Q}from"./grid-images-tv-f1t4S.js";import{u as Pe}from"./use-get-customer-by-id.query-BFzWkrdl.js";import{u as ar}from"./use-get-customer-ccs.query-h6vuv9DI.js";import{u as ue}from"./index-CkFd4aZp.js";import{f as O}from"./format-currency-DwwnROlR.js";import{f as Ve}from"./format-percent-Ca7gawAv.js";import{u as cr}from"./use-get-customer-history-by-id.query-ChMKpCq6.js";import{u as nr}from"./use-auth.cache-BJVokTpr.js";import"./useQuery-Ca2VtRxa.js";import"./index-mj6Aafat.js";import"./use-get-user-options.query-DeLAAZSv.js";import"./use-get-vn-banks.query-DktlonYl.js";import"./popover-CEDqvTVI.js";import"./Combination-CkrLVZbR.js";import"./index-D8nAB3w6.js";import"./index-C7tRwe3w.js";import"./react-icons.esm-DmndkTF9.js";import"./index-pSuU6xnM.js";import"./dialog-BY_S0piy.js";const ae=t.object({id:t.coerce.number(),card_type:t.string({required_error:"Required."}),user_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),rate_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_customer_creditcard:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:t.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:t.coerce.number({required_error:"Required."}),notification_coming_due:t.coerce.number(),percent_to_charge:t.coerce.number({required_error:"Required."}).gt(0,"Required."),money_total:t.coerce.number({required_error:"Required."}).gt(0,"Required."),money_applied_percent:t.coerce.number({required_error:"Required."}).gt(0,"Required."),note:t.string(),images_creditcard_due_withdrawn:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function lr(r){const m=Te(r);return K({method:"patch",url:"/customer_history/order_update_admin",data:m,headers:{"Content-Type":"multipart/form-data"}})}function dr(){const{mutateAsync:r}=L({mutationFn:lr,onSuccess:()=>{Y.invalidateQueries({queryKey:G.CUSTOMER_HISTORY})}});return{mutationUpdateOrderAdmin:r}}function z(r){return`https://pos.crawl.vn${r}`}function ce(r){return r==null?void 0:r.replace(`https://pos.crawl.vn${Xe}`,"")}function pr(r){return K({method:"delete",url:"/customer_history/DeleteImage/images_creditcard_due_withdrawn",data:r})}function fr(){const{mutateAsync:r}=L({mutationFn:pr,onSuccess:m=>{(m.status||m.success)&&Y.invalidateQueries({queryKey:G.CUSTOMER_HISTORY})}});return{mutationDeleteOrderCcImage:r}}function Nr(r){return K({method:"delete",url:"/customer_history/DeleteImage/images_transfer_money_to_customer",data:r})}function br(){const{mutateAsync:r}=L({mutationFn:Nr,onSuccess:m=>{(m.status||m.success)&&Y.invalidateQueries({queryKey:G.CUSTOMER_HISTORY})}});return{mutationDeleteOrderTransferImage:r}}function hr({defaultValues:r,defaultCustomer:m,defaultCreditCard:u}){var oe,te;const U=le(),[f,C]=y.useState(),[n,E]=y.useState({...m,list_credit_card:m.list_customer_creditcard}),[l,R]=y.useState(u),[j,S]=y.useState({id:r.id_pos_info}),[F,$]=y.useState(Number(r.fee)),[d,w]=y.useState(r.percent_to_charge),[_,N]=y.useState(String(r.rate_option)),[D,M]=y.useState("customer"),[W,X]=y.useState(),{register:i,handleSubmit:Z,getValues:x,formState:{errors:b}}=de({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:pe(ae)}),{mutationCalculateManual:J}=Ne(),{mutationCalculateByLevelRate:ee}=be(),{mutationUpdateOrderAdmin:A}=dr(),I=async s=>{const h=ae.parse(s);(await A(h)).status&&U(se.CUSTOMER_HISTORIES)},{customers:p,refetchCustomers:k}=We(f),{customer:v}=Pe(W),{customerCcs:P,refetchCustomerCcs:T}=ar(f),Ce=s=>{C(s.target.value)},Se=async s=>{C(""),E(void 0),S(void 0),R(void 0),i("id_customer_info").onChange({target:{name:"id_customer_info",value:s.id}}),i("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:0}}),i("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),i("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),E(s)},Oe=s=>{C(""),E(void 0),S(void 0),i("id_customer_info").onChange({target:{name:"id_customer_info",value:s.id_customer_info}}),i("id_customer_creditcard").onChange({target:{name:"id_customer_creditcard",value:s.id}}),i("id_pos_info").onChange({target:{name:"id_pos_info",value:0}}),i("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:0}}),R(s),X(s.id_customer_info)};async function re(s){const h=x("money_total"),V=x("rate_option"),q=x("percent_to_charge");let g={status:!1,fee:0,rate:Number(q),result:0};s&&s==="2"||!s&&V===2?g=await ee({money_total:h}):Number(q)>0&&(g=await J({money_total:h,percent_to_charge:String(q)})),g!=null&&g.status&&($(g==null?void 0:g.fee),w(String(g==null?void 0:g.rate)),i("percent_to_charge").onChange({target:{name:"percent_to_charge",value:String(g==null?void 0:g.rate)}}),i("money_applied_percent").onChange({target:{name:"money_applied_percent",value:String(g.result)}}))}const ie=async s=>{var V;const h=(V=n==null?void 0:n.list_credit_card)==null?void 0:V.find(q=>q.id===Number(s));R(h),i("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:h==null?void 0:h.id_vietnamese_bank}}),S(void 0),i("id_pos_info").onChange({target:{name:"id_pos_info",value:0}})},Re=s=>{S(s)},Fe=s=>{N(s),re(s)},qe=s=>{i("money_total").onChange(s),re()},we=s=>{i("percent_to_charge").onChange(s),w(s.target.value)},Me=()=>re(),{mutationDeleteOrderCcImage:Ae}=fr(),{mutationDeleteOrderTransferImage:Ie}=br(),Be=s=>{Ae({id:String(r.id),name_image_creditcard_due_withdrawn:s})},He=s=>{Ie({id:String(r.id),name_image_transfer_money_to_customer:s})},{mutationCancelOrder:Qe}=Ze(),ze=async()=>{(await Qe({uuid_id:r.uuid_id})).status&&U(se.CUSTOMER_HISTORIES)};ue(()=>{D==="customer"?k():T()},[f,D]),ue(()=>{var s;if(v&&D==="credit_card"){v.list_credit_card=v==null?void 0:v.list_customer_creditcard,E(v);const h=(s=n==null?void 0:n.list_credit_card)==null?void 0:s.find(V=>V.id===Number(l==null?void 0:l.id));i("id_vietnamese_bank").onChange({target:{name:"id_vietnamese_bank",value:h==null?void 0:h.id_vietnamese_bank}})}},[v==null?void 0:v.id,l==null?void 0:l.id,D,ie]);const Ye=D==="customer"?"Name or Phone":"Credit card number";return e.jsxDEV("form",{onSubmit:Z(I),className:"grid grid-cols-1 lg:grid-cols-2 gap-4",autoComplete:"off",children:[e.jsxDEV("div",{className:"grid grid-cols-2 lg:col-span-2",children:[e.jsxDEV("div",{children:e.jsxDEV(o,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"customer",checked:D==="customer",onChange:()=>M("customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:361,columnNumber:13},this)," ","Search by Customer"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:360,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:359,columnNumber:9},this),e.jsxDEV("div",{children:e.jsxDEV(o,{className:"items-center flex gap-1",children:[e.jsxDEV("input",{name:"searchBy",type:"radio",value:"credit_card",checked:D==="credit_card",onChange:()=>M("credit_card")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:373,columnNumber:13},this)," ","Search by Credit card"]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:372,columnNumber:11},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:371,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:358,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 relative",children:[e.jsxDEV(c,{placeholder:Ye,value:f,onChange:Ce},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:386,columnNumber:9},this),f&&e.jsxDEV(Le,{className:"absolute top-full mt-2 left-0 w-full z-50",children:e.jsxDEV($e,{className:"max-h-80 p-2 overflow-auto",children:[D==="credit_card"&&(P==null?void 0:P.map(s=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>Oe(s),children:[e.jsxDEV("strong",{children:s.name_on_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:397,columnNumber:21},this)," (",s.creditcard_number,")"]},s.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:392,columnNumber:19},this))),D==="customer"&&(p==null?void 0:p.map(s=>e.jsxDEV("div",{className:"flex items-center gap-2 hover:bg-muted p-1 px-2 cursor-pointer",onClick:()=>Se(s),children:[e.jsxDEV("strong",{children:s.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:408,columnNumber:21},this)," (",s.phonenumber,")"]},s.id,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:403,columnNumber:19},this)))]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:389,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:388,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:385,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:418,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,value:n==null?void 0:n.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:419,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:417,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:423,columnNumber:9},this),n?e.jsxDEV(he,{...i("id_customer_creditcard"),value:l!=null&&l.id?String(l==null?void 0:l.id):"",listCustomerCreditcards:n==null?void 0:n.list_credit_card,onSelectCard:ie},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:425,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:432,columnNumber:11},this),e.jsxDEV(a,{error:b.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:434,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:422,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:438,columnNumber:9},this),l?e.jsxDEV(ge,{...i("id_pos_info"),idCustomerCreditcard:l.id,onSelectPos:Re,defaultValue:j==null?void 0:j.id},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:440,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:447,columnNumber:11},this),e.jsxDEV(a,{error:b.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:449,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:437,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:453,columnNumber:9},this),l?e.jsxDEV(ve,{name:i("id_vietnamese_bank").name,onChange:i("id_vietnamese_bank").onChange,onBlur:i("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:l!=null&&l.id_vietnamese_bank?String(l.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:455,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:467,columnNumber:11},this),e.jsxDEV(a,{error:b.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:469,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:452,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:473,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...i("money_total"),onChange:qe},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:475,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(x("money_total")))?" ":O(Number(x("money_total")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:476,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:474,columnNumber:9},this),e.jsxDEV(a,{error:b.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:482,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:472,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:486,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,defaultValue:j==null?void 0:j.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:487,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:485,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:491,columnNumber:9},this),n?e.jsxDEV(ye,{...i("user_option"),defaultValue:String(r.user_option)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:493,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:498,columnNumber:11},this),e.jsxDEV(a,{error:b.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:500,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:490,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:504,columnNumber:9},this),n?e.jsxDEV(_e,{...i("rate_option"),defaultValue:String(r.rate_option),onSelectRate:Fe},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:506,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:512,columnNumber:11},this),e.jsxDEV(a,{error:b.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:514,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:503,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:518,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...i("percent_to_charge"),value:d,onChange:we,onBlur:Me,readOnly:_==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:520,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(x("percent_to_charge")))?" ":Ve(Number(x("percent_to_charge"))/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:527,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:519,columnNumber:9},this),e.jsxDEV(a,{error:b.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:533,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:517,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:537,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{readOnly:!0,value:F},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:539,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(F))?" ":O(Number(F))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:540,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:538,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:536,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:547,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...i("money_applied_percent"),value:x("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:551,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(x("money_applied_percent")))?" ":O(Number(x("money_applied_percent")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:556,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:550,columnNumber:9},this),e.jsxDEV(a,{error:b.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:562,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:546,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:566,columnNumber:9},this),e.jsxDEV(c,{...i("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:567,columnNumber:9},this),e.jsxDEV(a,{error:b.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:568,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:565,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"notification_coming_due",children:"Notification Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:572,columnNumber:9},this),e.jsxDEV(De,{...i("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:s=>i("notification_coming_due").onChange({target:{name:"notification_coming_due",value:s}}),children:[e.jsxDEV(Ue,{className:"h-8 w-20",children:e.jsxDEV(ke,{placeholder:"Set notification"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:583,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:582,columnNumber:11},this),e.jsxDEV(Ee,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:s,value:h})=>e.jsxDEV(je,{value:h,children:s},h,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:590,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:585,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:573,columnNumber:9},this),e.jsxDEV(a,{error:b.notification_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:596,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:571,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:600,columnNumber:9},this),e.jsxDEV(xe,{...i("card_type"),defaultValue:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:601,columnNumber:9},this),e.jsxDEV(a,{error:b.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:605,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:599,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:609,columnNumber:9},this),e.jsxDEV(fe,{...i("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:610,columnNumber:9},this),e.jsxDEV(a,{error:b.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:611,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:608,columnNumber:7},this),e.jsxDEV("div",{className:"grid lg:col-span-2 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:616,columnNumber:11},this),e.jsxDEV(Q,{images:(oe=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:oe.map(z),onDelete:Be,getName:ce},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:619,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...i("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:626,columnNumber:11},this),e.jsxDEV(a,{error:b.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:632,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:615,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:638,columnNumber:11},this),e.jsxDEV(Q,{images:(te=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:te.map(z),onDelete:He,getName:ce},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:641,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...i("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:648,columnNumber:11},this),e.jsxDEV(a,{error:b.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:654,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:637,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:614,columnNumber:7},this),e.jsxDEV("div",{className:"mt-4 grid grid-cols-2 gap-4 lg:col-span-2",children:[r.status!==3&&e.jsxDEV(Je,{children:[e.jsxDEV(er,{asChild:!0,children:e.jsxDEV(me,{type:"button",variant:"destructive",children:"Cancel Order"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:664,columnNumber:15},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:663,columnNumber:13},this),e.jsxDEV(rr,{children:[e.jsxDEV(sr,{children:[e.jsxDEV(mr,{children:"Are you absolutely sure?"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:670,columnNumber:17},this),e.jsxDEV(ir,{children:"This action cannot be undone. This will permanently cancel this order and can not revert."},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:671,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:669,columnNumber:15},this),e.jsxDEV(or,{children:[e.jsxDEV(tr,{children:"Cancel"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:677,columnNumber:17},this),e.jsxDEV(ur,{variant:"destructive",onClick:ze,children:"Confirm"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:678,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:676,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:668,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:662,columnNumber:11},this),e.jsxDEV(me,{type:"submit",className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:688,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:660,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-admin.form.tsx",lineNumber:353,columnNumber:5},this)}const ne=t.object({id:t.coerce.number(),card_type:t.string({required_error:"Required."}),user_option:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_pos_info:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_users:t.coerce.number({required_error:"Required."}).gt(0,"Required."),id_vietnamese_bank:t.coerce.number({required_error:"Required."}).gt(0,"Required."),days_coming_due:t.coerce.number({required_error:"Required."}),notification_coming_due:t.coerce.number(),note:t.string(),images_creditcard_due_withdrawn:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional(),images_transfer_money_to_customer:t.any().refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>u.size>B))},"Max file size is 5MB.").refine(r=>{var m;return!(r!=null&&r.length)||!((m=Array.from(r))!=null&&m.some(u=>!H.includes(u.type)))},".jpg, .jpeg, .png and .webp files are accepted.").optional()});function gr(r){const m=Te(r);return K({method:"patch",url:"/customer_history/order_update_user",data:m,headers:{"Content-Type":"multipart/form-data"}})}function yr(){const{mutateAsync:r}=L({mutationFn:gr,onSuccess:()=>{Y.invalidateQueries({queryKey:G.CUSTOMER_HISTORY})}});return{mutationUpdateOrderUser:r}}function _r({defaultValues:r,defaultCustomer:m,defaultCreditCard:u}){var A,I;const U=le(),[f,C]=y.useState(u),[n,E]=y.useState({id:r.id_pos_info}),[l,R]=y.useState(Number(r.fee)),[j,S]=y.useState(r.percent_to_charge),[F,$]=y.useState(String(r.rate_option)),{register:d,handleSubmit:w,getValues:_,formState:{errors:N}}=de({defaultValues:{...r,images_creditcard_due_withdrawn:void 0,images_transfer_money_to_customer:void 0},resolver:pe(ne)}),{mutationCalculateManual:D}=Ne(),{mutationCalculateByLevelRate:M}=be(),{mutationUpdateOrderUser:W}=yr(),X=async p=>{const k=ne.parse(p);(await W(k)).status&&U(se.CUSTOMER_HISTORIES)};async function i(p){const k=_("money_total"),v=_("rate_option"),P=_("percent_to_charge");let T={status:!1,fee:0,rate:Number(P),result:0};p&&p==="2"||!p&&v===2?T=await M({money_total:k}):Number(P)>0&&(T=await D({money_total:k,percent_to_charge:String(P)})),T.status&&(R(T==null?void 0:T.fee),d("percent_to_charge").onChange({target:{name:"percent_to_charge",value:T==null?void 0:T.rate}}),d("money_applied_percent").onChange({target:{name:"money_applied_percent",value:T.result}}))}const Z=p=>{E(p)},x=p=>{$(p),i(p)},b=p=>{d("money_total").onChange(p),i()},J=p=>{d("percent_to_charge").onChange(p),S(p.target.value)},ee=()=>i();return e.jsxDEV("form",{onSubmit:w(X),className:"grid grid-cols-1 lg:grid-cols-2 gap-4",autoComplete:"off",children:[e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Customer full name"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:162,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,defaultValue:m==null?void 0:m.full_name},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:163,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:161,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_customer_creditcard",children:"Credit Card"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:167,columnNumber:9},this),e.jsxDEV(he,{...d("id_customer_creditcard"),defaultValue:f!=null&&f.id?String(f.id):"",listCustomerCreditcards:m==null?void 0:m.list_customer_creditcard,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:168,columnNumber:9},this),e.jsxDEV(a,{error:N.id_customer_creditcard},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:174,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:166,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_pos_info",children:"POS"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:178,columnNumber:9},this),f?e.jsxDEV(ge,{...d("id_pos_info"),idCustomerCreditcard:f.id,onSelectPos:Z,defaultValue:n==null?void 0:n.id,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:180,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:188,columnNumber:11},this),e.jsxDEV(a,{error:N.id_pos_info},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:190,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:177,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"id_vietnamese_bank",children:"Bank"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:194,columnNumber:9},this),f?e.jsxDEV(ve,{name:d("id_vietnamese_bank").name,onChange:d("id_vietnamese_bank").onChange,onBlur:d("id_vietnamese_bank").onBlur,readOnly:!0,defaultValue:f!=null&&f.id_vietnamese_bank?String(f.id_vietnamese_bank):void 0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:196,columnNumber:11},this):e.jsxDEV(c,{readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:208,columnNumber:11},this),e.jsxDEV(a,{error:N.id_vietnamese_bank},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:210,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:193,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"money_total",children:"Total Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:214,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...d("money_total"),onChange:b,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:216,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(_("money_total")))?" ":O(Number(_("money_total")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:221,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:215,columnNumber:9},this),e.jsxDEV(a,{error:N.money_total},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:227,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:213,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"customer",children:"Max Usage Money"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:231,columnNumber:9},this),e.jsxDEV(c,{readOnly:!0,defaultValue:n==null?void 0:n.max_per_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:232,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:230,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"user_option",children:"User Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:236,columnNumber:9},this),e.jsxDEV(ye,{...d("user_option"),defaultValue:String(r.user_option)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:237,columnNumber:9},this),e.jsxDEV(a,{error:N.user_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:241,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:235,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"rate_option",children:"Rate Option"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:245,columnNumber:9},this),e.jsxDEV(_e,{...d("rate_option"),defaultValue:String(r.rate_option),onSelectRate:x,readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:246,columnNumber:9},this),e.jsxDEV(a,{error:N.rate_option},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:252,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:244,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"percent_to_charge",children:"Percent to Charge"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:256,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...d("percent_to_charge"),value:j,onChange:J,onBlur:ee,readOnly:F==="2"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:258,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(_("percent_to_charge")))?" ":Ve(Number(_("percent_to_charge"))/100)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:265,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:257,columnNumber:9},this),e.jsxDEV(a,{error:N.percent_to_charge},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:271,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:255,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"fee",children:"Fee"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:275,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{readOnly:!0,value:l},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:277,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(l))?" ":O(Number(l))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:278,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:276,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:274,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"money_applied_percent",children:"Total Money Applied Percent"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:285,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(c,{...d("money_applied_percent"),value:_("money_applied_percent"),readOnly:!0},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:289,columnNumber:11},this),e.jsxDEV("p",{className:"p-2 text-sm italic",children:isNaN(Number(_("money_applied_percent")))?" ":O(Number(_("money_applied_percent")))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:294,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:288,columnNumber:9},this),e.jsxDEV(a,{error:N.money_applied_percent},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:300,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:284,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"days_coming_due",children:"Days Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:304,columnNumber:9},this),e.jsxDEV(c,{...d("days_coming_due")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:305,columnNumber:9},this),e.jsxDEV(a,{error:N.days_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:306,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:303,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"notification_coming_due",children:"Notification Coming Due"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:310,columnNumber:9},this),e.jsxDEV(De,{...d("notification_coming_due"),defaultValue:String(r.notification_coming_due),onValueChange:p=>d("notification_coming_due").onChange({target:{name:"notification_coming_due",value:p}}),children:[e.jsxDEV(Ue,{className:"h-8 w-20",children:e.jsxDEV(ke,{placeholder:"Set notification"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:321,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:320,columnNumber:11},this),e.jsxDEV(Ee,{children:[{status:"No",value:"0"},{status:"Yes",value:"1"}].map(({status:p,value:k})=>e.jsxDEV(je,{value:k,children:p},k,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:328,columnNumber:15},this))},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:323,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:311,columnNumber:9},this),e.jsxDEV(a,{error:N.notification_coming_due},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:334,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:309,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"card_type",children:"Card Type"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:338,columnNumber:9},this),e.jsxDEV(xe,{...d("card_type"),defaultValue:r.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:339,columnNumber:9},this),e.jsxDEV(a,{error:N.card_type},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:343,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:337,columnNumber:7},this),e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr] items-center gap-2",children:[e.jsxDEV(o,{htmlFor:"note",children:"Note"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:347,columnNumber:9},this),e.jsxDEV(fe,{...d("note")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:348,columnNumber:9},this),e.jsxDEV(a,{error:N.note},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:349,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:346,columnNumber:7},this),e.jsxDEV("div",{className:"grid lg:col-span-2 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_creditcard_due_withdrawn",children:"Credit card Due/Withdrawn images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:354,columnNumber:11},this),e.jsxDEV(Q,{images:(A=r==null?void 0:r.images_creditcard_due_withdrawn)==null?void 0:A.map(z)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:357,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...d("images_creditcard_due_withdrawn")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:362,columnNumber:11},this),e.jsxDEV(a,{error:N.images_creditcard_due_withdrawn},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:368,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:353,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(o,{htmlFor:"images_transfer_money_to_customer",children:"Transfer money to customer images"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:374,columnNumber:11},this),e.jsxDEV(Q,{images:(I=r==null?void 0:r.images_transfer_money_to_customer)==null?void 0:I.map(z)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:377,columnNumber:11},this),e.jsxDEV(c,{type:"file",multiple:!0,accept:".gif, .jpg, .jpeg, .png, .pdf",...d("images_transfer_money_to_customer")},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:382,columnNumber:11},this),e.jsxDEV(a,{error:N.images_transfer_money_to_customer},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:388,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:373,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:352,columnNumber:7},this),e.jsxDEV("div",{className:"lg:col-span-2 mt-4",children:e.jsxDEV(me,{className:"w-full",children:"Submit"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:395,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:394,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/forms/customer-history/order-update-user.form.tsx",lineNumber:156,columnNumber:5},this)}function xr(){var n;const r=Ge(),{isAdmin:m}=nr(),{customerHistory:u}=cr(Number(r.id)),{customer:U}=Pe((u==null?void 0:u.id_customer_info)||0),f=(n=U==null?void 0:U.list_customer_creditcard)==null?void 0:n.find(E=>E.id===(u==null?void 0:u.id_customer_creditcard)),C=m()?hr:_r;return e.jsxDEV("div",{className:"space-y-6 px-4 py-4",children:[e.jsxDEV("div",{className:"flex items-center flex-col lg:flex-row justify-between space-y-2",children:e.jsxDEV("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:["Update Order: ",r.id]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:26,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:25,columnNumber:7},this),u&&f&&U&&e.jsxDEV(C,{defaultValues:u,defaultCreditCard:f,defaultCustomer:U},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:31,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/containers/order-update.container.tsx",lineNumber:24,columnNumber:5},this)}function ms(){return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ke,{children:e.jsxDEV("title",{children:"POS System - Order Update"},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:8,columnNumber:9},this)},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:7,columnNumber:7},this),e.jsxDEV(xr,{},void 0,!1,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:10,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ldky90/Public/Training/crm/src/app/modules/customer/pages/order-update.page.tsx",lineNumber:6,columnNumber:5},this)}export{ms as default};
